webpackJsonp([0],{"/ocq":function(t,e,n){"use strict";
/*!
  * vue-router v3.1.3
  * (c) 2019 Evan You
  * @license MIT
  */function r(t,e){0}function i(t){return Object.prototype.toString.call(t).indexOf("Error")>-1}function o(t,e){return e instanceof t||e&&(e.name===t.name||e._name===t._name)}function a(t,e){for(var n in e)t[n]=e[n];return t}var s={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(t,e){var n=e.props,r=e.children,i=e.parent,o=e.data;o.routerView=!0;for(var s=i.$createElement,u=n.name,c=i.$route,l=i._routerViewCache||(i._routerViewCache={}),h=0,f=!1;i&&i._routerRoot!==i;){var p=i.$vnode&&i.$vnode.data;p&&(p.routerView&&h++,p.keepAlive&&i._inactive&&(f=!0)),i=i.$parent}if(o.routerViewDepth=h,f)return s(l[u],o,r);var d=c.matched[h];if(!d)return l[u]=null,s();var m=l[u]=d.components[u];o.registerRouteInstance=function(t,e){var n=d.instances[u];(e&&n!==t||!e&&n===t)&&(d.instances[u]=e)},(o.hook||(o.hook={})).prepatch=function(t,e){d.instances[u]=e.componentInstance},o.hook.init=function(t){t.data.keepAlive&&t.componentInstance&&t.componentInstance!==d.instances[u]&&(d.instances[u]=t.componentInstance)};var y=o.props=function(t,e){switch(typeof e){case"undefined":return;case"object":return e;case"function":return e(t);case"boolean":return e?t.params:void 0;default:0}}(c,d.props&&d.props[u]);if(y){y=o.props=a({},y);var v=o.attrs=o.attrs||{};for(var g in y)m.props&&g in m.props||(v[g]=y[g],delete y[g])}return s(m,o,r)}};var u=/[!'()*]/g,c=function(t){return"%"+t.charCodeAt(0).toString(16)},l=/%2C/g,h=function(t){return encodeURIComponent(t).replace(u,c).replace(l,",")},f=decodeURIComponent;function p(t){var e={};return(t=t.trim().replace(/^(\?|#|&)/,""))?(t.split("&").forEach(function(t){var n=t.replace(/\+/g," ").split("="),r=f(n.shift()),i=n.length>0?f(n.join("=")):null;void 0===e[r]?e[r]=i:Array.isArray(e[r])?e[r].push(i):e[r]=[e[r],i]}),e):e}function d(t){var e=t?Object.keys(t).map(function(e){var n=t[e];if(void 0===n)return"";if(null===n)return h(e);if(Array.isArray(n)){var r=[];return n.forEach(function(t){void 0!==t&&(null===t?r.push(h(e)):r.push(h(e)+"="+h(t)))}),r.join("&")}return h(e)+"="+h(n)}).filter(function(t){return t.length>0}).join("&"):null;return e?"?"+e:""}var m=/\/?$/;function y(t,e,n,r){var i=r&&r.options.stringifyQuery,o=e.query||{};try{o=v(o)}catch(t){}var a={name:e.name||t&&t.name,meta:t&&t.meta||{},path:e.path||"/",hash:e.hash||"",query:o,params:e.params||{},fullPath:b(e,i),matched:t?function(t){var e=[];for(;t;)e.unshift(t),t=t.parent;return e}(t):[]};return n&&(a.redirectedFrom=b(n,i)),Object.freeze(a)}function v(t){if(Array.isArray(t))return t.map(v);if(t&&"object"==typeof t){var e={};for(var n in t)e[n]=v(t[n]);return e}return t}var g=y(null,{path:"/"});function b(t,e){var n=t.path,r=t.query;void 0===r&&(r={});var i=t.hash;return void 0===i&&(i=""),(n||"/")+(e||d)(r)+i}function w(t,e){return e===g?t===e:!!e&&(t.path&&e.path?t.path.replace(m,"")===e.path.replace(m,"")&&t.hash===e.hash&&T(t.query,e.query):!(!t.name||!e.name)&&(t.name===e.name&&t.hash===e.hash&&T(t.query,e.query)&&T(t.params,e.params)))}function T(t,e){if(void 0===t&&(t={}),void 0===e&&(e={}),!t||!e)return t===e;var n=Object.keys(t),r=Object.keys(e);return n.length===r.length&&n.every(function(n){var r=t[n],i=e[n];return"object"==typeof r&&"object"==typeof i?T(r,i):String(r)===String(i)})}function S(t,e,n){var r=t.charAt(0);if("/"===r)return t;if("?"===r||"#"===r)return e+t;var i=e.split("/");n&&i[i.length-1]||i.pop();for(var o=t.replace(/^\//,"").split("/"),a=0;a<o.length;a++){var s=o[a];".."===s?i.pop():"."!==s&&i.push(s)}return""!==i[0]&&i.unshift(""),i.join("/")}function E(t){return t.replace(/\/\//g,"/")}var C=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},I=B,_=O,A=function(t,e){return x(O(t,e))},D=x,N=V,k=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function O(t,e){for(var n,r=[],i=0,o=0,a="",s=e&&e.delimiter||"/";null!=(n=k.exec(t));){var u=n[0],c=n[1],l=n.index;if(a+=t.slice(o,l),o=l+u.length,c)a+=c[1];else{var h=t[o],f=n[2],p=n[3],d=n[4],m=n[5],y=n[6],v=n[7];a&&(r.push(a),a="");var g=null!=f&&null!=h&&h!==f,b="+"===y||"*"===y,w="?"===y||"*"===y,T=n[2]||s,S=d||m;r.push({name:p||i++,prefix:f||"",delimiter:T,optional:w,repeat:b,partial:g,asterisk:!!v,pattern:S?L(S):v?".*":"[^"+M(T)+"]+?"})}}return o<t.length&&(a+=t.substr(o)),a&&r.push(a),r}function R(t){return encodeURI(t).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function x(t){for(var e=new Array(t.length),n=0;n<t.length;n++)"object"==typeof t[n]&&(e[n]=new RegExp("^(?:"+t[n].pattern+")$"));return function(n,r){for(var i="",o=n||{},a=(r||{}).pretty?R:encodeURIComponent,s=0;s<t.length;s++){var u=t[s];if("string"!=typeof u){var c,l=o[u.name];if(null==l){if(u.optional){u.partial&&(i+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(C(l)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(l)+"`");if(0===l.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var h=0;h<l.length;h++){if(c=a(l[h]),!e[s].test(c))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(c)+"`");i+=(0===h?u.prefix:u.delimiter)+c}}else{if(c=u.asterisk?encodeURI(l).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}):a(l),!e[s].test(c))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+c+'"');i+=u.prefix+c}}else i+=u}return i}}function M(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function L(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function P(t,e){return t.keys=e,t}function F(t){return t.sensitive?"":"i"}function V(t,e,n){C(e)||(n=e||n,e=[]);for(var r=(n=n||{}).strict,i=!1!==n.end,o="",a=0;a<t.length;a++){var s=t[a];if("string"==typeof s)o+=M(s);else{var u=M(s.prefix),c="(?:"+s.pattern+")";e.push(s),s.repeat&&(c+="(?:"+u+c+")*"),o+=c=s.optional?s.partial?u+"("+c+")?":"(?:"+u+"("+c+"))?":u+"("+c+")"}}var l=M(n.delimiter||"/"),h=o.slice(-l.length)===l;return r||(o=(h?o.slice(0,-l.length):o)+"(?:"+l+"(?=$))?"),o+=i?"$":r&&h?"":"(?="+l+"|$)",P(new RegExp("^"+o,F(n)),e)}function B(t,e,n){return C(e)||(n=e||n,e=[]),n=n||{},t instanceof RegExp?function(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return P(t,e)}(t,e):C(t)?function(t,e,n){for(var r=[],i=0;i<t.length;i++)r.push(B(t[i],e,n).source);return P(new RegExp("(?:"+r.join("|")+")",F(n)),e)}(t,e,n):function(t,e,n){return V(O(t,n),e,n)}(t,e,n)}I.parse=_,I.compile=A,I.tokensToFunction=D,I.tokensToRegExp=N;var q=Object.create(null);function U(t,e,n){e=e||{};try{var r=q[t]||(q[t]=I.compile(t));return e.pathMatch&&(e[0]=e.pathMatch),r(e,{pretty:!0})}catch(t){return""}finally{delete e[0]}}function j(t,e,n,r){var i="string"==typeof t?{path:t}:t;if(i._normalized)return i;if(i.name)return a({},t);if(!i.path&&i.params&&e){(i=a({},i))._normalized=!0;var o=a(a({},e.params),i.params);if(e.name)i.name=e.name,i.params=o;else if(e.matched.length){var s=e.matched[e.matched.length-1].path;i.path=U(s,o,e.path)}else 0;return i}var u=function(t){var e="",n="",r=t.indexOf("#");r>=0&&(e=t.slice(r),t=t.slice(0,r));var i=t.indexOf("?");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{path:t,query:n,hash:e}}(i.path||""),c=e&&e.path||"/",l=u.path?S(u.path,c,n||i.append):c,h=function(t,e,n){void 0===e&&(e={});var r,i=n||p;try{r=i(t||"")}catch(t){r={}}for(var o in e)r[o]=e[o];return r}(u.query,i.query,r&&r.options.parseQuery),f=i.hash||u.hash;return f&&"#"!==f.charAt(0)&&(f="#"+f),{_normalized:!0,path:l,query:h,hash:f}}var K,$=[String,Object],W=[String,Array],z=function(){},Q={name:"RouterLink",props:{to:{type:$,required:!0},tag:{type:String,default:"a"},exact:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,event:{type:W,default:"click"}},render:function(t){var e=this,n=this.$router,r=this.$route,i=n.resolve(this.to,r,this.append),o=i.location,s=i.route,u=i.href,c={},l=n.options.linkActiveClass,h=n.options.linkExactActiveClass,f=null==l?"router-link-active":l,p=null==h?"router-link-exact-active":h,d=null==this.activeClass?f:this.activeClass,v=null==this.exactActiveClass?p:this.exactActiveClass,g=s.redirectedFrom?y(null,j(s.redirectedFrom),null,n):s;c[v]=w(r,g),c[d]=this.exact?c[v]:function(t,e){return 0===t.path.replace(m,"/").indexOf(e.path.replace(m,"/"))&&(!e.hash||t.hash===e.hash)&&function(t,e){for(var n in e)if(!(n in t))return!1;return!0}(t.query,e.query)}(r,g);var b=function(t){G(t)&&(e.replace?n.replace(o,z):n.push(o,z))},T={click:G};Array.isArray(this.event)?this.event.forEach(function(t){T[t]=b}):T[this.event]=b;var S={class:c},E=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:u,route:s,navigate:b,isActive:c[d],isExactActive:c[v]});if(E){if(1===E.length)return E[0];if(E.length>1||!E.length)return 0===E.length?t():t("span",{},E)}if("a"===this.tag)S.on=T,S.attrs={href:u};else{var C=function t(e){if(e)for(var n,r=0;r<e.length;r++){if("a"===(n=e[r]).tag)return n;if(n.children&&(n=t(n.children)))return n}}(this.$slots.default);if(C){C.isStatic=!1;var I=C.data=a({},C.data);for(var _ in I.on=I.on||{},I.on){var A=I.on[_];_ in T&&(I.on[_]=Array.isArray(A)?A:[A])}for(var D in T)D in I.on?I.on[D].push(T[D]):I.on[D]=b;(C.data.attrs=a({},C.data.attrs)).href=u}else S.on=T}return t(this.tag,S,this.$slots.default)}};function G(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey||t.defaultPrevented||void 0!==t.button&&0!==t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){var e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function H(t){if(!H.installed||K!==t){H.installed=!0,K=t;var e=function(t){return void 0!==t},n=function(t,n){var r=t.$options._parentVnode;e(r)&&e(r=r.data)&&e(r=r.registerRouteInstance)&&r(t,n)};t.mixin({beforeCreate:function(){e(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),t.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,n(this,this)},destroyed:function(){n(this)}}),Object.defineProperty(t.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(t.prototype,"$route",{get:function(){return this._routerRoot._route}}),t.component("RouterView",s),t.component("RouterLink",Q);var r=t.config.optionMergeStrategies;r.beforeRouteEnter=r.beforeRouteLeave=r.beforeRouteUpdate=r.created}}var Y="undefined"!=typeof window;function J(t,e,n,r){var i=e||[],o=n||Object.create(null),a=r||Object.create(null);t.forEach(function(t){!function t(e,n,r,i,o,a){var s=i.path;var u=i.name;0;var c=i.pathToRegexpOptions||{};var l=function(t,e,n){n||(t=t.replace(/\/$/,""));if("/"===t[0])return t;if(null==e)return t;return E(e.path+"/"+t)}(s,o,c.strict);"boolean"==typeof i.caseSensitive&&(c.sensitive=i.caseSensitive);var h={path:l,regex:function(t,e){var n=I(t,[],e);return n}(l,c),components:i.components||{default:i.component},instances:{},name:u,parent:o,matchAs:a,redirect:i.redirect,beforeEnter:i.beforeEnter,meta:i.meta||{},props:null==i.props?{}:i.components?i.props:{default:i.props}};i.children&&i.children.forEach(function(i){var o=a?E(a+"/"+i.path):void 0;t(e,n,r,i,h,o)});n[h.path]||(e.push(h.path),n[h.path]=h);if(void 0!==i.alias)for(var f=Array.isArray(i.alias)?i.alias:[i.alias],p=0;p<f.length;++p){var d=f[p];0;var m={path:d,children:i.children};t(e,n,r,m,o,h.path||"/")}u&&(r[u]||(r[u]=h))}(i,o,a,t)});for(var s=0,u=i.length;s<u;s++)"*"===i[s]&&(i.push(i.splice(s,1)[0]),u--,s--);return{pathList:i,pathMap:o,nameMap:a}}function X(t,e){var n=J(t),r=n.pathList,i=n.pathMap,o=n.nameMap;function a(t,n,a){var s=j(t,n,!1,e),c=s.name;if(c){var l=o[c];if(!l)return u(null,s);var h=l.regex.keys.filter(function(t){return!t.optional}).map(function(t){return t.name});if("object"!=typeof s.params&&(s.params={}),n&&"object"==typeof n.params)for(var f in n.params)!(f in s.params)&&h.indexOf(f)>-1&&(s.params[f]=n.params[f]);return s.path=U(l.path,s.params),u(l,s,a)}if(s.path){s.params={};for(var p=0;p<r.length;p++){var d=r[p],m=i[d];if(Z(m.regex,s.path,s.params))return u(m,s,a)}}return u(null,s)}function s(t,n){var r=t.redirect,i="function"==typeof r?r(y(t,n,null,e)):r;if("string"==typeof i&&(i={path:i}),!i||"object"!=typeof i)return u(null,n);var s=i,c=s.name,l=s.path,h=n.query,f=n.hash,p=n.params;if(h=s.hasOwnProperty("query")?s.query:h,f=s.hasOwnProperty("hash")?s.hash:f,p=s.hasOwnProperty("params")?s.params:p,c){o[c];return a({_normalized:!0,name:c,query:h,hash:f,params:p},void 0,n)}if(l){var d=function(t,e){return S(t,e.parent?e.parent.path:"/",!0)}(l,t);return a({_normalized:!0,path:U(d,p),query:h,hash:f},void 0,n)}return u(null,n)}function u(t,n,r){return t&&t.redirect?s(t,r||n):t&&t.matchAs?function(t,e,n){var r=a({_normalized:!0,path:U(n,e.params)});if(r){var i=r.matched,o=i[i.length-1];return e.params=r.params,u(o,e)}return u(null,e)}(0,n,t.matchAs):y(t,n,r,e)}return{match:a,addRoutes:function(t){J(t,r,i,o)}}}function Z(t,e,n){var r=e.match(t);if(!r)return!1;if(!n)return!0;for(var i=1,o=r.length;i<o;++i){var a=t.keys[i-1],s="string"==typeof r[i]?decodeURIComponent(r[i]):r[i];a&&(n[a.name||"pathMatch"]=s)}return!0}var tt=Y&&window.performance&&window.performance.now?window.performance:Date;function et(){return tt.now().toFixed(3)}var nt=et();function rt(){return nt}function it(t){return nt=t}var ot=Object.create(null);function at(){var t=window.location.protocol+"//"+window.location.host,e=window.location.href.replace(t,"");window.history.replaceState({key:rt()},"",e),window.addEventListener("popstate",function(t){ut(),t.state&&t.state.key&&it(t.state.key)})}function st(t,e,n,r){if(t.app){var i=t.options.scrollBehavior;i&&t.app.$nextTick(function(){var o=function(){var t=rt();if(t)return ot[t]}(),a=i.call(t,e,n,r?o:null);a&&("function"==typeof a.then?a.then(function(t){pt(t,o)}).catch(function(t){0}):pt(a,o))})}}function ut(){var t=rt();t&&(ot[t]={x:window.pageXOffset,y:window.pageYOffset})}function ct(t){return ht(t.x)||ht(t.y)}function lt(t){return{x:ht(t.x)?t.x:window.pageXOffset,y:ht(t.y)?t.y:window.pageYOffset}}function ht(t){return"number"==typeof t}var ft=/^#\d/;function pt(t,e){var n,r="object"==typeof t;if(r&&"string"==typeof t.selector){var i=ft.test(t.selector)?document.getElementById(t.selector.slice(1)):document.querySelector(t.selector);if(i){var o=t.offset&&"object"==typeof t.offset?t.offset:{};e=function(t,e){var n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{x:r.left-n.left-e.x,y:r.top-n.top-e.y}}(i,o={x:ht((n=o).x)?n.x:0,y:ht(n.y)?n.y:0})}else ct(t)&&(e=lt(t))}else r&&ct(t)&&(e=lt(t));e&&window.scrollTo(e.x,e.y)}var dt,mt=Y&&((-1===(dt=window.navigator.userAgent).indexOf("Android 2.")&&-1===dt.indexOf("Android 4.0")||-1===dt.indexOf("Mobile Safari")||-1!==dt.indexOf("Chrome")||-1!==dt.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history);function yt(t,e){ut();var n=window.history;try{e?n.replaceState({key:rt()},"",t):n.pushState({key:it(et())},"",t)}catch(n){window.location[e?"replace":"assign"](t)}}function vt(t){yt(t,!0)}function gt(t,e,n){var r=function(i){i>=t.length?n():t[i]?e(t[i],function(){r(i+1)}):r(i+1)};r(0)}function bt(t){return function(e,n,r){var o=!1,a=0,s=null;wt(t,function(t,e,n,u){if("function"==typeof t&&void 0===t.cid){o=!0,a++;var c,l=Et(function(e){var i;((i=e).__esModule||St&&"Module"===i[Symbol.toStringTag])&&(e=e.default),t.resolved="function"==typeof e?e:K.extend(e),n.components[u]=e,--a<=0&&r()}),h=Et(function(t){var e="Failed to resolve async component "+u+": "+t;s||(s=i(t)?t:new Error(e),r(s))});try{c=t(l,h)}catch(t){h(t)}if(c)if("function"==typeof c.then)c.then(l,h);else{var f=c.component;f&&"function"==typeof f.then&&f.then(l,h)}}}),o||r()}}function wt(t,e){return Tt(t.map(function(t){return Object.keys(t.components).map(function(n){return e(t.components[n],t.instances[n],t,n)})}))}function Tt(t){return Array.prototype.concat.apply([],t)}var St="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;function Et(t){var e=!1;return function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];if(!e)return e=!0,t.apply(this,n)}}var Ct=function(t){function e(e){t.call(this),this.name=this._name="NavigationDuplicated",this.message='Navigating to current location ("'+e.fullPath+'") is not allowed',Object.defineProperty(this,"stack",{value:(new t).stack,writable:!0,configurable:!0})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error);Ct._name="NavigationDuplicated";var It=function(t,e){this.router=t,this.base=function(t){if(!t)if(Y){var e=document.querySelector("base");t=(t=e&&e.getAttribute("href")||"/").replace(/^https?:\/\/[^\/]+/,"")}else t="/";"/"!==t.charAt(0)&&(t="/"+t);return t.replace(/\/$/,"")}(e),this.current=g,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[]};function _t(t,e,n,r){var i=wt(t,function(t,r,i,o){var a=function(t,e){"function"!=typeof t&&(t=K.extend(t));return t.options[e]}(t,e);if(a)return Array.isArray(a)?a.map(function(t){return n(t,r,i,o)}):n(a,r,i,o)});return Tt(r?i.reverse():i)}function At(t,e){if(e)return function(){return t.apply(e,arguments)}}It.prototype.listen=function(t){this.cb=t},It.prototype.onReady=function(t,e){this.ready?t():(this.readyCbs.push(t),e&&this.readyErrorCbs.push(e))},It.prototype.onError=function(t){this.errorCbs.push(t)},It.prototype.transitionTo=function(t,e,n){var r=this,i=this.router.match(t,this.current);this.confirmTransition(i,function(){r.updateRoute(i),e&&e(i),r.ensureURL(),r.ready||(r.ready=!0,r.readyCbs.forEach(function(t){t(i)}))},function(t){n&&n(t),t&&!r.ready&&(r.ready=!0,r.readyErrorCbs.forEach(function(e){e(t)}))})},It.prototype.confirmTransition=function(t,e,n){var a=this,s=this.current,u=function(t){!o(Ct,t)&&i(t)&&(a.errorCbs.length?a.errorCbs.forEach(function(e){e(t)}):(r(),console.error(t))),n&&n(t)};if(w(t,s)&&t.matched.length===s.matched.length)return this.ensureURL(),u(new Ct(t));var c=function(t,e){var n,r=Math.max(t.length,e.length);for(n=0;n<r&&t[n]===e[n];n++);return{updated:e.slice(0,n),activated:e.slice(n),deactivated:t.slice(n)}}(this.current.matched,t.matched),l=c.updated,h=c.deactivated,f=c.activated,p=[].concat(function(t){return _t(t,"beforeRouteLeave",At,!0)}(h),this.router.beforeHooks,function(t){return _t(t,"beforeRouteUpdate",At)}(l),f.map(function(t){return t.beforeEnter}),bt(f));this.pending=t;var d=function(e,n){if(a.pending!==t)return u();try{e(t,s,function(t){!1===t||i(t)?(a.ensureURL(!0),u(t)):"string"==typeof t||"object"==typeof t&&("string"==typeof t.path||"string"==typeof t.name)?(u(),"object"==typeof t&&t.replace?a.replace(t):a.push(t)):n(t)})}catch(t){u(t)}};gt(p,d,function(){var n=[];gt(function(t,e,n){return _t(t,"beforeRouteEnter",function(t,r,i,o){return function(t,e,n,r,i){return function(o,a,s){return t(o,a,function(t){"function"==typeof t&&r.push(function(){!function t(e,n,r,i){n[r]&&!n[r]._isBeingDestroyed?e(n[r]):i()&&setTimeout(function(){t(e,n,r,i)},16)}(t,e.instances,n,i)}),s(t)})}}(t,i,o,e,n)})}(f,n,function(){return a.current===t}).concat(a.router.resolveHooks),d,function(){if(a.pending!==t)return u();a.pending=null,e(t),a.router.app&&a.router.app.$nextTick(function(){n.forEach(function(t){t()})})})})},It.prototype.updateRoute=function(t){var e=this.current;this.current=t,this.cb&&this.cb(t),this.router.afterHooks.forEach(function(n){n&&n(t,e)})};var Dt=function(t){function e(e,n){var r=this;t.call(this,e,n);var i=e.options.scrollBehavior,o=mt&&i;o&&at();var a=Nt(this.base);window.addEventListener("popstate",function(t){var n=r.current,i=Nt(r.base);r.current===g&&i===a||r.transitionTo(i,function(t){o&&st(e,t,n,!0)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.go=function(t){window.history.go(t)},e.prototype.push=function(t,e,n){var r=this,i=this.current;this.transitionTo(t,function(t){yt(E(r.base+t.fullPath)),st(r.router,t,i,!1),e&&e(t)},n)},e.prototype.replace=function(t,e,n){var r=this,i=this.current;this.transitionTo(t,function(t){vt(E(r.base+t.fullPath)),st(r.router,t,i,!1),e&&e(t)},n)},e.prototype.ensureURL=function(t){if(Nt(this.base)!==this.current.fullPath){var e=E(this.base+this.current.fullPath);t?yt(e):vt(e)}},e.prototype.getCurrentLocation=function(){return Nt(this.base)},e}(It);function Nt(t){var e=decodeURI(window.location.pathname);return t&&0===e.indexOf(t)&&(e=e.slice(t.length)),(e||"/")+window.location.search+window.location.hash}var kt=function(t){function e(e,n,r){t.call(this,e,n),r&&function(t){var e=Nt(t);if(!/^\/#/.test(e))return window.location.replace(E(t+"/#"+e)),!0}(this.base)||Ot()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var t=this,e=this.router.options.scrollBehavior,n=mt&&e;n&&at(),window.addEventListener(mt?"popstate":"hashchange",function(){var e=t.current;Ot()&&t.transitionTo(Rt(),function(r){n&&st(t.router,r,e,!0),mt||Lt(r.fullPath)})})},e.prototype.push=function(t,e,n){var r=this,i=this.current;this.transitionTo(t,function(t){Mt(t.fullPath),st(r.router,t,i,!1),e&&e(t)},n)},e.prototype.replace=function(t,e,n){var r=this,i=this.current;this.transitionTo(t,function(t){Lt(t.fullPath),st(r.router,t,i,!1),e&&e(t)},n)},e.prototype.go=function(t){window.history.go(t)},e.prototype.ensureURL=function(t){var e=this.current.fullPath;Rt()!==e&&(t?Mt(e):Lt(e))},e.prototype.getCurrentLocation=function(){return Rt()},e}(It);function Ot(){var t=Rt();return"/"===t.charAt(0)||(Lt("/"+t),!1)}function Rt(){var t=window.location.href,e=t.indexOf("#");if(e<0)return"";var n=(t=t.slice(e+1)).indexOf("?");if(n<0){var r=t.indexOf("#");t=r>-1?decodeURI(t.slice(0,r))+t.slice(r):decodeURI(t)}else n>-1&&(t=decodeURI(t.slice(0,n))+t.slice(n));return t}function xt(t){var e=window.location.href,n=e.indexOf("#");return(n>=0?e.slice(0,n):e)+"#"+t}function Mt(t){mt?yt(xt(t)):window.location.hash=t}function Lt(t){mt?vt(xt(t)):window.location.replace(xt(t))}var Pt=function(t){function e(e,n){t.call(this,e,n),this.stack=[],this.index=-1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.push=function(t,e,n){var r=this;this.transitionTo(t,function(t){r.stack=r.stack.slice(0,r.index+1).concat(t),r.index++,e&&e(t)},n)},e.prototype.replace=function(t,e,n){var r=this;this.transitionTo(t,function(t){r.stack=r.stack.slice(0,r.index).concat(t),e&&e(t)},n)},e.prototype.go=function(t){var e=this,n=this.index+t;if(!(n<0||n>=this.stack.length)){var r=this.stack[n];this.confirmTransition(r,function(){e.index=n,e.updateRoute(r)},function(t){o(Ct,t)&&(e.index=n)})}},e.prototype.getCurrentLocation=function(){var t=this.stack[this.stack.length-1];return t?t.fullPath:"/"},e.prototype.ensureURL=function(){},e}(It),Ft=function(t){void 0===t&&(t={}),this.app=null,this.apps=[],this.options=t,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=X(t.routes||[],this);var e=t.mode||"hash";switch(this.fallback="history"===e&&!mt&&!1!==t.fallback,this.fallback&&(e="hash"),Y||(e="abstract"),this.mode=e,e){case"history":this.history=new Dt(this,t.base);break;case"hash":this.history=new kt(this,t.base,this.fallback);break;case"abstract":this.history=new Pt(this,t.base);break;default:0}},Vt={currentRoute:{configurable:!0}};function Bt(t,e){return t.push(e),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}Ft.prototype.match=function(t,e,n){return this.matcher.match(t,e,n)},Vt.currentRoute.get=function(){return this.history&&this.history.current},Ft.prototype.init=function(t){var e=this;if(this.apps.push(t),t.$once("hook:destroyed",function(){var n=e.apps.indexOf(t);n>-1&&e.apps.splice(n,1),e.app===t&&(e.app=e.apps[0]||null)}),!this.app){this.app=t;var n=this.history;if(n instanceof Dt)n.transitionTo(n.getCurrentLocation());else if(n instanceof kt){var r=function(){n.setupListeners()};n.transitionTo(n.getCurrentLocation(),r,r)}n.listen(function(t){e.apps.forEach(function(e){e._route=t})})}},Ft.prototype.beforeEach=function(t){return Bt(this.beforeHooks,t)},Ft.prototype.beforeResolve=function(t){return Bt(this.resolveHooks,t)},Ft.prototype.afterEach=function(t){return Bt(this.afterHooks,t)},Ft.prototype.onReady=function(t,e){this.history.onReady(t,e)},Ft.prototype.onError=function(t){this.history.onError(t)},Ft.prototype.push=function(t,e,n){var r=this;if(!e&&!n&&"undefined"!=typeof Promise)return new Promise(function(e,n){r.history.push(t,e,n)});this.history.push(t,e,n)},Ft.prototype.replace=function(t,e,n){var r=this;if(!e&&!n&&"undefined"!=typeof Promise)return new Promise(function(e,n){r.history.replace(t,e,n)});this.history.replace(t,e,n)},Ft.prototype.go=function(t){this.history.go(t)},Ft.prototype.back=function(){this.go(-1)},Ft.prototype.forward=function(){this.go(1)},Ft.prototype.getMatchedComponents=function(t){var e=t?t.matched?t:this.resolve(t).route:this.currentRoute;return e?[].concat.apply([],e.matched.map(function(t){return Object.keys(t.components).map(function(e){return t.components[e]})})):[]},Ft.prototype.resolve=function(t,e,n){var r=j(t,e=e||this.history.current,n,this),i=this.match(r,e),o=i.redirectedFrom||i.fullPath;return{location:r,route:i,href:function(t,e,n){var r="hash"===n?"#"+e:e;return t?E(t+"/"+r):r}(this.history.base,o,this.mode),normalizedTo:r,resolved:i}},Ft.prototype.addRoutes=function(t){this.matcher.addRoutes(t),this.history.current!==g&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(Ft.prototype,Vt),Ft.install=H,Ft.version="3.1.3",Y&&window.Vue&&window.Vue.use(Ft),e.a=Ft},"7+uW":function(t,e,n){"use strict";(function(t){
/*!
 * Vue.js v2.6.11
 * (c) 2014-2019 Evan You
 * Released under the MIT License.
 */
var n=Object.freeze({});function r(t){return void 0===t||null===t}function i(t){return void 0!==t&&null!==t}function o(t){return!0===t}function a(t){return"string"==typeof t||"number"==typeof t||"symbol"==typeof t||"boolean"==typeof t}function s(t){return null!==t&&"object"==typeof t}var u=Object.prototype.toString;function c(t){return"[object Object]"===u.call(t)}function l(t){return"[object RegExp]"===u.call(t)}function h(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function f(t){return i(t)&&"function"==typeof t.then&&"function"==typeof t.catch}function p(t){return null==t?"":Array.isArray(t)||c(t)&&t.toString===u?JSON.stringify(t,null,2):String(t)}function d(t){var e=parseFloat(t);return isNaN(e)?t:e}function m(t,e){for(var n=Object.create(null),r=t.split(","),i=0;i<r.length;i++)n[r[i]]=!0;return e?function(t){return n[t.toLowerCase()]}:function(t){return n[t]}}var y=m("slot,component",!0),v=m("key,ref,slot,slot-scope,is");function g(t,e){if(t.length){var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}var b=Object.prototype.hasOwnProperty;function w(t,e){return b.call(t,e)}function T(t){var e=Object.create(null);return function(n){return e[n]||(e[n]=t(n))}}var S=/-(\w)/g,E=T(function(t){return t.replace(S,function(t,e){return e?e.toUpperCase():""})}),C=T(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}),I=/\B([A-Z])/g,_=T(function(t){return t.replace(I,"-$1").toLowerCase()});var A=Function.prototype.bind?function(t,e){return t.bind(e)}:function(t,e){function n(n){var r=arguments.length;return r?r>1?t.apply(e,arguments):t.call(e,n):t.call(e)}return n._length=t.length,n};function D(t,e){e=e||0;for(var n=t.length-e,r=new Array(n);n--;)r[n]=t[n+e];return r}function N(t,e){for(var n in e)t[n]=e[n];return t}function k(t){for(var e={},n=0;n<t.length;n++)t[n]&&N(e,t[n]);return e}function O(t,e,n){}var R=function(t,e,n){return!1},x=function(t){return t};function M(t,e){if(t===e)return!0;var n=s(t),r=s(e);if(!n||!r)return!n&&!r&&String(t)===String(e);try{var i=Array.isArray(t),o=Array.isArray(e);if(i&&o)return t.length===e.length&&t.every(function(t,n){return M(t,e[n])});if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(i||o)return!1;var a=Object.keys(t),u=Object.keys(e);return a.length===u.length&&a.every(function(n){return M(t[n],e[n])})}catch(t){return!1}}function L(t,e){for(var n=0;n<t.length;n++)if(M(t[n],e))return n;return-1}function P(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}var F="data-server-rendered",V=["component","directive","filter"],B=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],q={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:R,isReservedAttr:R,isUnknownElement:R,getTagNamespace:O,parsePlatformTagName:x,mustUseProp:R,async:!0,_lifecycleHooks:B},U=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function j(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function K(t,e,n,r){Object.defineProperty(t,e,{value:n,enumerable:!!r,writable:!0,configurable:!0})}var $=new RegExp("[^"+U.source+".$_\\d]");var W,z="__proto__"in{},Q="undefined"!=typeof window,G="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,H=G&&WXEnvironment.platform.toLowerCase(),Y=Q&&window.navigator.userAgent.toLowerCase(),J=Y&&/msie|trident/.test(Y),X=Y&&Y.indexOf("msie 9.0")>0,Z=Y&&Y.indexOf("edge/")>0,tt=(Y&&Y.indexOf("android"),Y&&/iphone|ipad|ipod|ios/.test(Y)||"ios"===H),et=(Y&&/chrome\/\d+/.test(Y),Y&&/phantomjs/.test(Y),Y&&Y.match(/firefox\/(\d+)/)),nt={}.watch,rt=!1;if(Q)try{var it={};Object.defineProperty(it,"passive",{get:function(){rt=!0}}),window.addEventListener("test-passive",null,it)}catch(t){}var ot=function(){return void 0===W&&(W=!Q&&!G&&void 0!==t&&(t.process&&"server"===t.process.env.VUE_ENV)),W},at=Q&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function st(t){return"function"==typeof t&&/native code/.test(t.toString())}var ut,ct="undefined"!=typeof Symbol&&st(Symbol)&&"undefined"!=typeof Reflect&&st(Reflect.ownKeys);ut="undefined"!=typeof Set&&st(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var lt=O,ht=0,ft=function(){this.id=ht++,this.subs=[]};ft.prototype.addSub=function(t){this.subs.push(t)},ft.prototype.removeSub=function(t){g(this.subs,t)},ft.prototype.depend=function(){ft.target&&ft.target.addDep(this)},ft.prototype.notify=function(){var t=this.subs.slice();for(var e=0,n=t.length;e<n;e++)t[e].update()},ft.target=null;var pt=[];function dt(t){pt.push(t),ft.target=t}function mt(){pt.pop(),ft.target=pt[pt.length-1]}var yt=function(t,e,n,r,i,o,a,s){this.tag=t,this.data=e,this.children=n,this.text=r,this.elm=i,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},vt={child:{configurable:!0}};vt.child.get=function(){return this.componentInstance},Object.defineProperties(yt.prototype,vt);var gt=function(t){void 0===t&&(t="");var e=new yt;return e.text=t,e.isComment=!0,e};function bt(t){return new yt(void 0,void 0,void 0,String(t))}function wt(t){var e=new yt(t.tag,t.data,t.children&&t.children.slice(),t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.asyncMeta=t.asyncMeta,e.isCloned=!0,e}var Tt=Array.prototype,St=Object.create(Tt);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(t){var e=Tt[t];K(St,t,function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];var i,o=e.apply(this,n),a=this.__ob__;switch(t){case"push":case"unshift":i=n;break;case"splice":i=n.slice(2)}return i&&a.observeArray(i),a.dep.notify(),o})});var Et=Object.getOwnPropertyNames(St),Ct=!0;function It(t){Ct=t}var _t=function(t){var e;this.value=t,this.dep=new ft,this.vmCount=0,K(t,"__ob__",this),Array.isArray(t)?(z?(e=St,t.__proto__=e):function(t,e,n){for(var r=0,i=n.length;r<i;r++){var o=n[r];K(t,o,e[o])}}(t,St,Et),this.observeArray(t)):this.walk(t)};function At(t,e){var n;if(s(t)&&!(t instanceof yt))return w(t,"__ob__")&&t.__ob__ instanceof _t?n=t.__ob__:Ct&&!ot()&&(Array.isArray(t)||c(t))&&Object.isExtensible(t)&&!t._isVue&&(n=new _t(t)),e&&n&&n.vmCount++,n}function Dt(t,e,n,r,i){var o=new ft,a=Object.getOwnPropertyDescriptor(t,e);if(!a||!1!==a.configurable){var s=a&&a.get,u=a&&a.set;s&&!u||2!==arguments.length||(n=t[e]);var c=!i&&At(n);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=s?s.call(t):n;return ft.target&&(o.depend(),c&&(c.dep.depend(),Array.isArray(e)&&function t(e){for(var n=void 0,r=0,i=e.length;r<i;r++)(n=e[r])&&n.__ob__&&n.__ob__.dep.depend(),Array.isArray(n)&&t(n)}(e))),e},set:function(e){var r=s?s.call(t):n;e===r||e!=e&&r!=r||s&&!u||(u?u.call(t,e):n=e,c=!i&&At(e),o.notify())}})}}function Nt(t,e,n){if(Array.isArray(t)&&h(e))return t.length=Math.max(t.length,e),t.splice(e,1,n),n;if(e in t&&!(e in Object.prototype))return t[e]=n,n;var r=t.__ob__;return t._isVue||r&&r.vmCount?n:r?(Dt(r.value,e,n),r.dep.notify(),n):(t[e]=n,n)}function kt(t,e){if(Array.isArray(t)&&h(e))t.splice(e,1);else{var n=t.__ob__;t._isVue||n&&n.vmCount||w(t,e)&&(delete t[e],n&&n.dep.notify())}}_t.prototype.walk=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)Dt(t,e[n])},_t.prototype.observeArray=function(t){for(var e=0,n=t.length;e<n;e++)At(t[e])};var Ot=q.optionMergeStrategies;function Rt(t,e){if(!e)return t;for(var n,r,i,o=ct?Reflect.ownKeys(e):Object.keys(e),a=0;a<o.length;a++)"__ob__"!==(n=o[a])&&(r=t[n],i=e[n],w(t,n)?r!==i&&c(r)&&c(i)&&Rt(r,i):Nt(t,n,i));return t}function xt(t,e,n){return n?function(){var r="function"==typeof e?e.call(n,n):e,i="function"==typeof t?t.call(n,n):t;return r?Rt(r,i):i}:e?t?function(){return Rt("function"==typeof e?e.call(this,this):e,"function"==typeof t?t.call(this,this):t)}:e:t}function Mt(t,e){var n=e?t?t.concat(e):Array.isArray(e)?e:[e]:t;return n?function(t){for(var e=[],n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n]);return e}(n):n}function Lt(t,e,n,r){var i=Object.create(t||null);return e?N(i,e):i}Ot.data=function(t,e,n){return n?xt(t,e,n):e&&"function"!=typeof e?t:xt(t,e)},B.forEach(function(t){Ot[t]=Mt}),V.forEach(function(t){Ot[t+"s"]=Lt}),Ot.watch=function(t,e,n,r){if(t===nt&&(t=void 0),e===nt&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var i={};for(var o in N(i,t),e){var a=i[o],s=e[o];a&&!Array.isArray(a)&&(a=[a]),i[o]=a?a.concat(s):Array.isArray(s)?s:[s]}return i},Ot.props=Ot.methods=Ot.inject=Ot.computed=function(t,e,n,r){if(!t)return e;var i=Object.create(null);return N(i,t),e&&N(i,e),i},Ot.provide=xt;var Pt=function(t,e){return void 0===e?t:e};function Ft(t,e,n){if("function"==typeof e&&(e=e.options),function(t,e){var n=t.props;if(n){var r,i,o={};if(Array.isArray(n))for(r=n.length;r--;)"string"==typeof(i=n[r])&&(o[E(i)]={type:null});else if(c(n))for(var a in n)i=n[a],o[E(a)]=c(i)?i:{type:i};t.props=o}}(e),function(t,e){var n=t.inject;if(n){var r=t.inject={};if(Array.isArray(n))for(var i=0;i<n.length;i++)r[n[i]]={from:n[i]};else if(c(n))for(var o in n){var a=n[o];r[o]=c(a)?N({from:o},a):{from:a}}}}(e),function(t){var e=t.directives;if(e)for(var n in e){var r=e[n];"function"==typeof r&&(e[n]={bind:r,update:r})}}(e),!e._base&&(e.extends&&(t=Ft(t,e.extends,n)),e.mixins))for(var r=0,i=e.mixins.length;r<i;r++)t=Ft(t,e.mixins[r],n);var o,a={};for(o in t)s(o);for(o in e)w(t,o)||s(o);function s(r){var i=Ot[r]||Pt;a[r]=i(t[r],e[r],n,r)}return a}function Vt(t,e,n,r){if("string"==typeof n){var i=t[e];if(w(i,n))return i[n];var o=E(n);if(w(i,o))return i[o];var a=C(o);return w(i,a)?i[a]:i[n]||i[o]||i[a]}}function Bt(t,e,n,r){var i=e[t],o=!w(n,t),a=n[t],s=jt(Boolean,i.type);if(s>-1)if(o&&!w(i,"default"))a=!1;else if(""===a||a===_(t)){var u=jt(String,i.type);(u<0||s<u)&&(a=!0)}if(void 0===a){a=function(t,e,n){if(!w(e,"default"))return;var r=e.default;0;if(t&&t.$options.propsData&&void 0===t.$options.propsData[n]&&void 0!==t._props[n])return t._props[n];return"function"==typeof r&&"Function"!==qt(e.type)?r.call(t):r}(r,i,t);var c=Ct;It(!0),At(a),It(c)}return a}function qt(t){var e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function Ut(t,e){return qt(t)===qt(e)}function jt(t,e){if(!Array.isArray(e))return Ut(e,t)?0:-1;for(var n=0,r=e.length;n<r;n++)if(Ut(e[n],t))return n;return-1}function Kt(t,e,n){dt();try{if(e)for(var r=e;r=r.$parent;){var i=r.$options.errorCaptured;if(i)for(var o=0;o<i.length;o++)try{if(!1===i[o].call(r,t,e,n))return}catch(t){Wt(t,r,"errorCaptured hook")}}Wt(t,e,n)}finally{mt()}}function $t(t,e,n,r,i){var o;try{(o=n?t.apply(e,n):t.call(e))&&!o._isVue&&f(o)&&!o._handled&&(o.catch(function(t){return Kt(t,r,i+" (Promise/async)")}),o._handled=!0)}catch(t){Kt(t,r,i)}return o}function Wt(t,e,n){if(q.errorHandler)try{return q.errorHandler.call(null,t,e,n)}catch(e){e!==t&&zt(e,null,"config.errorHandler")}zt(t,e,n)}function zt(t,e,n){if(!Q&&!G||"undefined"==typeof console)throw t;console.error(t)}var Qt,Gt=!1,Ht=[],Yt=!1;function Jt(){Yt=!1;var t=Ht.slice(0);Ht.length=0;for(var e=0;e<t.length;e++)t[e]()}if("undefined"!=typeof Promise&&st(Promise)){var Xt=Promise.resolve();Qt=function(){Xt.then(Jt),tt&&setTimeout(O)},Gt=!0}else if(J||"undefined"==typeof MutationObserver||!st(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Qt="undefined"!=typeof setImmediate&&st(setImmediate)?function(){setImmediate(Jt)}:function(){setTimeout(Jt,0)};else{var Zt=1,te=new MutationObserver(Jt),ee=document.createTextNode(String(Zt));te.observe(ee,{characterData:!0}),Qt=function(){Zt=(Zt+1)%2,ee.data=String(Zt)},Gt=!0}function ne(t,e){var n;if(Ht.push(function(){if(t)try{t.call(e)}catch(t){Kt(t,e,"nextTick")}else n&&n(e)}),Yt||(Yt=!0,Qt()),!t&&"undefined"!=typeof Promise)return new Promise(function(t){n=t})}var re=new ut;function ie(t){!function t(e,n){var r,i;var o=Array.isArray(e);if(!o&&!s(e)||Object.isFrozen(e)||e instanceof yt)return;if(e.__ob__){var a=e.__ob__.dep.id;if(n.has(a))return;n.add(a)}if(o)for(r=e.length;r--;)t(e[r],n);else for(i=Object.keys(e),r=i.length;r--;)t(e[i[r]],n)}(t,re),re.clear()}var oe=T(function(t){var e="&"===t.charAt(0),n="~"===(t=e?t.slice(1):t).charAt(0),r="!"===(t=n?t.slice(1):t).charAt(0);return{name:t=r?t.slice(1):t,once:n,capture:r,passive:e}});function ae(t,e){function n(){var t=arguments,r=n.fns;if(!Array.isArray(r))return $t(r,null,arguments,e,"v-on handler");for(var i=r.slice(),o=0;o<i.length;o++)$t(i[o],null,t,e,"v-on handler")}return n.fns=t,n}function se(t,e,n,i,a,s){var u,c,l,h;for(u in t)c=t[u],l=e[u],h=oe(u),r(c)||(r(l)?(r(c.fns)&&(c=t[u]=ae(c,s)),o(h.once)&&(c=t[u]=a(h.name,c,h.capture)),n(h.name,c,h.capture,h.passive,h.params)):c!==l&&(l.fns=c,t[u]=l));for(u in e)r(t[u])&&i((h=oe(u)).name,e[u],h.capture)}function ue(t,e,n){var a;t instanceof yt&&(t=t.data.hook||(t.data.hook={}));var s=t[e];function u(){n.apply(this,arguments),g(a.fns,u)}r(s)?a=ae([u]):i(s.fns)&&o(s.merged)?(a=s).fns.push(u):a=ae([s,u]),a.merged=!0,t[e]=a}function ce(t,e,n,r,o){if(i(e)){if(w(e,n))return t[n]=e[n],o||delete e[n],!0;if(w(e,r))return t[n]=e[r],o||delete e[r],!0}return!1}function le(t){return a(t)?[bt(t)]:Array.isArray(t)?function t(e,n){var s=[];var u,c,l,h;for(u=0;u<e.length;u++)r(c=e[u])||"boolean"==typeof c||(l=s.length-1,h=s[l],Array.isArray(c)?c.length>0&&(he((c=t(c,(n||"")+"_"+u))[0])&&he(h)&&(s[l]=bt(h.text+c[0].text),c.shift()),s.push.apply(s,c)):a(c)?he(h)?s[l]=bt(h.text+c):""!==c&&s.push(bt(c)):he(c)&&he(h)?s[l]=bt(h.text+c.text):(o(e._isVList)&&i(c.tag)&&r(c.key)&&i(n)&&(c.key="__vlist"+n+"_"+u+"__"),s.push(c)));return s}(t):void 0}function he(t){return i(t)&&i(t.text)&&!1===t.isComment}function fe(t,e){if(t){for(var n=Object.create(null),r=ct?Reflect.ownKeys(t):Object.keys(t),i=0;i<r.length;i++){var o=r[i];if("__ob__"!==o){for(var a=t[o].from,s=e;s;){if(s._provided&&w(s._provided,a)){n[o]=s._provided[a];break}s=s.$parent}if(!s)if("default"in t[o]){var u=t[o].default;n[o]="function"==typeof u?u.call(e):u}else 0}}return n}}function pe(t,e){if(!t||!t.length)return{};for(var n={},r=0,i=t.length;r<i;r++){var o=t[r],a=o.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,o.context!==e&&o.fnContext!==e||!a||null==a.slot)(n.default||(n.default=[])).push(o);else{var s=a.slot,u=n[s]||(n[s]=[]);"template"===o.tag?u.push.apply(u,o.children||[]):u.push(o)}}for(var c in n)n[c].every(de)&&delete n[c];return n}function de(t){return t.isComment&&!t.asyncFactory||" "===t.text}function me(t,e,r){var i,o=Object.keys(e).length>0,a=t?!!t.$stable:!o,s=t&&t.$key;if(t){if(t._normalized)return t._normalized;if(a&&r&&r!==n&&s===r.$key&&!o&&!r.$hasNormal)return r;for(var u in i={},t)t[u]&&"$"!==u[0]&&(i[u]=ye(e,u,t[u]))}else i={};for(var c in e)c in i||(i[c]=ve(e,c));return t&&Object.isExtensible(t)&&(t._normalized=i),K(i,"$stable",a),K(i,"$key",s),K(i,"$hasNormal",o),i}function ye(t,e,n){var r=function(){var t=arguments.length?n.apply(null,arguments):n({});return(t=t&&"object"==typeof t&&!Array.isArray(t)?[t]:le(t))&&(0===t.length||1===t.length&&t[0].isComment)?void 0:t};return n.proxy&&Object.defineProperty(t,e,{get:r,enumerable:!0,configurable:!0}),r}function ve(t,e){return function(){return t[e]}}function ge(t,e){var n,r,o,a,u;if(Array.isArray(t)||"string"==typeof t)for(n=new Array(t.length),r=0,o=t.length;r<o;r++)n[r]=e(t[r],r);else if("number"==typeof t)for(n=new Array(t),r=0;r<t;r++)n[r]=e(r+1,r);else if(s(t))if(ct&&t[Symbol.iterator]){n=[];for(var c=t[Symbol.iterator](),l=c.next();!l.done;)n.push(e(l.value,n.length)),l=c.next()}else for(a=Object.keys(t),n=new Array(a.length),r=0,o=a.length;r<o;r++)u=a[r],n[r]=e(t[u],u,r);return i(n)||(n=[]),n._isVList=!0,n}function be(t,e,n,r){var i,o=this.$scopedSlots[t];o?(n=n||{},r&&(n=N(N({},r),n)),i=o(n)||e):i=this.$slots[t]||e;var a=n&&n.slot;return a?this.$createElement("template",{slot:a},i):i}function we(t){return Vt(this.$options,"filters",t)||x}function Te(t,e){return Array.isArray(t)?-1===t.indexOf(e):t!==e}function Se(t,e,n,r,i){var o=q.keyCodes[e]||n;return i&&r&&!q.keyCodes[e]?Te(i,r):o?Te(o,t):r?_(r)!==e:void 0}function Ee(t,e,n,r,i){if(n)if(s(n)){var o;Array.isArray(n)&&(n=k(n));var a=function(a){if("class"===a||"style"===a||v(a))o=t;else{var s=t.attrs&&t.attrs.type;o=r||q.mustUseProp(e,s,a)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}var u=E(a),c=_(a);u in o||c in o||(o[a]=n[a],i&&((t.on||(t.on={}))["update:"+a]=function(t){n[a]=t}))};for(var u in n)a(u)}else;return t}function Ce(t,e){var n=this._staticTrees||(this._staticTrees=[]),r=n[t];return r&&!e?r:(_e(r=n[t]=this.$options.staticRenderFns[t].call(this._renderProxy,null,this),"__static__"+t,!1),r)}function Ie(t,e,n){return _e(t,"__once__"+e+(n?"_"+n:""),!0),t}function _e(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]&&"string"!=typeof t[r]&&Ae(t[r],e+"_"+r,n);else Ae(t,e,n)}function Ae(t,e,n){t.isStatic=!0,t.key=e,t.isOnce=n}function De(t,e){if(e)if(c(e)){var n=t.on=t.on?N({},t.on):{};for(var r in e){var i=n[r],o=e[r];n[r]=i?[].concat(i,o):o}}else;return t}function Ne(t,e,n,r){e=e||{$stable:!n};for(var i=0;i<t.length;i++){var o=t[i];Array.isArray(o)?Ne(o,e,n):o&&(o.proxy&&(o.fn.proxy=!0),e[o.key]=o.fn)}return r&&(e.$key=r),e}function ke(t,e){for(var n=0;n<e.length;n+=2){var r=e[n];"string"==typeof r&&r&&(t[e[n]]=e[n+1])}return t}function Oe(t,e){return"string"==typeof t?e+t:t}function Re(t){t._o=Ie,t._n=d,t._s=p,t._l=ge,t._t=be,t._q=M,t._i=L,t._m=Ce,t._f=we,t._k=Se,t._b=Ee,t._v=bt,t._e=gt,t._u=Ne,t._g=De,t._d=ke,t._p=Oe}function xe(t,e,r,i,a){var s,u=this,c=a.options;w(i,"_uid")?(s=Object.create(i))._original=i:(s=i,i=i._original);var l=o(c._compiled),h=!l;this.data=t,this.props=e,this.children=r,this.parent=i,this.listeners=t.on||n,this.injections=fe(c.inject,i),this.slots=function(){return u.$slots||me(t.scopedSlots,u.$slots=pe(r,i)),u.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return me(t.scopedSlots,this.slots())}}),l&&(this.$options=c,this.$slots=this.slots(),this.$scopedSlots=me(t.scopedSlots,this.$slots)),c._scopeId?this._c=function(t,e,n,r){var o=je(s,t,e,n,r,h);return o&&!Array.isArray(o)&&(o.fnScopeId=c._scopeId,o.fnContext=i),o}:this._c=function(t,e,n,r){return je(s,t,e,n,r,h)}}function Me(t,e,n,r,i){var o=wt(t);return o.fnContext=n,o.fnOptions=r,e.slot&&((o.data||(o.data={})).slot=e.slot),o}function Le(t,e){for(var n in e)t[E(n)]=e[n]}Re(xe.prototype);var Pe={init:function(t,e){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var n=t;Pe.prepatch(n,n)}else{(t.componentInstance=function(t,e){var n={_isComponent:!0,_parentVnode:t,parent:e},r=t.data.inlineTemplate;i(r)&&(n.render=r.render,n.staticRenderFns=r.staticRenderFns);return new t.componentOptions.Ctor(n)}(t,Xe)).$mount(e?t.elm:void 0,e)}},prepatch:function(t,e){var r=e.componentOptions;!function(t,e,r,i,o){0;var a=i.data.scopedSlots,s=t.$scopedSlots,u=!!(a&&!a.$stable||s!==n&&!s.$stable||a&&t.$scopedSlots.$key!==a.$key),c=!!(o||t.$options._renderChildren||u);t.$options._parentVnode=i,t.$vnode=i,t._vnode&&(t._vnode.parent=i);if(t.$options._renderChildren=o,t.$attrs=i.data.attrs||n,t.$listeners=r||n,e&&t.$options.props){It(!1);for(var l=t._props,h=t.$options._propKeys||[],f=0;f<h.length;f++){var p=h[f],d=t.$options.props;l[p]=Bt(p,d,e,t)}It(!0),t.$options.propsData=e}r=r||n;var m=t.$options._parentListeners;t.$options._parentListeners=r,Je(t,r,m),c&&(t.$slots=pe(o,i.context),t.$forceUpdate());0}(e.componentInstance=t.componentInstance,r.propsData,r.listeners,e,r.children)},insert:function(t){var e,n=t.context,r=t.componentInstance;r._isMounted||(r._isMounted=!0,nn(r,"mounted")),t.data.keepAlive&&(n._isMounted?((e=r)._inactive=!1,on.push(e)):en(r,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?function t(e,n){if(n&&(e._directInactive=!0,tn(e)))return;if(!e._inactive){e._inactive=!0;for(var r=0;r<e.$children.length;r++)t(e.$children[r]);nn(e,"deactivated")}}(e,!0):e.$destroy())}},Fe=Object.keys(Pe);function Ve(t,e,a,u,c){if(!r(t)){var l=a.$options._base;if(s(t)&&(t=l.extend(t)),"function"==typeof t){var h;if(r(t.cid)&&void 0===(t=function(t,e){if(o(t.error)&&i(t.errorComp))return t.errorComp;if(i(t.resolved))return t.resolved;var n=$e;n&&i(t.owners)&&-1===t.owners.indexOf(n)&&t.owners.push(n);if(o(t.loading)&&i(t.loadingComp))return t.loadingComp;if(n&&!i(t.owners)){var a=t.owners=[n],u=!0,c=null,l=null;n.$on("hook:destroyed",function(){return g(a,n)});var h=function(t){for(var e=0,n=a.length;e<n;e++)a[e].$forceUpdate();t&&(a.length=0,null!==c&&(clearTimeout(c),c=null),null!==l&&(clearTimeout(l),l=null))},p=P(function(n){t.resolved=We(n,e),u?a.length=0:h(!0)}),d=P(function(e){i(t.errorComp)&&(t.error=!0,h(!0))}),m=t(p,d);return s(m)&&(f(m)?r(t.resolved)&&m.then(p,d):f(m.component)&&(m.component.then(p,d),i(m.error)&&(t.errorComp=We(m.error,e)),i(m.loading)&&(t.loadingComp=We(m.loading,e),0===m.delay?t.loading=!0:c=setTimeout(function(){c=null,r(t.resolved)&&r(t.error)&&(t.loading=!0,h(!1))},m.delay||200)),i(m.timeout)&&(l=setTimeout(function(){l=null,r(t.resolved)&&d(null)},m.timeout)))),u=!1,t.loading?t.loadingComp:t.resolved}}(h=t,l)))return function(t,e,n,r,i){var o=gt();return o.asyncFactory=t,o.asyncMeta={data:e,context:n,children:r,tag:i},o}(h,e,a,u,c);e=e||{},In(t),i(e.model)&&function(t,e){var n=t.model&&t.model.prop||"value",r=t.model&&t.model.event||"input";(e.attrs||(e.attrs={}))[n]=e.model.value;var o=e.on||(e.on={}),a=o[r],s=e.model.callback;i(a)?(Array.isArray(a)?-1===a.indexOf(s):a!==s)&&(o[r]=[s].concat(a)):o[r]=s}(t.options,e);var p=function(t,e,n){var o=e.options.props;if(!r(o)){var a={},s=t.attrs,u=t.props;if(i(s)||i(u))for(var c in o){var l=_(c);ce(a,u,c,l,!0)||ce(a,s,c,l,!1)}return a}}(e,t);if(o(t.options.functional))return function(t,e,r,o,a){var s=t.options,u={},c=s.props;if(i(c))for(var l in c)u[l]=Bt(l,c,e||n);else i(r.attrs)&&Le(u,r.attrs),i(r.props)&&Le(u,r.props);var h=new xe(r,u,a,o,t),f=s.render.call(null,h._c,h);if(f instanceof yt)return Me(f,r,h.parent,s);if(Array.isArray(f)){for(var p=le(f)||[],d=new Array(p.length),m=0;m<p.length;m++)d[m]=Me(p[m],r,h.parent,s);return d}}(t,p,e,a,u);var d=e.on;if(e.on=e.nativeOn,o(t.options.abstract)){var m=e.slot;e={},m&&(e.slot=m)}!function(t){for(var e=t.hook||(t.hook={}),n=0;n<Fe.length;n++){var r=Fe[n],i=e[r],o=Pe[r];i===o||i&&i._merged||(e[r]=i?Be(o,i):o)}}(e);var y=t.options.name||c;return new yt("vue-component-"+t.cid+(y?"-"+y:""),e,void 0,void 0,void 0,a,{Ctor:t,propsData:p,listeners:d,tag:c,children:u},h)}}}function Be(t,e){var n=function(n,r){t(n,r),e(n,r)};return n._merged=!0,n}var qe=1,Ue=2;function je(t,e,n,u,c,l){return(Array.isArray(n)||a(n))&&(c=u,u=n,n=void 0),o(l)&&(c=Ue),function(t,e,n,a,u){if(i(n)&&i(n.__ob__))return gt();i(n)&&i(n.is)&&(e=n.is);if(!e)return gt();0;Array.isArray(a)&&"function"==typeof a[0]&&((n=n||{}).scopedSlots={default:a[0]},a.length=0);u===Ue?a=le(a):u===qe&&(a=function(t){for(var e=0;e<t.length;e++)if(Array.isArray(t[e]))return Array.prototype.concat.apply([],t);return t}(a));var c,l;if("string"==typeof e){var h;l=t.$vnode&&t.$vnode.ns||q.getTagNamespace(e),c=q.isReservedTag(e)?new yt(q.parsePlatformTagName(e),n,a,void 0,void 0,t):n&&n.pre||!i(h=Vt(t.$options,"components",e))?new yt(e,n,a,void 0,void 0,t):Ve(h,n,t,a,e)}else c=Ve(e,n,t,a);return Array.isArray(c)?c:i(c)?(i(l)&&function t(e,n,a){e.ns=n;"foreignObject"===e.tag&&(n=void 0,a=!0);if(i(e.children))for(var s=0,u=e.children.length;s<u;s++){var c=e.children[s];i(c.tag)&&(r(c.ns)||o(a)&&"svg"!==c.tag)&&t(c,n,a)}}(c,l),i(n)&&function(t){s(t.style)&&ie(t.style);s(t.class)&&ie(t.class)}(n),c):gt()}(t,e,n,u,c)}var Ke,$e=null;function We(t,e){return(t.__esModule||ct&&"Module"===t[Symbol.toStringTag])&&(t=t.default),s(t)?e.extend(t):t}function ze(t){return t.isComment&&t.asyncFactory}function Qe(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var n=t[e];if(i(n)&&(i(n.componentOptions)||ze(n)))return n}}function Ge(t,e){Ke.$on(t,e)}function He(t,e){Ke.$off(t,e)}function Ye(t,e){var n=Ke;return function r(){null!==e.apply(null,arguments)&&n.$off(t,r)}}function Je(t,e,n){Ke=t,se(e,n||{},Ge,He,Ye,t),Ke=void 0}var Xe=null;function Ze(t){var e=Xe;return Xe=t,function(){Xe=e}}function tn(t){for(;t&&(t=t.$parent);)if(t._inactive)return!0;return!1}function en(t,e){if(e){if(t._directInactive=!1,tn(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var n=0;n<t.$children.length;n++)en(t.$children[n]);nn(t,"activated")}}function nn(t,e){dt();var n=t.$options[e],r=e+" hook";if(n)for(var i=0,o=n.length;i<o;i++)$t(n[i],t,null,t,r);t._hasHookEvent&&t.$emit("hook:"+e),mt()}var rn=[],on=[],an={},sn=!1,un=!1,cn=0;var ln=0,hn=Date.now;if(Q&&!J){var fn=window.performance;fn&&"function"==typeof fn.now&&hn()>document.createEvent("Event").timeStamp&&(hn=function(){return fn.now()})}function pn(){var t,e;for(ln=hn(),un=!0,rn.sort(function(t,e){return t.id-e.id}),cn=0;cn<rn.length;cn++)(t=rn[cn]).before&&t.before(),e=t.id,an[e]=null,t.run();var n=on.slice(),r=rn.slice();cn=rn.length=on.length=0,an={},sn=un=!1,function(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,en(t[e],!0)}(n),function(t){var e=t.length;for(;e--;){var n=t[e],r=n.vm;r._watcher===n&&r._isMounted&&!r._isDestroyed&&nn(r,"updated")}}(r),at&&q.devtools&&at.emit("flush")}var dn=0,mn=function(t,e,n,r,i){this.vm=t,i&&(t._watcher=this),t._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++dn,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ut,this.newDepIds=new ut,this.expression="","function"==typeof e?this.getter=e:(this.getter=function(t){if(!$.test(t)){var e=t.split(".");return function(t){for(var n=0;n<e.length;n++){if(!t)return;t=t[e[n]]}return t}}}(e),this.getter||(this.getter=O)),this.value=this.lazy?void 0:this.get()};mn.prototype.get=function(){var t;dt(this);var e=this.vm;try{t=this.getter.call(e,e)}catch(t){if(!this.user)throw t;Kt(t,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&ie(t),mt(),this.cleanupDeps()}return t},mn.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},mn.prototype.cleanupDeps=function(){for(var t=this.deps.length;t--;){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},mn.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(t){var e=t.id;if(null==an[e]){if(an[e]=!0,un){for(var n=rn.length-1;n>cn&&rn[n].id>t.id;)n--;rn.splice(n+1,0,t)}else rn.push(t);sn||(sn=!0,ne(pn))}}(this)},mn.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||s(t)||this.deep){var e=this.value;if(this.value=t,this.user)try{this.cb.call(this.vm,t,e)}catch(t){Kt(t,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,t,e)}}},mn.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},mn.prototype.depend=function(){for(var t=this.deps.length;t--;)this.deps[t].depend()},mn.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||g(this.vm._watchers,this);for(var t=this.deps.length;t--;)this.deps[t].removeSub(this);this.active=!1}};var yn={enumerable:!0,configurable:!0,get:O,set:O};function vn(t,e,n){yn.get=function(){return this[e][n]},yn.set=function(t){this[e][n]=t},Object.defineProperty(t,n,yn)}function gn(t){t._watchers=[];var e=t.$options;e.props&&function(t,e){var n=t.$options.propsData||{},r=t._props={},i=t.$options._propKeys=[],o=!t.$parent;o||It(!1);var a=function(o){i.push(o);var a=Bt(o,e,n,t);Dt(r,o,a),o in t||vn(t,"_props",o)};for(var s in e)a(s);It(!0)}(t,e.props),e.methods&&function(t,e){t.$options.props;for(var n in e)t[n]="function"!=typeof e[n]?O:A(e[n],t)}(t,e.methods),e.data?function(t){var e=t.$options.data;c(e=t._data="function"==typeof e?function(t,e){dt();try{return t.call(e,e)}catch(t){return Kt(t,e,"data()"),{}}finally{mt()}}(e,t):e||{})||(e={});var n=Object.keys(e),r=t.$options.props,i=(t.$options.methods,n.length);for(;i--;){var o=n[i];0,r&&w(r,o)||j(o)||vn(t,"_data",o)}At(e,!0)}(t):At(t._data={},!0),e.computed&&function(t,e){var n=t._computedWatchers=Object.create(null),r=ot();for(var i in e){var o=e[i],a="function"==typeof o?o:o.get;0,r||(n[i]=new mn(t,a||O,O,bn)),i in t||wn(t,i,o)}}(t,e.computed),e.watch&&e.watch!==nt&&function(t,e){for(var n in e){var r=e[n];if(Array.isArray(r))for(var i=0;i<r.length;i++)En(t,n,r[i]);else En(t,n,r)}}(t,e.watch)}var bn={lazy:!0};function wn(t,e,n){var r=!ot();"function"==typeof n?(yn.get=r?Tn(e):Sn(n),yn.set=O):(yn.get=n.get?r&&!1!==n.cache?Tn(e):Sn(n.get):O,yn.set=n.set||O),Object.defineProperty(t,e,yn)}function Tn(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),ft.target&&e.depend(),e.value}}function Sn(t){return function(){return t.call(this,this)}}function En(t,e,n,r){return c(n)&&(r=n,n=n.handler),"string"==typeof n&&(n=t[n]),t.$watch(e,n,r)}var Cn=0;function In(t){var e=t.options;if(t.super){var n=In(t.super);if(n!==t.superOptions){t.superOptions=n;var r=function(t){var e,n=t.options,r=t.sealedOptions;for(var i in n)n[i]!==r[i]&&(e||(e={}),e[i]=n[i]);return e}(t);r&&N(t.extendOptions,r),(e=t.options=Ft(n,t.extendOptions)).name&&(e.components[e.name]=t)}}return e}function _n(t){this._init(t)}function An(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var n=this,r=n.cid,i=t._Ctor||(t._Ctor={});if(i[r])return i[r];var o=t.name||n.options.name;var a=function(t){this._init(t)};return(a.prototype=Object.create(n.prototype)).constructor=a,a.cid=e++,a.options=Ft(n.options,t),a.super=n,a.options.props&&function(t){var e=t.options.props;for(var n in e)vn(t.prototype,"_props",n)}(a),a.options.computed&&function(t){var e=t.options.computed;for(var n in e)wn(t.prototype,n,e[n])}(a),a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,V.forEach(function(t){a[t]=n[t]}),o&&(a.options.components[o]=a),a.superOptions=n.options,a.extendOptions=t,a.sealedOptions=N({},a.options),i[r]=a,a}}function Dn(t){return t&&(t.Ctor.options.name||t.tag)}function Nn(t,e){return Array.isArray(t)?t.indexOf(e)>-1:"string"==typeof t?t.split(",").indexOf(e)>-1:!!l(t)&&t.test(e)}function kn(t,e){var n=t.cache,r=t.keys,i=t._vnode;for(var o in n){var a=n[o];if(a){var s=Dn(a.componentOptions);s&&!e(s)&&On(n,o,r,i)}}}function On(t,e,n,r){var i=t[e];!i||r&&i.tag===r.tag||i.componentInstance.$destroy(),t[e]=null,g(n,e)}!function(t){t.prototype._init=function(t){var e=this;e._uid=Cn++,e._isVue=!0,t&&t._isComponent?function(t,e){var n=t.$options=Object.create(t.constructor.options),r=e._parentVnode;n.parent=e.parent,n._parentVnode=r;var i=r.componentOptions;n.propsData=i.propsData,n._parentListeners=i.listeners,n._renderChildren=i.children,n._componentTag=i.tag,e.render&&(n.render=e.render,n.staticRenderFns=e.staticRenderFns)}(e,t):e.$options=Ft(In(e.constructor),t||{},e),e._renderProxy=e,e._self=e,function(t){var e=t.$options,n=e.parent;if(n&&!e.abstract){for(;n.$options.abstract&&n.$parent;)n=n.$parent;n.$children.push(t)}t.$parent=n,t.$root=n?n.$root:t,t.$children=[],t.$refs={},t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}(e),function(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&Je(t,e)}(e),function(t){t._vnode=null,t._staticTrees=null;var e=t.$options,r=t.$vnode=e._parentVnode,i=r&&r.context;t.$slots=pe(e._renderChildren,i),t.$scopedSlots=n,t._c=function(e,n,r,i){return je(t,e,n,r,i,!1)},t.$createElement=function(e,n,r,i){return je(t,e,n,r,i,!0)};var o=r&&r.data;Dt(t,"$attrs",o&&o.attrs||n,null,!0),Dt(t,"$listeners",e._parentListeners||n,null,!0)}(e),nn(e,"beforeCreate"),function(t){var e=fe(t.$options.inject,t);e&&(It(!1),Object.keys(e).forEach(function(n){Dt(t,n,e[n])}),It(!0))}(e),gn(e),function(t){var e=t.$options.provide;e&&(t._provided="function"==typeof e?e.call(t):e)}(e),nn(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}(_n),function(t){var e={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",n),t.prototype.$set=Nt,t.prototype.$delete=kt,t.prototype.$watch=function(t,e,n){if(c(e))return En(this,t,e,n);(n=n||{}).user=!0;var r=new mn(this,t,e,n);if(n.immediate)try{e.call(this,r.value)}catch(t){Kt(t,this,'callback for immediate watcher "'+r.expression+'"')}return function(){r.teardown()}}}(_n),function(t){var e=/^hook:/;t.prototype.$on=function(t,n){var r=this;if(Array.isArray(t))for(var i=0,o=t.length;i<o;i++)r.$on(t[i],n);else(r._events[t]||(r._events[t]=[])).push(n),e.test(t)&&(r._hasHookEvent=!0);return r},t.prototype.$once=function(t,e){var n=this;function r(){n.$off(t,r),e.apply(n,arguments)}return r.fn=e,n.$on(t,r),n},t.prototype.$off=function(t,e){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(t)){for(var r=0,i=t.length;r<i;r++)n.$off(t[r],e);return n}var o,a=n._events[t];if(!a)return n;if(!e)return n._events[t]=null,n;for(var s=a.length;s--;)if((o=a[s])===e||o.fn===e){a.splice(s,1);break}return n},t.prototype.$emit=function(t){var e=this,n=e._events[t];if(n){n=n.length>1?D(n):n;for(var r=D(arguments,1),i='event handler for "'+t+'"',o=0,a=n.length;o<a;o++)$t(n[o],e,r,e,i)}return e}}(_n),function(t){t.prototype._update=function(t,e){var n=this,r=n.$el,i=n._vnode,o=Ze(n);n._vnode=t,n.$el=i?n.__patch__(i,t):n.__patch__(n.$el,t,e,!1),o(),r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},t.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){nn(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||g(e.$children,t),t._watcher&&t._watcher.teardown();for(var n=t._watchers.length;n--;)t._watchers[n].teardown();t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),nn(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}(_n),function(t){Re(t.prototype),t.prototype.$nextTick=function(t){return ne(t,this)},t.prototype._render=function(){var t,e=this,n=e.$options,r=n.render,i=n._parentVnode;i&&(e.$scopedSlots=me(i.data.scopedSlots,e.$slots,e.$scopedSlots)),e.$vnode=i;try{$e=e,t=r.call(e._renderProxy,e.$createElement)}catch(n){Kt(n,e,"render"),t=e._vnode}finally{$e=null}return Array.isArray(t)&&1===t.length&&(t=t[0]),t instanceof yt||(t=gt()),t.parent=i,t}}(_n);var Rn=[String,RegExp,Array],xn={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:Rn,exclude:Rn,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)On(this.cache,t,this.keys)},mounted:function(){var t=this;this.$watch("include",function(e){kn(t,function(t){return Nn(e,t)})}),this.$watch("exclude",function(e){kn(t,function(t){return!Nn(e,t)})})},render:function(){var t=this.$slots.default,e=Qe(t),n=e&&e.componentOptions;if(n){var r=Dn(n),i=this.include,o=this.exclude;if(i&&(!r||!Nn(i,r))||o&&r&&Nn(o,r))return e;var a=this.cache,s=this.keys,u=null==e.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):e.key;a[u]?(e.componentInstance=a[u].componentInstance,g(s,u),s.push(u)):(a[u]=e,s.push(u),this.max&&s.length>parseInt(this.max)&&On(a,s[0],s,this._vnode)),e.data.keepAlive=!0}return e||t&&t[0]}}};!function(t){var e={get:function(){return q}};Object.defineProperty(t,"config",e),t.util={warn:lt,extend:N,mergeOptions:Ft,defineReactive:Dt},t.set=Nt,t.delete=kt,t.nextTick=ne,t.observable=function(t){return At(t),t},t.options=Object.create(null),V.forEach(function(e){t.options[e+"s"]=Object.create(null)}),t.options._base=t,N(t.options.components,xn),function(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var n=D(arguments,1);return n.unshift(this),"function"==typeof t.install?t.install.apply(t,n):"function"==typeof t&&t.apply(null,n),e.push(t),this}}(t),function(t){t.mixin=function(t){return this.options=Ft(this.options,t),this}}(t),An(t),function(t){V.forEach(function(e){t[e]=function(t,n){return n?("component"===e&&c(n)&&(n.name=n.name||t,n=this.options._base.extend(n)),"directive"===e&&"function"==typeof n&&(n={bind:n,update:n}),this.options[e+"s"][t]=n,n):this.options[e+"s"][t]}})}(t)}(_n),Object.defineProperty(_n.prototype,"$isServer",{get:ot}),Object.defineProperty(_n.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(_n,"FunctionalRenderContext",{value:xe}),_n.version="2.6.11";var Mn=m("style,class"),Ln=m("input,textarea,option,select,progress"),Pn=function(t,e,n){return"value"===n&&Ln(t)&&"button"!==e||"selected"===n&&"option"===t||"checked"===n&&"input"===t||"muted"===n&&"video"===t},Fn=m("contenteditable,draggable,spellcheck"),Vn=m("events,caret,typing,plaintext-only"),Bn=function(t,e){return $n(e)||"false"===e?"false":"contenteditable"===t&&Vn(e)?e:"true"},qn=m("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Un="http://www.w3.org/1999/xlink",jn=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},Kn=function(t){return jn(t)?t.slice(6,t.length):""},$n=function(t){return null==t||!1===t};function Wn(t){for(var e=t.data,n=t,r=t;i(r.componentInstance);)(r=r.componentInstance._vnode)&&r.data&&(e=zn(r.data,e));for(;i(n=n.parent);)n&&n.data&&(e=zn(e,n.data));return function(t,e){if(i(t)||i(e))return Qn(t,Gn(e));return""}(e.staticClass,e.class)}function zn(t,e){return{staticClass:Qn(t.staticClass,e.staticClass),class:i(t.class)?[t.class,e.class]:e.class}}function Qn(t,e){return t?e?t+" "+e:t:e||""}function Gn(t){return Array.isArray(t)?function(t){for(var e,n="",r=0,o=t.length;r<o;r++)i(e=Gn(t[r]))&&""!==e&&(n&&(n+=" "),n+=e);return n}(t):s(t)?function(t){var e="";for(var n in t)t[n]&&(e&&(e+=" "),e+=n);return e}(t):"string"==typeof t?t:""}var Hn={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Yn=m("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Jn=m("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Xn=function(t){return Yn(t)||Jn(t)};function Zn(t){return Jn(t)?"svg":"math"===t?"math":void 0}var tr=Object.create(null);var er=m("text,number,password,search,email,tel,url");function nr(t){if("string"==typeof t){var e=document.querySelector(t);return e||document.createElement("div")}return t}var rr=Object.freeze({createElement:function(t,e){var n=document.createElement(t);return"select"!==t?n:(e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n)},createElementNS:function(t,e){return document.createElementNS(Hn[t],e)},createTextNode:function(t){return document.createTextNode(t)},createComment:function(t){return document.createComment(t)},insertBefore:function(t,e,n){t.insertBefore(e,n)},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){t.appendChild(e)},parentNode:function(t){return t.parentNode},nextSibling:function(t){return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e},setStyleScope:function(t,e){t.setAttribute(e,"")}}),ir={create:function(t,e){or(e)},update:function(t,e){t.data.ref!==e.data.ref&&(or(t,!0),or(e))},destroy:function(t){or(t,!0)}};function or(t,e){var n=t.data.ref;if(i(n)){var r=t.context,o=t.componentInstance||t.elm,a=r.$refs;e?Array.isArray(a[n])?g(a[n],o):a[n]===o&&(a[n]=void 0):t.data.refInFor?Array.isArray(a[n])?a[n].indexOf(o)<0&&a[n].push(o):a[n]=[o]:a[n]=o}}var ar=new yt("",{},[]),sr=["create","activate","update","remove","destroy"];function ur(t,e){return t.key===e.key&&(t.tag===e.tag&&t.isComment===e.isComment&&i(t.data)===i(e.data)&&function(t,e){if("input"!==t.tag)return!0;var n,r=i(n=t.data)&&i(n=n.attrs)&&n.type,o=i(n=e.data)&&i(n=n.attrs)&&n.type;return r===o||er(r)&&er(o)}(t,e)||o(t.isAsyncPlaceholder)&&t.asyncFactory===e.asyncFactory&&r(e.asyncFactory.error))}function cr(t,e,n){var r,o,a={};for(r=e;r<=n;++r)i(o=t[r].key)&&(a[o]=r);return a}var lr={create:hr,update:hr,destroy:function(t){hr(t,ar)}};function hr(t,e){(t.data.directives||e.data.directives)&&function(t,e){var n,r,i,o=t===ar,a=e===ar,s=pr(t.data.directives,t.context),u=pr(e.data.directives,e.context),c=[],l=[];for(n in u)r=s[n],i=u[n],r?(i.oldValue=r.value,i.oldArg=r.arg,mr(i,"update",e,t),i.def&&i.def.componentUpdated&&l.push(i)):(mr(i,"bind",e,t),i.def&&i.def.inserted&&c.push(i));if(c.length){var h=function(){for(var n=0;n<c.length;n++)mr(c[n],"inserted",e,t)};o?ue(e,"insert",h):h()}l.length&&ue(e,"postpatch",function(){for(var n=0;n<l.length;n++)mr(l[n],"componentUpdated",e,t)});if(!o)for(n in s)u[n]||mr(s[n],"unbind",t,t,a)}(t,e)}var fr=Object.create(null);function pr(t,e){var n,r,i=Object.create(null);if(!t)return i;for(n=0;n<t.length;n++)(r=t[n]).modifiers||(r.modifiers=fr),i[dr(r)]=r,r.def=Vt(e.$options,"directives",r.name);return i}function dr(t){return t.rawName||t.name+"."+Object.keys(t.modifiers||{}).join(".")}function mr(t,e,n,r,i){var o=t.def&&t.def[e];if(o)try{o(n.elm,t,n,r,i)}catch(r){Kt(r,n.context,"directive "+t.name+" "+e+" hook")}}var yr=[ir,lr];function vr(t,e){var n=e.componentOptions;if(!(i(n)&&!1===n.Ctor.options.inheritAttrs||r(t.data.attrs)&&r(e.data.attrs))){var o,a,s=e.elm,u=t.data.attrs||{},c=e.data.attrs||{};for(o in i(c.__ob__)&&(c=e.data.attrs=N({},c)),c)a=c[o],u[o]!==a&&gr(s,o,a);for(o in(J||Z)&&c.value!==u.value&&gr(s,"value",c.value),u)r(c[o])&&(jn(o)?s.removeAttributeNS(Un,Kn(o)):Fn(o)||s.removeAttribute(o))}}function gr(t,e,n){t.tagName.indexOf("-")>-1?br(t,e,n):qn(e)?$n(n)?t.removeAttribute(e):(n="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,n)):Fn(e)?t.setAttribute(e,Bn(e,n)):jn(e)?$n(n)?t.removeAttributeNS(Un,Kn(e)):t.setAttributeNS(Un,e,n):br(t,e,n)}function br(t,e,n){if($n(n))t.removeAttribute(e);else{if(J&&!X&&"TEXTAREA"===t.tagName&&"placeholder"===e&&""!==n&&!t.__ieph){var r=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",r)};t.addEventListener("input",r),t.__ieph=!0}t.setAttribute(e,n)}}var wr={create:vr,update:vr};function Tr(t,e){var n=e.elm,o=e.data,a=t.data;if(!(r(o.staticClass)&&r(o.class)&&(r(a)||r(a.staticClass)&&r(a.class)))){var s=Wn(e),u=n._transitionClasses;i(u)&&(s=Qn(s,Gn(u))),s!==n._prevClass&&(n.setAttribute("class",s),n._prevClass=s)}}var Sr,Er,Cr,Ir,_r,Ar,Dr={create:Tr,update:Tr},Nr=/[\w).+\-_$\]]/;function kr(t){var e,n,r,i,o,a=!1,s=!1,u=!1,c=!1,l=0,h=0,f=0,p=0;for(r=0;r<t.length;r++)if(n=e,e=t.charCodeAt(r),a)39===e&&92!==n&&(a=!1);else if(s)34===e&&92!==n&&(s=!1);else if(u)96===e&&92!==n&&(u=!1);else if(c)47===e&&92!==n&&(c=!1);else if(124!==e||124===t.charCodeAt(r+1)||124===t.charCodeAt(r-1)||l||h||f){switch(e){case 34:s=!0;break;case 39:a=!0;break;case 96:u=!0;break;case 40:f++;break;case 41:f--;break;case 91:h++;break;case 93:h--;break;case 123:l++;break;case 125:l--}if(47===e){for(var d=r-1,m=void 0;d>=0&&" "===(m=t.charAt(d));d--);m&&Nr.test(m)||(c=!0)}}else void 0===i?(p=r+1,i=t.slice(0,r).trim()):y();function y(){(o||(o=[])).push(t.slice(p,r).trim()),p=r+1}if(void 0===i?i=t.slice(0,r).trim():0!==p&&y(),o)for(r=0;r<o.length;r++)i=Or(i,o[r]);return i}function Or(t,e){var n=e.indexOf("(");if(n<0)return'_f("'+e+'")('+t+")";var r=e.slice(0,n),i=e.slice(n+1);return'_f("'+r+'")('+t+(")"!==i?","+i:i)}function Rr(t,e){console.error("[Vue compiler]: "+t)}function xr(t,e){return t?t.map(function(t){return t[e]}).filter(function(t){return t}):[]}function Mr(t,e,n,r,i){(t.props||(t.props=[])).push($r({name:e,value:n,dynamic:i},r)),t.plain=!1}function Lr(t,e,n,r,i){(i?t.dynamicAttrs||(t.dynamicAttrs=[]):t.attrs||(t.attrs=[])).push($r({name:e,value:n,dynamic:i},r)),t.plain=!1}function Pr(t,e,n,r){t.attrsMap[e]=n,t.attrsList.push($r({name:e,value:n},r))}function Fr(t,e,n,r,i,o,a,s){(t.directives||(t.directives=[])).push($r({name:e,rawName:n,value:r,arg:i,isDynamicArg:o,modifiers:a},s)),t.plain=!1}function Vr(t,e,n){return n?"_p("+e+',"'+t+'")':t+e}function Br(t,e,r,i,o,a,s,u){var c;(i=i||n).right?u?e="("+e+")==='click'?'contextmenu':("+e+")":"click"===e&&(e="contextmenu",delete i.right):i.middle&&(u?e="("+e+")==='click'?'mouseup':("+e+")":"click"===e&&(e="mouseup")),i.capture&&(delete i.capture,e=Vr("!",e,u)),i.once&&(delete i.once,e=Vr("~",e,u)),i.passive&&(delete i.passive,e=Vr("&",e,u)),i.native?(delete i.native,c=t.nativeEvents||(t.nativeEvents={})):c=t.events||(t.events={});var l=$r({value:r.trim(),dynamic:u},s);i!==n&&(l.modifiers=i);var h=c[e];Array.isArray(h)?o?h.unshift(l):h.push(l):c[e]=h?o?[l,h]:[h,l]:l,t.plain=!1}function qr(t,e){return t.rawAttrsMap[":"+e]||t.rawAttrsMap["v-bind:"+e]||t.rawAttrsMap[e]}function Ur(t,e,n){var r=jr(t,":"+e)||jr(t,"v-bind:"+e);if(null!=r)return kr(r);if(!1!==n){var i=jr(t,e);if(null!=i)return JSON.stringify(i)}}function jr(t,e,n){var r;if(null!=(r=t.attrsMap[e]))for(var i=t.attrsList,o=0,a=i.length;o<a;o++)if(i[o].name===e){i.splice(o,1);break}return n&&delete t.attrsMap[e],r}function Kr(t,e){for(var n=t.attrsList,r=0,i=n.length;r<i;r++){var o=n[r];if(e.test(o.name))return n.splice(r,1),o}}function $r(t,e){return e&&(null!=e.start&&(t.start=e.start),null!=e.end&&(t.end=e.end)),t}function Wr(t,e,n){var r=n||{},i=r.number,o="$$v";r.trim&&(o="(typeof $$v === 'string'? $$v.trim(): $$v)"),i&&(o="_n("+o+")");var a=zr(e,o);t.model={value:"("+e+")",expression:JSON.stringify(e),callback:"function ($$v) {"+a+"}"}}function zr(t,e){var n=function(t){if(t=t.trim(),Sr=t.length,t.indexOf("[")<0||t.lastIndexOf("]")<Sr-1)return(Ir=t.lastIndexOf("."))>-1?{exp:t.slice(0,Ir),key:'"'+t.slice(Ir+1)+'"'}:{exp:t,key:null};Er=t,Ir=_r=Ar=0;for(;!Gr();)Hr(Cr=Qr())?Jr(Cr):91===Cr&&Yr(Cr);return{exp:t.slice(0,_r),key:t.slice(_r+1,Ar)}}(t);return null===n.key?t+"="+e:"$set("+n.exp+", "+n.key+", "+e+")"}function Qr(){return Er.charCodeAt(++Ir)}function Gr(){return Ir>=Sr}function Hr(t){return 34===t||39===t}function Yr(t){var e=1;for(_r=Ir;!Gr();)if(Hr(t=Qr()))Jr(t);else if(91===t&&e++,93===t&&e--,0===e){Ar=Ir;break}}function Jr(t){for(var e=t;!Gr()&&(t=Qr())!==e;);}var Xr,Zr="__r",ti="__c";function ei(t,e,n){var r=Xr;return function i(){null!==e.apply(null,arguments)&&ii(t,i,n,r)}}var ni=Gt&&!(et&&Number(et[1])<=53);function ri(t,e,n,r){if(ni){var i=ln,o=e;e=o._wrapper=function(t){if(t.target===t.currentTarget||t.timeStamp>=i||t.timeStamp<=0||t.target.ownerDocument!==document)return o.apply(this,arguments)}}Xr.addEventListener(t,e,rt?{capture:n,passive:r}:n)}function ii(t,e,n,r){(r||Xr).removeEventListener(t,e._wrapper||e,n)}function oi(t,e){if(!r(t.data.on)||!r(e.data.on)){var n=e.data.on||{},o=t.data.on||{};Xr=e.elm,function(t){if(i(t[Zr])){var e=J?"change":"input";t[e]=[].concat(t[Zr],t[e]||[]),delete t[Zr]}i(t[ti])&&(t.change=[].concat(t[ti],t.change||[]),delete t[ti])}(n),se(n,o,ri,ii,ei,e.context),Xr=void 0}}var ai,si={create:oi,update:oi};function ui(t,e){if(!r(t.data.domProps)||!r(e.data.domProps)){var n,o,a=e.elm,s=t.data.domProps||{},u=e.data.domProps||{};for(n in i(u.__ob__)&&(u=e.data.domProps=N({},u)),s)n in u||(a[n]="");for(n in u){if(o=u[n],"textContent"===n||"innerHTML"===n){if(e.children&&(e.children.length=0),o===s[n])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===n&&"PROGRESS"!==a.tagName){a._value=o;var c=r(o)?"":String(o);ci(a,c)&&(a.value=c)}else if("innerHTML"===n&&Jn(a.tagName)&&r(a.innerHTML)){(ai=ai||document.createElement("div")).innerHTML="<svg>"+o+"</svg>";for(var l=ai.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;l.firstChild;)a.appendChild(l.firstChild)}else if(o!==s[n])try{a[n]=o}catch(t){}}}}function ci(t,e){return!t.composing&&("OPTION"===t.tagName||function(t,e){var n=!0;try{n=document.activeElement!==t}catch(t){}return n&&t.value!==e}(t,e)||function(t,e){var n=t.value,r=t._vModifiers;if(i(r)){if(r.number)return d(n)!==d(e);if(r.trim)return n.trim()!==e.trim()}return n!==e}(t,e))}var li={create:ui,update:ui},hi=T(function(t){var e={},n=/:(.+)/;return t.split(/;(?![^(]*\))/g).forEach(function(t){if(t){var r=t.split(n);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e});function fi(t){var e=pi(t.style);return t.staticStyle?N(t.staticStyle,e):e}function pi(t){return Array.isArray(t)?k(t):"string"==typeof t?hi(t):t}var di,mi=/^--/,yi=/\s*!important$/,vi=function(t,e,n){if(mi.test(e))t.style.setProperty(e,n);else if(yi.test(n))t.style.setProperty(_(e),n.replace(yi,""),"important");else{var r=bi(e);if(Array.isArray(n))for(var i=0,o=n.length;i<o;i++)t.style[r]=n[i];else t.style[r]=n}},gi=["Webkit","Moz","ms"],bi=T(function(t){if(di=di||document.createElement("div").style,"filter"!==(t=E(t))&&t in di)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<gi.length;n++){var r=gi[n]+e;if(r in di)return r}});function wi(t,e){var n=e.data,o=t.data;if(!(r(n.staticStyle)&&r(n.style)&&r(o.staticStyle)&&r(o.style))){var a,s,u=e.elm,c=o.staticStyle,l=o.normalizedStyle||o.style||{},h=c||l,f=pi(e.data.style)||{};e.data.normalizedStyle=i(f.__ob__)?N({},f):f;var p=function(t,e){var n,r={};if(e)for(var i=t;i.componentInstance;)(i=i.componentInstance._vnode)&&i.data&&(n=fi(i.data))&&N(r,n);(n=fi(t.data))&&N(r,n);for(var o=t;o=o.parent;)o.data&&(n=fi(o.data))&&N(r,n);return r}(e,!0);for(s in h)r(p[s])&&vi(u,s,"");for(s in p)(a=p[s])!==h[s]&&vi(u,s,null==a?"":a)}}var Ti={create:wi,update:wi},Si=/\s+/;function Ei(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(Si).forEach(function(e){return t.classList.add(e)}):t.classList.add(e);else{var n=" "+(t.getAttribute("class")||"")+" ";n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function Ci(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(Si).forEach(function(e){return t.classList.remove(e)}):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var n=" "+(t.getAttribute("class")||"")+" ",r=" "+e+" ";n.indexOf(r)>=0;)n=n.replace(r," ");(n=n.trim())?t.setAttribute("class",n):t.removeAttribute("class")}}function Ii(t){if(t){if("object"==typeof t){var e={};return!1!==t.css&&N(e,_i(t.name||"v")),N(e,t),e}return"string"==typeof t?_i(t):void 0}}var _i=T(function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}}),Ai=Q&&!X,Di="transition",Ni="animation",ki="transition",Oi="transitionend",Ri="animation",xi="animationend";Ai&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(ki="WebkitTransition",Oi="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Ri="WebkitAnimation",xi="webkitAnimationEnd"));var Mi=Q?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function Li(t){Mi(function(){Mi(t)})}function Pi(t,e){var n=t._transitionClasses||(t._transitionClasses=[]);n.indexOf(e)<0&&(n.push(e),Ei(t,e))}function Fi(t,e){t._transitionClasses&&g(t._transitionClasses,e),Ci(t,e)}function Vi(t,e,n){var r=qi(t,e),i=r.type,o=r.timeout,a=r.propCount;if(!i)return n();var s=i===Di?Oi:xi,u=0,c=function(){t.removeEventListener(s,l),n()},l=function(e){e.target===t&&++u>=a&&c()};setTimeout(function(){u<a&&c()},o+1),t.addEventListener(s,l)}var Bi=/\b(transform|all)(,|$)/;function qi(t,e){var n,r=window.getComputedStyle(t),i=(r[ki+"Delay"]||"").split(", "),o=(r[ki+"Duration"]||"").split(", "),a=Ui(i,o),s=(r[Ri+"Delay"]||"").split(", "),u=(r[Ri+"Duration"]||"").split(", "),c=Ui(s,u),l=0,h=0;return e===Di?a>0&&(n=Di,l=a,h=o.length):e===Ni?c>0&&(n=Ni,l=c,h=u.length):h=(n=(l=Math.max(a,c))>0?a>c?Di:Ni:null)?n===Di?o.length:u.length:0,{type:n,timeout:l,propCount:h,hasTransform:n===Di&&Bi.test(r[ki+"Property"])}}function Ui(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map(function(e,n){return ji(e)+ji(t[n])}))}function ji(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function Ki(t,e){var n=t.elm;i(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var o=Ii(t.data.transition);if(!r(o)&&!i(n._enterCb)&&1===n.nodeType){for(var a=o.css,u=o.type,c=o.enterClass,l=o.enterToClass,h=o.enterActiveClass,f=o.appearClass,p=o.appearToClass,m=o.appearActiveClass,y=o.beforeEnter,v=o.enter,g=o.afterEnter,b=o.enterCancelled,w=o.beforeAppear,T=o.appear,S=o.afterAppear,E=o.appearCancelled,C=o.duration,I=Xe,_=Xe.$vnode;_&&_.parent;)I=_.context,_=_.parent;var A=!I._isMounted||!t.isRootInsert;if(!A||T||""===T){var D=A&&f?f:c,N=A&&m?m:h,k=A&&p?p:l,O=A&&w||y,R=A&&"function"==typeof T?T:v,x=A&&S||g,M=A&&E||b,L=d(s(C)?C.enter:C);0;var F=!1!==a&&!X,V=zi(R),B=n._enterCb=P(function(){F&&(Fi(n,k),Fi(n,N)),B.cancelled?(F&&Fi(n,D),M&&M(n)):x&&x(n),n._enterCb=null});t.data.show||ue(t,"insert",function(){var e=n.parentNode,r=e&&e._pending&&e._pending[t.key];r&&r.tag===t.tag&&r.elm._leaveCb&&r.elm._leaveCb(),R&&R(n,B)}),O&&O(n),F&&(Pi(n,D),Pi(n,N),Li(function(){Fi(n,D),B.cancelled||(Pi(n,k),V||(Wi(L)?setTimeout(B,L):Vi(n,u,B)))})),t.data.show&&(e&&e(),R&&R(n,B)),F||V||B()}}}function $i(t,e){var n=t.elm;i(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var o=Ii(t.data.transition);if(r(o)||1!==n.nodeType)return e();if(!i(n._leaveCb)){var a=o.css,u=o.type,c=o.leaveClass,l=o.leaveToClass,h=o.leaveActiveClass,f=o.beforeLeave,p=o.leave,m=o.afterLeave,y=o.leaveCancelled,v=o.delayLeave,g=o.duration,b=!1!==a&&!X,w=zi(p),T=d(s(g)?g.leave:g);0;var S=n._leaveCb=P(function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[t.key]=null),b&&(Fi(n,l),Fi(n,h)),S.cancelled?(b&&Fi(n,c),y&&y(n)):(e(),m&&m(n)),n._leaveCb=null});v?v(E):E()}function E(){S.cancelled||(!t.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[t.key]=t),f&&f(n),b&&(Pi(n,c),Pi(n,h),Li(function(){Fi(n,c),S.cancelled||(Pi(n,l),w||(Wi(T)?setTimeout(S,T):Vi(n,u,S)))})),p&&p(n,S),b||w||S())}}function Wi(t){return"number"==typeof t&&!isNaN(t)}function zi(t){if(r(t))return!1;var e=t.fns;return i(e)?zi(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function Qi(t,e){!0!==e.data.show&&Ki(e)}var Gi=function(t){var e,n,s={},u=t.modules,c=t.nodeOps;for(e=0;e<sr.length;++e)for(s[sr[e]]=[],n=0;n<u.length;++n)i(u[n][sr[e]])&&s[sr[e]].push(u[n][sr[e]]);function l(t){var e=c.parentNode(t);i(e)&&c.removeChild(e,t)}function h(t,e,n,r,a,u,l){if(i(t.elm)&&i(u)&&(t=u[l]=wt(t)),t.isRootInsert=!a,!function(t,e,n,r){var a=t.data;if(i(a)){var u=i(t.componentInstance)&&a.keepAlive;if(i(a=a.hook)&&i(a=a.init)&&a(t,!1),i(t.componentInstance))return f(t,e),p(n,t.elm,r),o(u)&&function(t,e,n,r){for(var o,a=t;a.componentInstance;)if(a=a.componentInstance._vnode,i(o=a.data)&&i(o=o.transition)){for(o=0;o<s.activate.length;++o)s.activate[o](ar,a);e.push(a);break}p(n,t.elm,r)}(t,e,n,r),!0}}(t,e,n,r)){var h=t.data,m=t.children,y=t.tag;i(y)?(t.elm=t.ns?c.createElementNS(t.ns,y):c.createElement(y,t),g(t),d(t,m,e),i(h)&&v(t,e),p(n,t.elm,r)):o(t.isComment)?(t.elm=c.createComment(t.text),p(n,t.elm,r)):(t.elm=c.createTextNode(t.text),p(n,t.elm,r))}}function f(t,e){i(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,y(t)?(v(t,e),g(t)):(or(t),e.push(t))}function p(t,e,n){i(t)&&(i(n)?c.parentNode(n)===t&&c.insertBefore(t,e,n):c.appendChild(t,e))}function d(t,e,n){if(Array.isArray(e))for(var r=0;r<e.length;++r)h(e[r],n,t.elm,null,!0,e,r);else a(t.text)&&c.appendChild(t.elm,c.createTextNode(String(t.text)))}function y(t){for(;t.componentInstance;)t=t.componentInstance._vnode;return i(t.tag)}function v(t,n){for(var r=0;r<s.create.length;++r)s.create[r](ar,t);i(e=t.data.hook)&&(i(e.create)&&e.create(ar,t),i(e.insert)&&n.push(t))}function g(t){var e;if(i(e=t.fnScopeId))c.setStyleScope(t.elm,e);else for(var n=t;n;)i(e=n.context)&&i(e=e.$options._scopeId)&&c.setStyleScope(t.elm,e),n=n.parent;i(e=Xe)&&e!==t.context&&e!==t.fnContext&&i(e=e.$options._scopeId)&&c.setStyleScope(t.elm,e)}function b(t,e,n,r,i,o){for(;r<=i;++r)h(n[r],o,t,e,!1,n,r)}function w(t){var e,n,r=t.data;if(i(r))for(i(e=r.hook)&&i(e=e.destroy)&&e(t),e=0;e<s.destroy.length;++e)s.destroy[e](t);if(i(e=t.children))for(n=0;n<t.children.length;++n)w(t.children[n])}function T(t,e,n){for(;e<=n;++e){var r=t[e];i(r)&&(i(r.tag)?(S(r),w(r)):l(r.elm))}}function S(t,e){if(i(e)||i(t.data)){var n,r=s.remove.length+1;for(i(e)?e.listeners+=r:e=function(t,e){function n(){0==--n.listeners&&l(t)}return n.listeners=e,n}(t.elm,r),i(n=t.componentInstance)&&i(n=n._vnode)&&i(n.data)&&S(n,e),n=0;n<s.remove.length;++n)s.remove[n](t,e);i(n=t.data.hook)&&i(n=n.remove)?n(t,e):e()}else l(t.elm)}function E(t,e,n,r){for(var o=n;o<r;o++){var a=e[o];if(i(a)&&ur(t,a))return o}}function C(t,e,n,a,u,l){if(t!==e){i(e.elm)&&i(a)&&(e=a[u]=wt(e));var f=e.elm=t.elm;if(o(t.isAsyncPlaceholder))i(e.asyncFactory.resolved)?A(t.elm,e,n):e.isAsyncPlaceholder=!0;else if(o(e.isStatic)&&o(t.isStatic)&&e.key===t.key&&(o(e.isCloned)||o(e.isOnce)))e.componentInstance=t.componentInstance;else{var p,d=e.data;i(d)&&i(p=d.hook)&&i(p=p.prepatch)&&p(t,e);var m=t.children,v=e.children;if(i(d)&&y(e)){for(p=0;p<s.update.length;++p)s.update[p](t,e);i(p=d.hook)&&i(p=p.update)&&p(t,e)}r(e.text)?i(m)&&i(v)?m!==v&&function(t,e,n,o,a){for(var s,u,l,f=0,p=0,d=e.length-1,m=e[0],y=e[d],v=n.length-1,g=n[0],w=n[v],S=!a;f<=d&&p<=v;)r(m)?m=e[++f]:r(y)?y=e[--d]:ur(m,g)?(C(m,g,o,n,p),m=e[++f],g=n[++p]):ur(y,w)?(C(y,w,o,n,v),y=e[--d],w=n[--v]):ur(m,w)?(C(m,w,o,n,v),S&&c.insertBefore(t,m.elm,c.nextSibling(y.elm)),m=e[++f],w=n[--v]):ur(y,g)?(C(y,g,o,n,p),S&&c.insertBefore(t,y.elm,m.elm),y=e[--d],g=n[++p]):(r(s)&&(s=cr(e,f,d)),r(u=i(g.key)?s[g.key]:E(g,e,f,d))?h(g,o,t,m.elm,!1,n,p):ur(l=e[u],g)?(C(l,g,o,n,p),e[u]=void 0,S&&c.insertBefore(t,l.elm,m.elm)):h(g,o,t,m.elm,!1,n,p),g=n[++p]);f>d?b(t,r(n[v+1])?null:n[v+1].elm,n,p,v,o):p>v&&T(e,f,d)}(f,m,v,n,l):i(v)?(i(t.text)&&c.setTextContent(f,""),b(f,null,v,0,v.length-1,n)):i(m)?T(m,0,m.length-1):i(t.text)&&c.setTextContent(f,""):t.text!==e.text&&c.setTextContent(f,e.text),i(d)&&i(p=d.hook)&&i(p=p.postpatch)&&p(t,e)}}}function I(t,e,n){if(o(n)&&i(t.parent))t.parent.data.pendingInsert=e;else for(var r=0;r<e.length;++r)e[r].data.hook.insert(e[r])}var _=m("attrs,class,staticClass,staticStyle,key");function A(t,e,n,r){var a,s=e.tag,u=e.data,c=e.children;if(r=r||u&&u.pre,e.elm=t,o(e.isComment)&&i(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(i(u)&&(i(a=u.hook)&&i(a=a.init)&&a(e,!0),i(a=e.componentInstance)))return f(e,n),!0;if(i(s)){if(i(c))if(t.hasChildNodes())if(i(a=u)&&i(a=a.domProps)&&i(a=a.innerHTML)){if(a!==t.innerHTML)return!1}else{for(var l=!0,h=t.firstChild,p=0;p<c.length;p++){if(!h||!A(h,c[p],n,r)){l=!1;break}h=h.nextSibling}if(!l||h)return!1}else d(e,c,n);if(i(u)){var m=!1;for(var y in u)if(!_(y)){m=!0,v(e,n);break}!m&&u.class&&ie(u.class)}}else t.data!==e.text&&(t.data=e.text);return!0}return function(t,e,n,a){if(!r(e)){var u,l=!1,f=[];if(r(t))l=!0,h(e,f);else{var p=i(t.nodeType);if(!p&&ur(t,e))C(t,e,f,null,null,a);else{if(p){if(1===t.nodeType&&t.hasAttribute(F)&&(t.removeAttribute(F),n=!0),o(n)&&A(t,e,f))return I(e,f,!0),t;u=t,t=new yt(c.tagName(u).toLowerCase(),{},[],void 0,u)}var d=t.elm,m=c.parentNode(d);if(h(e,f,d._leaveCb?null:m,c.nextSibling(d)),i(e.parent))for(var v=e.parent,g=y(e);v;){for(var b=0;b<s.destroy.length;++b)s.destroy[b](v);if(v.elm=e.elm,g){for(var S=0;S<s.create.length;++S)s.create[S](ar,v);var E=v.data.hook.insert;if(E.merged)for(var _=1;_<E.fns.length;_++)E.fns[_]()}else or(v);v=v.parent}i(m)?T([t],0,0):i(t.tag)&&w(t)}}return I(e,f,l),e.elm}i(t)&&w(t)}}({nodeOps:rr,modules:[wr,Dr,si,li,Ti,Q?{create:Qi,activate:Qi,remove:function(t,e){!0!==t.data.show?$i(t,e):e()}}:{}].concat(yr)});X&&document.addEventListener("selectionchange",function(){var t=document.activeElement;t&&t.vmodel&&no(t,"input")});var Hi={inserted:function(t,e,n,r){"select"===n.tag?(r.elm&&!r.elm._vOptions?ue(n,"postpatch",function(){Hi.componentUpdated(t,e,n)}):Yi(t,e,n.context),t._vOptions=[].map.call(t.options,Zi)):("textarea"===n.tag||er(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",to),t.addEventListener("compositionend",eo),t.addEventListener("change",eo),X&&(t.vmodel=!0)))},componentUpdated:function(t,e,n){if("select"===n.tag){Yi(t,e,n.context);var r=t._vOptions,i=t._vOptions=[].map.call(t.options,Zi);if(i.some(function(t,e){return!M(t,r[e])}))(t.multiple?e.value.some(function(t){return Xi(t,i)}):e.value!==e.oldValue&&Xi(e.value,i))&&no(t,"change")}}};function Yi(t,e,n){Ji(t,e,n),(J||Z)&&setTimeout(function(){Ji(t,e,n)},0)}function Ji(t,e,n){var r=e.value,i=t.multiple;if(!i||Array.isArray(r)){for(var o,a,s=0,u=t.options.length;s<u;s++)if(a=t.options[s],i)o=L(r,Zi(a))>-1,a.selected!==o&&(a.selected=o);else if(M(Zi(a),r))return void(t.selectedIndex!==s&&(t.selectedIndex=s));i||(t.selectedIndex=-1)}}function Xi(t,e){return e.every(function(e){return!M(e,t)})}function Zi(t){return"_value"in t?t._value:t.value}function to(t){t.target.composing=!0}function eo(t){t.target.composing&&(t.target.composing=!1,no(t.target,"input"))}function no(t,e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}function ro(t){return!t.componentInstance||t.data&&t.data.transition?t:ro(t.componentInstance._vnode)}var io={model:Hi,show:{bind:function(t,e,n){var r=e.value,i=(n=ro(n)).data&&n.data.transition,o=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;r&&i?(n.data.show=!0,Ki(n,function(){t.style.display=o})):t.style.display=r?o:"none"},update:function(t,e,n){var r=e.value;!r!=!e.oldValue&&((n=ro(n)).data&&n.data.transition?(n.data.show=!0,r?Ki(n,function(){t.style.display=t.__vOriginalDisplay}):$i(n,function(){t.style.display="none"})):t.style.display=r?t.__vOriginalDisplay:"none")},unbind:function(t,e,n,r,i){i||(t.style.display=t.__vOriginalDisplay)}}},oo={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function ao(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?ao(Qe(e.children)):t}function so(t){var e={},n=t.$options;for(var r in n.propsData)e[r]=t[r];var i=n._parentListeners;for(var o in i)e[E(o)]=i[o];return e}function uo(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}var co=function(t){return t.tag||ze(t)},lo=function(t){return"show"===t.name},ho={name:"transition",props:oo,abstract:!0,render:function(t){var e=this,n=this.$slots.default;if(n&&(n=n.filter(co)).length){0;var r=this.mode;0;var i=n[0];if(function(t){for(;t=t.parent;)if(t.data.transition)return!0}(this.$vnode))return i;var o=ao(i);if(!o)return i;if(this._leaving)return uo(t,i);var s="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?s+"comment":s+o.tag:a(o.key)?0===String(o.key).indexOf(s)?o.key:s+o.key:o.key;var u=(o.data||(o.data={})).transition=so(this),c=this._vnode,l=ao(c);if(o.data.directives&&o.data.directives.some(lo)&&(o.data.show=!0),l&&l.data&&!function(t,e){return e.key===t.key&&e.tag===t.tag}(o,l)&&!ze(l)&&(!l.componentInstance||!l.componentInstance._vnode.isComment)){var h=l.data.transition=N({},u);if("out-in"===r)return this._leaving=!0,ue(h,"afterLeave",function(){e._leaving=!1,e.$forceUpdate()}),uo(t,i);if("in-out"===r){if(ze(o))return c;var f,p=function(){f()};ue(u,"afterEnter",p),ue(u,"enterCancelled",p),ue(h,"delayLeave",function(t){f=t})}}return i}}},fo=N({tag:String,moveClass:String},oo);function po(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function mo(t){t.data.newPos=t.elm.getBoundingClientRect()}function yo(t){var e=t.data.pos,n=t.data.newPos,r=e.left-n.left,i=e.top-n.top;if(r||i){t.data.moved=!0;var o=t.elm.style;o.transform=o.WebkitTransform="translate("+r+"px,"+i+"px)",o.transitionDuration="0s"}}delete fo.mode;var vo={Transition:ho,TransitionGroup:{props:fo,beforeMount:function(){var t=this,e=this._update;this._update=function(n,r){var i=Ze(t);t.__patch__(t._vnode,t.kept,!1,!0),t._vnode=t.kept,i(),e.call(t,n,r)}},render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,i=this.$slots.default||[],o=this.children=[],a=so(this),s=0;s<i.length;s++){var u=i[s];if(u.tag)if(null!=u.key&&0!==String(u.key).indexOf("__vlist"))o.push(u),n[u.key]=u,(u.data||(u.data={})).transition=a;else;}if(r){for(var c=[],l=[],h=0;h<r.length;h++){var f=r[h];f.data.transition=a,f.data.pos=f.elm.getBoundingClientRect(),n[f.key]?c.push(f):l.push(f)}this.kept=t(e,null,c),this.removed=l}return t(e,null,o)},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(po),t.forEach(mo),t.forEach(yo),this._reflow=document.body.offsetHeight,t.forEach(function(t){if(t.data.moved){var n=t.elm,r=n.style;Pi(n,e),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(Oi,n._moveCb=function t(r){r&&r.target!==n||r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(Oi,t),n._moveCb=null,Fi(n,e))})}}))},methods:{hasMove:function(t,e){if(!Ai)return!1;if(this._hasMove)return this._hasMove;var n=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach(function(t){Ci(n,t)}),Ei(n,e),n.style.display="none",this.$el.appendChild(n);var r=qi(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}}};_n.config.mustUseProp=Pn,_n.config.isReservedTag=Xn,_n.config.isReservedAttr=Mn,_n.config.getTagNamespace=Zn,_n.config.isUnknownElement=function(t){if(!Q)return!0;if(Xn(t))return!1;if(t=t.toLowerCase(),null!=tr[t])return tr[t];var e=document.createElement(t);return t.indexOf("-")>-1?tr[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:tr[t]=/HTMLUnknownElement/.test(e.toString())},N(_n.options.directives,io),N(_n.options.components,vo),_n.prototype.__patch__=Q?Gi:O,_n.prototype.$mount=function(t,e){return function(t,e,n){return t.$el=e,t.$options.render||(t.$options.render=gt),nn(t,"beforeMount"),new mn(t,function(){t._update(t._render(),n)},O,{before:function(){t._isMounted&&!t._isDestroyed&&nn(t,"beforeUpdate")}},!0),n=!1,null==t.$vnode&&(t._isMounted=!0,nn(t,"mounted")),t}(this,t=t&&Q?nr(t):void 0,e)},Q&&setTimeout(function(){q.devtools&&at&&at.emit("init",_n)},0);var go=/\{\{((?:.|\r?\n)+?)\}\}/g,bo=/[-.*+?^${}()|[\]\/\\]/g,wo=T(function(t){var e=t[0].replace(bo,"\\$&"),n=t[1].replace(bo,"\\$&");return new RegExp(e+"((?:.|\\n)+?)"+n,"g")});function To(t,e){var n=e?wo(e):go;if(n.test(t)){for(var r,i,o,a=[],s=[],u=n.lastIndex=0;r=n.exec(t);){(i=r.index)>u&&(s.push(o=t.slice(u,i)),a.push(JSON.stringify(o)));var c=kr(r[1].trim());a.push("_s("+c+")"),s.push({"@binding":c}),u=i+r[0].length}return u<t.length&&(s.push(o=t.slice(u)),a.push(JSON.stringify(o))),{expression:a.join("+"),tokens:s}}}var So={staticKeys:["staticClass"],transformNode:function(t,e){e.warn;var n=jr(t,"class");n&&(t.staticClass=JSON.stringify(n));var r=Ur(t,"class",!1);r&&(t.classBinding=r)},genData:function(t){var e="";return t.staticClass&&(e+="staticClass:"+t.staticClass+","),t.classBinding&&(e+="class:"+t.classBinding+","),e}};var Eo,Co={staticKeys:["staticStyle"],transformNode:function(t,e){e.warn;var n=jr(t,"style");n&&(t.staticStyle=JSON.stringify(hi(n)));var r=Ur(t,"style",!1);r&&(t.styleBinding=r)},genData:function(t){var e="";return t.staticStyle&&(e+="staticStyle:"+t.staticStyle+","),t.styleBinding&&(e+="style:("+t.styleBinding+"),"),e}},Io=function(t){return(Eo=Eo||document.createElement("div")).innerHTML=t,Eo.textContent},_o=m("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"),Ao=m("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"),Do=m("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"),No=/^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,ko=/^\s*((?:v-[\w-]+:|@|:|#)\[[^=]+\][^\s"'<>\/=]*)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,Oo="[a-zA-Z_][\\-\\.0-9_a-zA-Z"+U.source+"]*",Ro="((?:"+Oo+"\\:)?"+Oo+")",xo=new RegExp("^<"+Ro),Mo=/^\s*(\/?)>/,Lo=new RegExp("^<\\/"+Ro+"[^>]*>"),Po=/^<!DOCTYPE [^>]+>/i,Fo=/^<!\--/,Vo=/^<!\[/,Bo=m("script,style,textarea",!0),qo={},Uo={"&lt;":"<","&gt;":">","&quot;":'"',"&amp;":"&","&#10;":"\n","&#9;":"\t","&#39;":"'"},jo=/&(?:lt|gt|quot|amp|#39);/g,Ko=/&(?:lt|gt|quot|amp|#39|#10|#9);/g,$o=m("pre,textarea",!0),Wo=function(t,e){return t&&$o(t)&&"\n"===e[0]};function zo(t,e){var n=e?Ko:jo;return t.replace(n,function(t){return Uo[t]})}var Qo,Go,Ho,Yo,Jo,Xo,Zo,ta,ea=/^@|^v-on:/,na=/^v-|^@|^:|^#/,ra=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,ia=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,oa=/^\(|\)$/g,aa=/^\[.*\]$/,sa=/:(.*)$/,ua=/^:|^\.|^v-bind:/,ca=/\.[^.\]]+(?=[^\]]*$)/g,la=/^v-slot(:|$)|^#/,ha=/[\r\n]/,fa=/\s+/g,pa=T(Io),da="_empty_";function ma(t,e,n){return{type:1,tag:t,attrsList:e,attrsMap:function(t){for(var e={},n=0,r=t.length;n<r;n++)e[t[n].name]=t[n].value;return e}(e),rawAttrsMap:{},parent:n,children:[]}}function ya(t,e){Qo=e.warn||Rr,Xo=e.isPreTag||R,Zo=e.mustUseProp||R,ta=e.getTagNamespace||R;var n=e.isReservedTag||R;(function(t){return!!t.component||!n(t.tag)}),Ho=xr(e.modules,"transformNode"),Yo=xr(e.modules,"preTransformNode"),Jo=xr(e.modules,"postTransformNode"),Go=e.delimiters;var r,i,o=[],a=!1!==e.preserveWhitespace,s=e.whitespace,u=!1,c=!1;function l(t){if(h(t),u||t.processed||(t=va(t,e)),o.length||t===r||r.if&&(t.elseif||t.else)&&ba(r,{exp:t.elseif,block:t}),i&&!t.forbidden)if(t.elseif||t.else)a=t,(s=function(t){var e=t.length;for(;e--;){if(1===t[e].type)return t[e];t.pop()}}(i.children))&&s.if&&ba(s,{exp:a.elseif,block:a});else{if(t.slotScope){var n=t.slotTarget||'"default"';(i.scopedSlots||(i.scopedSlots={}))[n]=t}i.children.push(t),t.parent=i}var a,s;t.children=t.children.filter(function(t){return!t.slotScope}),h(t),t.pre&&(u=!1),Xo(t.tag)&&(c=!1);for(var l=0;l<Jo.length;l++)Jo[l](t,e)}function h(t){if(!c)for(var e;(e=t.children[t.children.length-1])&&3===e.type&&" "===e.text;)t.children.pop()}return function(t,e){for(var n,r,i=[],o=e.expectHTML,a=e.isUnaryTag||R,s=e.canBeLeftOpenTag||R,u=0;t;){if(n=t,r&&Bo(r)){var c=0,l=r.toLowerCase(),h=qo[l]||(qo[l]=new RegExp("([\\s\\S]*?)(</"+l+"[^>]*>)","i")),f=t.replace(h,function(t,n,r){return c=r.length,Bo(l)||"noscript"===l||(n=n.replace(/<!\--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1")),Wo(l,n)&&(n=n.slice(1)),e.chars&&e.chars(n),""});u+=t.length-f.length,t=f,_(l,u-c,u)}else{var p=t.indexOf("<");if(0===p){if(Fo.test(t)){var d=t.indexOf("--\x3e");if(d>=0){e.shouldKeepComment&&e.comment(t.substring(4,d),u,u+d+3),E(d+3);continue}}if(Vo.test(t)){var m=t.indexOf("]>");if(m>=0){E(m+2);continue}}var y=t.match(Po);if(y){E(y[0].length);continue}var v=t.match(Lo);if(v){var g=u;E(v[0].length),_(v[1],g,u);continue}var b=C();if(b){I(b),Wo(b.tagName,t)&&E(1);continue}}var w=void 0,T=void 0,S=void 0;if(p>=0){for(T=t.slice(p);!(Lo.test(T)||xo.test(T)||Fo.test(T)||Vo.test(T)||(S=T.indexOf("<",1))<0);)p+=S,T=t.slice(p);w=t.substring(0,p)}p<0&&(w=t),w&&E(w.length),e.chars&&w&&e.chars(w,u-w.length,u)}if(t===n){e.chars&&e.chars(t);break}}function E(e){u+=e,t=t.substring(e)}function C(){var e=t.match(xo);if(e){var n,r,i={tagName:e[1],attrs:[],start:u};for(E(e[0].length);!(n=t.match(Mo))&&(r=t.match(ko)||t.match(No));)r.start=u,E(r[0].length),r.end=u,i.attrs.push(r);if(n)return i.unarySlash=n[1],E(n[0].length),i.end=u,i}}function I(t){var n=t.tagName,u=t.unarySlash;o&&("p"===r&&Do(n)&&_(r),s(n)&&r===n&&_(n));for(var c=a(n)||!!u,l=t.attrs.length,h=new Array(l),f=0;f<l;f++){var p=t.attrs[f],d=p[3]||p[4]||p[5]||"",m="a"===n&&"href"===p[1]?e.shouldDecodeNewlinesForHref:e.shouldDecodeNewlines;h[f]={name:p[1],value:zo(d,m)}}c||(i.push({tag:n,lowerCasedTag:n.toLowerCase(),attrs:h,start:t.start,end:t.end}),r=n),e.start&&e.start(n,h,c,t.start,t.end)}function _(t,n,o){var a,s;if(null==n&&(n=u),null==o&&(o=u),t)for(s=t.toLowerCase(),a=i.length-1;a>=0&&i[a].lowerCasedTag!==s;a--);else a=0;if(a>=0){for(var c=i.length-1;c>=a;c--)e.end&&e.end(i[c].tag,n,o);i.length=a,r=a&&i[a-1].tag}else"br"===s?e.start&&e.start(t,[],!0,n,o):"p"===s&&(e.start&&e.start(t,[],!1,n,o),e.end&&e.end(t,n,o))}_()}(t,{warn:Qo,expectHTML:e.expectHTML,isUnaryTag:e.isUnaryTag,canBeLeftOpenTag:e.canBeLeftOpenTag,shouldDecodeNewlines:e.shouldDecodeNewlines,shouldDecodeNewlinesForHref:e.shouldDecodeNewlinesForHref,shouldKeepComment:e.comments,outputSourceRange:e.outputSourceRange,start:function(t,n,a,s,h){var f=i&&i.ns||ta(t);J&&"svg"===f&&(n=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];Sa.test(r.name)||(r.name=r.name.replace(Ea,""),e.push(r))}return e}(n));var p,d=ma(t,n,i);f&&(d.ns=f),"style"!==(p=d).tag&&("script"!==p.tag||p.attrsMap.type&&"text/javascript"!==p.attrsMap.type)||ot()||(d.forbidden=!0);for(var m=0;m<Yo.length;m++)d=Yo[m](d,e)||d;u||(!function(t){null!=jr(t,"v-pre")&&(t.pre=!0)}(d),d.pre&&(u=!0)),Xo(d.tag)&&(c=!0),u?function(t){var e=t.attrsList,n=e.length;if(n)for(var r=t.attrs=new Array(n),i=0;i<n;i++)r[i]={name:e[i].name,value:JSON.stringify(e[i].value)},null!=e[i].start&&(r[i].start=e[i].start,r[i].end=e[i].end);else t.pre||(t.plain=!0)}(d):d.processed||(ga(d),function(t){var e=jr(t,"v-if");if(e)t.if=e,ba(t,{exp:e,block:t});else{null!=jr(t,"v-else")&&(t.else=!0);var n=jr(t,"v-else-if");n&&(t.elseif=n)}}(d),function(t){null!=jr(t,"v-once")&&(t.once=!0)}(d)),r||(r=d),a?l(d):(i=d,o.push(d))},end:function(t,e,n){var r=o[o.length-1];o.length-=1,i=o[o.length-1],l(r)},chars:function(t,e,n){if(i&&(!J||"textarea"!==i.tag||i.attrsMap.placeholder!==t)){var r,o,l,h=i.children;if(t=c||t.trim()?"script"===(r=i).tag||"style"===r.tag?t:pa(t):h.length?s?"condense"===s&&ha.test(t)?"":" ":a?" ":"":"")c||"condense"!==s||(t=t.replace(fa," ")),!u&&" "!==t&&(o=To(t,Go))?l={type:2,expression:o.expression,tokens:o.tokens,text:t}:" "===t&&h.length&&" "===h[h.length-1].text||(l={type:3,text:t}),l&&h.push(l)}},comment:function(t,e,n){if(i){var r={type:3,text:t,isComment:!0};0,i.children.push(r)}}}),r}function va(t,e){var n,r;!function(t){var e=Ur(t,"key");if(e){t.key=e}}(t),t.plain=!t.key&&!t.scopedSlots&&!t.attrsList.length,(r=Ur(n=t,"ref"))&&(n.ref=r,n.refInFor=function(t){for(var e=t;e;){if(void 0!==e.for)return!0;e=e.parent}return!1}(n)),function(t){var e;"template"===t.tag?(e=jr(t,"scope"),t.slotScope=e||jr(t,"slot-scope")):(e=jr(t,"slot-scope"))&&(t.slotScope=e);var n=Ur(t,"slot");n&&(t.slotTarget='""'===n?'"default"':n,t.slotTargetDynamic=!(!t.attrsMap[":slot"]&&!t.attrsMap["v-bind:slot"]),"template"===t.tag||t.slotScope||Lr(t,"slot",n,qr(t,"slot")));if("template"===t.tag){var r=Kr(t,la);if(r){0;var i=wa(r),o=i.name,a=i.dynamic;t.slotTarget=o,t.slotTargetDynamic=a,t.slotScope=r.value||da}}else{var s=Kr(t,la);if(s){0;var u=t.scopedSlots||(t.scopedSlots={}),c=wa(s),l=c.name,h=c.dynamic,f=u[l]=ma("template",[],t);f.slotTarget=l,f.slotTargetDynamic=h,f.children=t.children.filter(function(t){if(!t.slotScope)return t.parent=f,!0}),f.slotScope=s.value||da,t.children=[],t.plain=!1}}}(t),function(t){"slot"===t.tag&&(t.slotName=Ur(t,"name"))}(t),function(t){var e;(e=Ur(t,"is"))&&(t.component=e);null!=jr(t,"inline-template")&&(t.inlineTemplate=!0)}(t);for(var i=0;i<Ho.length;i++)t=Ho[i](t,e)||t;return function(t){var e,n,r,i,o,a,s,u,c=t.attrsList;for(e=0,n=c.length;e<n;e++){if(r=i=c[e].name,o=c[e].value,na.test(r))if(t.hasBindings=!0,(a=Ta(r.replace(na,"")))&&(r=r.replace(ca,"")),ua.test(r))r=r.replace(ua,""),o=kr(o),(u=aa.test(r))&&(r=r.slice(1,-1)),a&&(a.prop&&!u&&"innerHtml"===(r=E(r))&&(r="innerHTML"),a.camel&&!u&&(r=E(r)),a.sync&&(s=zr(o,"$event"),u?Br(t,'"update:"+('+r+")",s,null,!1,0,c[e],!0):(Br(t,"update:"+E(r),s,null,!1,0,c[e]),_(r)!==E(r)&&Br(t,"update:"+_(r),s,null,!1,0,c[e])))),a&&a.prop||!t.component&&Zo(t.tag,t.attrsMap.type,r)?Mr(t,r,o,c[e],u):Lr(t,r,o,c[e],u);else if(ea.test(r))r=r.replace(ea,""),(u=aa.test(r))&&(r=r.slice(1,-1)),Br(t,r,o,a,!1,0,c[e],u);else{var l=(r=r.replace(na,"")).match(sa),h=l&&l[1];u=!1,h&&(r=r.slice(0,-(h.length+1)),aa.test(h)&&(h=h.slice(1,-1),u=!0)),Fr(t,r,i,o,h,u,a,c[e])}else Lr(t,r,JSON.stringify(o),c[e]),!t.component&&"muted"===r&&Zo(t.tag,t.attrsMap.type,r)&&Mr(t,r,"true",c[e])}}(t),t}function ga(t){var e;if(e=jr(t,"v-for")){var n=function(t){var e=t.match(ra);if(!e)return;var n={};n.for=e[2].trim();var r=e[1].trim().replace(oa,""),i=r.match(ia);i?(n.alias=r.replace(ia,"").trim(),n.iterator1=i[1].trim(),i[2]&&(n.iterator2=i[2].trim())):n.alias=r;return n}(e);n&&N(t,n)}}function ba(t,e){t.ifConditions||(t.ifConditions=[]),t.ifConditions.push(e)}function wa(t){var e=t.name.replace(la,"");return e||"#"!==t.name[0]&&(e="default"),aa.test(e)?{name:e.slice(1,-1),dynamic:!0}:{name:'"'+e+'"',dynamic:!1}}function Ta(t){var e=t.match(ca);if(e){var n={};return e.forEach(function(t){n[t.slice(1)]=!0}),n}}var Sa=/^xmlns:NS\d+/,Ea=/^NS\d+:/;function Ca(t){return ma(t.tag,t.attrsList.slice(),t.parent)}var Ia=[So,Co,{preTransformNode:function(t,e){if("input"===t.tag){var n,r=t.attrsMap;if(!r["v-model"])return;if((r[":type"]||r["v-bind:type"])&&(n=Ur(t,"type")),r.type||n||!r["v-bind"]||(n="("+r["v-bind"]+").type"),n){var i=jr(t,"v-if",!0),o=i?"&&("+i+")":"",a=null!=jr(t,"v-else",!0),s=jr(t,"v-else-if",!0),u=Ca(t);ga(u),Pr(u,"type","checkbox"),va(u,e),u.processed=!0,u.if="("+n+")==='checkbox'"+o,ba(u,{exp:u.if,block:u});var c=Ca(t);jr(c,"v-for",!0),Pr(c,"type","radio"),va(c,e),ba(u,{exp:"("+n+")==='radio'"+o,block:c});var l=Ca(t);return jr(l,"v-for",!0),Pr(l,":type",n),va(l,e),ba(u,{exp:i,block:l}),a?u.else=!0:s&&(u.elseif=s),u}}}}];var _a,Aa,Da={expectHTML:!0,modules:Ia,directives:{model:function(t,e,n){n;var r=e.value,i=e.modifiers,o=t.tag,a=t.attrsMap.type;if(t.component)return Wr(t,r,i),!1;if("select"===o)!function(t,e,n){var r='var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;return '+(n&&n.number?"_n(val)":"val")+"});";r=r+" "+zr(e,"$event.target.multiple ? $$selectedVal : $$selectedVal[0]"),Br(t,"change",r,null,!0)}(t,r,i);else if("input"===o&&"checkbox"===a)!function(t,e,n){var r=n&&n.number,i=Ur(t,"value")||"null",o=Ur(t,"true-value")||"true",a=Ur(t,"false-value")||"false";Mr(t,"checked","Array.isArray("+e+")?_i("+e+","+i+")>-1"+("true"===o?":("+e+")":":_q("+e+","+o+")")),Br(t,"change","var $$a="+e+",$$el=$event.target,$$c=$$el.checked?("+o+"):("+a+");if(Array.isArray($$a)){var $$v="+(r?"_n("+i+")":i)+",$$i=_i($$a,$$v);if($$el.checked){$$i<0&&("+zr(e,"$$a.concat([$$v])")+")}else{$$i>-1&&("+zr(e,"$$a.slice(0,$$i).concat($$a.slice($$i+1))")+")}}else{"+zr(e,"$$c")+"}",null,!0)}(t,r,i);else if("input"===o&&"radio"===a)!function(t,e,n){var r=n&&n.number,i=Ur(t,"value")||"null";Mr(t,"checked","_q("+e+","+(i=r?"_n("+i+")":i)+")"),Br(t,"change",zr(e,i),null,!0)}(t,r,i);else if("input"===o||"textarea"===o)!function(t,e,n){var r=t.attrsMap.type,i=n||{},o=i.lazy,a=i.number,s=i.trim,u=!o&&"range"!==r,c=o?"change":"range"===r?Zr:"input",l="$event.target.value";s&&(l="$event.target.value.trim()"),a&&(l="_n("+l+")");var h=zr(e,l);u&&(h="if($event.target.composing)return;"+h),Mr(t,"value","("+e+")"),Br(t,c,h,null,!0),(s||a)&&Br(t,"blur","$forceUpdate()")}(t,r,i);else if(!q.isReservedTag(o))return Wr(t,r,i),!1;return!0},text:function(t,e){e.value&&Mr(t,"textContent","_s("+e.value+")",e)},html:function(t,e){e.value&&Mr(t,"innerHTML","_s("+e.value+")",e)}},isPreTag:function(t){return"pre"===t},isUnaryTag:_o,mustUseProp:Pn,canBeLeftOpenTag:Ao,isReservedTag:Xn,getTagNamespace:Zn,staticKeys:function(t){return t.reduce(function(t,e){return t.concat(e.staticKeys||[])},[]).join(",")}(Ia)},Na=T(function(t){return m("type,tag,attrsList,attrsMap,plain,parent,children,attrs,start,end,rawAttrsMap"+(t?","+t:""))});function ka(t,e){t&&(_a=Na(e.staticKeys||""),Aa=e.isReservedTag||R,function t(e){e.static=function(t){if(2===t.type)return!1;if(3===t.type)return!0;return!(!t.pre&&(t.hasBindings||t.if||t.for||y(t.tag)||!Aa(t.tag)||function(t){for(;t.parent;){if("template"!==(t=t.parent).tag)return!1;if(t.for)return!0}return!1}(t)||!Object.keys(t).every(_a)))}(e);if(1===e.type){if(!Aa(e.tag)&&"slot"!==e.tag&&null==e.attrsMap["inline-template"])return;for(var n=0,r=e.children.length;n<r;n++){var i=e.children[n];t(i),i.static||(e.static=!1)}if(e.ifConditions)for(var o=1,a=e.ifConditions.length;o<a;o++){var s=e.ifConditions[o].block;t(s),s.static||(e.static=!1)}}}(t),function t(e,n){if(1===e.type){if((e.static||e.once)&&(e.staticInFor=n),e.static&&e.children.length&&(1!==e.children.length||3!==e.children[0].type))return void(e.staticRoot=!0);if(e.staticRoot=!1,e.children)for(var r=0,i=e.children.length;r<i;r++)t(e.children[r],n||!!e.for);if(e.ifConditions)for(var o=1,a=e.ifConditions.length;o<a;o++)t(e.ifConditions[o].block,n)}}(t,!1))}var Oa=/^([\w$_]+|\([^)]*?\))\s*=>|^function(?:\s+[\w$]+)?\s*\(/,Ra=/\([^)]*?\);*$/,xa=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,Ma={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},La={esc:["Esc","Escape"],tab:"Tab",enter:"Enter",space:[" ","Spacebar"],up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete","Del"]},Pa=function(t){return"if("+t+")return null;"},Fa={stop:"$event.stopPropagation();",prevent:"$event.preventDefault();",self:Pa("$event.target !== $event.currentTarget"),ctrl:Pa("!$event.ctrlKey"),shift:Pa("!$event.shiftKey"),alt:Pa("!$event.altKey"),meta:Pa("!$event.metaKey"),left:Pa("'button' in $event && $event.button !== 0"),middle:Pa("'button' in $event && $event.button !== 1"),right:Pa("'button' in $event && $event.button !== 2")};function Va(t,e){var n=e?"nativeOn:":"on:",r="",i="";for(var o in t){var a=Ba(t[o]);t[o]&&t[o].dynamic?i+=o+","+a+",":r+='"'+o+'":'+a+","}return r="{"+r.slice(0,-1)+"}",i?n+"_d("+r+",["+i.slice(0,-1)+"])":n+r}function Ba(t){if(!t)return"function(){}";if(Array.isArray(t))return"["+t.map(function(t){return Ba(t)}).join(",")+"]";var e=xa.test(t.value),n=Oa.test(t.value),r=xa.test(t.value.replace(Ra,""));if(t.modifiers){var i="",o="",a=[];for(var s in t.modifiers)if(Fa[s])o+=Fa[s],Ma[s]&&a.push(s);else if("exact"===s){var u=t.modifiers;o+=Pa(["ctrl","shift","alt","meta"].filter(function(t){return!u[t]}).map(function(t){return"$event."+t+"Key"}).join("||"))}else a.push(s);return a.length&&(i+=function(t){return"if(!$event.type.indexOf('key')&&"+t.map(qa).join("&&")+")return null;"}(a)),o&&(i+=o),"function($event){"+i+(e?"return "+t.value+"($event)":n?"return ("+t.value+")($event)":r?"return "+t.value:t.value)+"}"}return e||n?t.value:"function($event){"+(r?"return "+t.value:t.value)+"}"}function qa(t){var e=parseInt(t,10);if(e)return"$event.keyCode!=="+e;var n=Ma[t],r=La[t];return"_k($event.keyCode,"+JSON.stringify(t)+","+JSON.stringify(n)+",$event.key,"+JSON.stringify(r)+")"}var Ua={on:function(t,e){t.wrapListeners=function(t){return"_g("+t+","+e.value+")"}},bind:function(t,e){t.wrapData=function(n){return"_b("+n+",'"+t.tag+"',"+e.value+","+(e.modifiers&&e.modifiers.prop?"true":"false")+(e.modifiers&&e.modifiers.sync?",true":"")+")"}},cloak:O},ja=function(t){this.options=t,this.warn=t.warn||Rr,this.transforms=xr(t.modules,"transformCode"),this.dataGenFns=xr(t.modules,"genData"),this.directives=N(N({},Ua),t.directives);var e=t.isReservedTag||R;this.maybeComponent=function(t){return!!t.component||!e(t.tag)},this.onceId=0,this.staticRenderFns=[],this.pre=!1};function Ka(t,e){var n=new ja(e);return{render:"with(this){return "+(t?$a(t,n):'_c("div")')+"}",staticRenderFns:n.staticRenderFns}}function $a(t,e){if(t.parent&&(t.pre=t.pre||t.parent.pre),t.staticRoot&&!t.staticProcessed)return Wa(t,e);if(t.once&&!t.onceProcessed)return za(t,e);if(t.for&&!t.forProcessed)return Ga(t,e);if(t.if&&!t.ifProcessed)return Qa(t,e);if("template"!==t.tag||t.slotTarget||e.pre){if("slot"===t.tag)return function(t,e){var n=t.slotName||'"default"',r=Xa(t,e),i="_t("+n+(r?","+r:""),o=t.attrs||t.dynamicAttrs?es((t.attrs||[]).concat(t.dynamicAttrs||[]).map(function(t){return{name:E(t.name),value:t.value,dynamic:t.dynamic}})):null,a=t.attrsMap["v-bind"];!o&&!a||r||(i+=",null");o&&(i+=","+o);a&&(i+=(o?"":",null")+","+a);return i+")"}(t,e);var n;if(t.component)n=function(t,e,n){var r=e.inlineTemplate?null:Xa(e,n,!0);return"_c("+t+","+Ha(e,n)+(r?","+r:"")+")"}(t.component,t,e);else{var r;(!t.plain||t.pre&&e.maybeComponent(t))&&(r=Ha(t,e));var i=t.inlineTemplate?null:Xa(t,e,!0);n="_c('"+t.tag+"'"+(r?","+r:"")+(i?","+i:"")+")"}for(var o=0;o<e.transforms.length;o++)n=e.transforms[o](t,n);return n}return Xa(t,e)||"void 0"}function Wa(t,e){t.staticProcessed=!0;var n=e.pre;return t.pre&&(e.pre=t.pre),e.staticRenderFns.push("with(this){return "+$a(t,e)+"}"),e.pre=n,"_m("+(e.staticRenderFns.length-1)+(t.staticInFor?",true":"")+")"}function za(t,e){if(t.onceProcessed=!0,t.if&&!t.ifProcessed)return Qa(t,e);if(t.staticInFor){for(var n="",r=t.parent;r;){if(r.for){n=r.key;break}r=r.parent}return n?"_o("+$a(t,e)+","+e.onceId+++","+n+")":$a(t,e)}return Wa(t,e)}function Qa(t,e,n,r){return t.ifProcessed=!0,function t(e,n,r,i){if(!e.length)return i||"_e()";var o=e.shift();return o.exp?"("+o.exp+")?"+a(o.block)+":"+t(e,n,r,i):""+a(o.block);function a(t){return r?r(t,n):t.once?za(t,n):$a(t,n)}}(t.ifConditions.slice(),e,n,r)}function Ga(t,e,n,r){var i=t.for,o=t.alias,a=t.iterator1?","+t.iterator1:"",s=t.iterator2?","+t.iterator2:"";return t.forProcessed=!0,(r||"_l")+"(("+i+"),function("+o+a+s+"){return "+(n||$a)(t,e)+"})"}function Ha(t,e){var n="{",r=function(t,e){var n=t.directives;if(!n)return;var r,i,o,a,s="directives:[",u=!1;for(r=0,i=n.length;r<i;r++){o=n[r],a=!0;var c=e.directives[o.name];c&&(a=!!c(t,o,e.warn)),a&&(u=!0,s+='{name:"'+o.name+'",rawName:"'+o.rawName+'"'+(o.value?",value:("+o.value+"),expression:"+JSON.stringify(o.value):"")+(o.arg?",arg:"+(o.isDynamicArg?o.arg:'"'+o.arg+'"'):"")+(o.modifiers?",modifiers:"+JSON.stringify(o.modifiers):"")+"},")}if(u)return s.slice(0,-1)+"]"}(t,e);r&&(n+=r+","),t.key&&(n+="key:"+t.key+","),t.ref&&(n+="ref:"+t.ref+","),t.refInFor&&(n+="refInFor:true,"),t.pre&&(n+="pre:true,"),t.component&&(n+='tag:"'+t.tag+'",');for(var i=0;i<e.dataGenFns.length;i++)n+=e.dataGenFns[i](t);if(t.attrs&&(n+="attrs:"+es(t.attrs)+","),t.props&&(n+="domProps:"+es(t.props)+","),t.events&&(n+=Va(t.events,!1)+","),t.nativeEvents&&(n+=Va(t.nativeEvents,!0)+","),t.slotTarget&&!t.slotScope&&(n+="slot:"+t.slotTarget+","),t.scopedSlots&&(n+=function(t,e,n){var r=t.for||Object.keys(e).some(function(t){var n=e[t];return n.slotTargetDynamic||n.if||n.for||Ya(n)}),i=!!t.if;if(!r)for(var o=t.parent;o;){if(o.slotScope&&o.slotScope!==da||o.for){r=!0;break}o.if&&(i=!0),o=o.parent}var a=Object.keys(e).map(function(t){return Ja(e[t],n)}).join(",");return"scopedSlots:_u(["+a+"]"+(r?",null,true":"")+(!r&&i?",null,false,"+function(t){var e=5381,n=t.length;for(;n;)e=33*e^t.charCodeAt(--n);return e>>>0}(a):"")+")"}(t,t.scopedSlots,e)+","),t.model&&(n+="model:{value:"+t.model.value+",callback:"+t.model.callback+",expression:"+t.model.expression+"},"),t.inlineTemplate){var o=function(t,e){var n=t.children[0];0;if(n&&1===n.type){var r=Ka(n,e.options);return"inlineTemplate:{render:function(){"+r.render+"},staticRenderFns:["+r.staticRenderFns.map(function(t){return"function(){"+t+"}"}).join(",")+"]}"}}(t,e);o&&(n+=o+",")}return n=n.replace(/,$/,"")+"}",t.dynamicAttrs&&(n="_b("+n+',"'+t.tag+'",'+es(t.dynamicAttrs)+")"),t.wrapData&&(n=t.wrapData(n)),t.wrapListeners&&(n=t.wrapListeners(n)),n}function Ya(t){return 1===t.type&&("slot"===t.tag||t.children.some(Ya))}function Ja(t,e){var n=t.attrsMap["slot-scope"];if(t.if&&!t.ifProcessed&&!n)return Qa(t,e,Ja,"null");if(t.for&&!t.forProcessed)return Ga(t,e,Ja);var r=t.slotScope===da?"":String(t.slotScope),i="function("+r+"){return "+("template"===t.tag?t.if&&n?"("+t.if+")?"+(Xa(t,e)||"undefined")+":undefined":Xa(t,e)||"undefined":$a(t,e))+"}",o=r?"":",proxy:true";return"{key:"+(t.slotTarget||'"default"')+",fn:"+i+o+"}"}function Xa(t,e,n,r,i){var o=t.children;if(o.length){var a=o[0];if(1===o.length&&a.for&&"template"!==a.tag&&"slot"!==a.tag){var s=n?e.maybeComponent(a)?",1":",0":"";return""+(r||$a)(a,e)+s}var u=n?function(t,e){for(var n=0,r=0;r<t.length;r++){var i=t[r];if(1===i.type){if(Za(i)||i.ifConditions&&i.ifConditions.some(function(t){return Za(t.block)})){n=2;break}(e(i)||i.ifConditions&&i.ifConditions.some(function(t){return e(t.block)}))&&(n=1)}}return n}(o,e.maybeComponent):0,c=i||ts;return"["+o.map(function(t){return c(t,e)}).join(",")+"]"+(u?","+u:"")}}function Za(t){return void 0!==t.for||"template"===t.tag||"slot"===t.tag}function ts(t,e){return 1===t.type?$a(t,e):3===t.type&&t.isComment?(r=t,"_e("+JSON.stringify(r.text)+")"):"_v("+(2===(n=t).type?n.expression:ns(JSON.stringify(n.text)))+")";var n,r}function es(t){for(var e="",n="",r=0;r<t.length;r++){var i=t[r],o=ns(i.value);i.dynamic?n+=i.name+","+o+",":e+='"'+i.name+'":'+o+","}return e="{"+e.slice(0,-1)+"}",n?"_d("+e+",["+n.slice(0,-1)+"])":e}function ns(t){return t.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments".split(",").join("\\b|\\b")+"\\b"),new RegExp("\\b"+"delete,typeof,void".split(",").join("\\s*\\([^\\)]*\\)|\\b")+"\\s*\\([^\\)]*\\)");function rs(t,e){try{return new Function(t)}catch(n){return e.push({err:n,code:t}),O}}function is(t){var e=Object.create(null);return function(n,r,i){(r=N({},r)).warn;delete r.warn;var o=r.delimiters?String(r.delimiters)+n:n;if(e[o])return e[o];var a=t(n,r);var s={},u=[];return s.render=rs(a.render,u),s.staticRenderFns=a.staticRenderFns.map(function(t){return rs(t,u)}),e[o]=s}}var os,as,ss=(os=function(t,e){var n=ya(t.trim(),e);!1!==e.optimize&&ka(n,e);var r=Ka(n,e);return{ast:n,render:r.render,staticRenderFns:r.staticRenderFns}},function(t){function e(e,n){var r=Object.create(t),i=[],o=[],a=function(t,e,n){(n?o:i).push(t)};if(n)for(var s in n.modules&&(r.modules=(t.modules||[]).concat(n.modules)),n.directives&&(r.directives=N(Object.create(t.directives||null),n.directives)),n)"modules"!==s&&"directives"!==s&&(r[s]=n[s]);r.warn=a;var u=os(e.trim(),r);return u.errors=i,u.tips=o,u}return{compile:e,compileToFunctions:is(e)}})(Da),us=(ss.compile,ss.compileToFunctions);function cs(t){return(as=as||document.createElement("div")).innerHTML=t?'<a href="\n"/>':'<div a="\n"/>',as.innerHTML.indexOf("&#10;")>0}var ls=!!Q&&cs(!1),hs=!!Q&&cs(!0),fs=T(function(t){var e=nr(t);return e&&e.innerHTML}),ps=_n.prototype.$mount;_n.prototype.$mount=function(t,e){if((t=t&&nr(t))===document.body||t===document.documentElement)return this;var n=this.$options;if(!n.render){var r=n.template;if(r)if("string"==typeof r)"#"===r.charAt(0)&&(r=fs(r));else{if(!r.nodeType)return this;r=r.innerHTML}else t&&(r=function(t){if(t.outerHTML)return t.outerHTML;var e=document.createElement("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML}(t));if(r){0;var i=us(r,{outputSourceRange:!1,shouldDecodeNewlines:ls,shouldDecodeNewlinesForHref:hs,delimiters:n.delimiters,comments:n.comments},this),o=i.render,a=i.staticRenderFns;n.render=o,n.staticRenderFns=a}}return ps.call(this,t,e)},_n.compile=us,e.a=_n}).call(e,n("DuR2"))},DuR2:function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},HNzH:function(t,e,n){(function(t,e){(function(n){"use strict";try{(function(){n=n&&n.hasOwnProperty("default")?n.default:n;var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o,a,s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function u(t,e,n,r){return new(n=n||Promise)(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})}function c(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function l(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function h(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function f(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString();switch(e){case o.DEBUG:case o.VERBOSE:console.log.apply(console,h(["["+i+"]  "+t.name+":"],n));break;case o.INFO:console.info.apply(console,h(["["+i+"]  "+t.name+":"],n));break;case o.WARN:console.warn.apply(console,h(["["+i+"]  "+t.name+":"],n));break;case o.ERROR:console.error.apply(console,h(["["+i+"]  "+t.name+":"],n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}}(a=o=o||{})[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT";var p=o.INFO,d=(Object.defineProperty(m.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),m.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,h([this,o.DEBUG],t))},m.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,h([this,o.VERBOSE],t))},m.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,h([this,o.INFO],t))},m.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,h([this,o.WARN],t))},m.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,h([this,o.ERROR],t))},m);function m(t){this.name=t,this._logLevel=p,this._logHandler=f}function y(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var v,g=(i(b,v=Error),b);function b(t,e){var n=v.call(this,e)||this;return n.code=t,n.name="FirebaseError",Object.setPrototypeOf(n,b.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,w.prototype.create),n}var w=(T.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?function(t,e){return o.replace(S,function(t,n){var r=e[n];return null!=r?r.toString():"<"+n+"?>"})}(0,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new g(i,s),c=0,l=Object.keys(r);c<l.length;c++){var h=l[c];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},T);function T(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var S=/\{\$([^}]+)}/g,E=(C.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},C.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},C.prototype.setServiceProps=function(t){return this.serviceProps=t,this},C);function C(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var I,_="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},A=A||{},D=_;function N(t){return"string"==typeof t}function k(t){return"number"==typeof t}function O(t,e){t=t.split("."),e=e||D;for(var n=0;n<t.length;n++)if(null==(e=e[t[n]]))return null;return e}function R(){}function x(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function M(t){return"array"==x(t)}function L(t){var e=x(t);return"array"==e||"object"==e&&"number"==typeof t.length}function P(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var F="closure_uid_"+(1e9*Math.random()>>>0),V=0;function B(t,e,n){return t.call.apply(t.bind,arguments)}function q(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function U(t,e,n){return(U=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?B:q).apply(null,arguments)}function j(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var K=Date.now||function(){return+new Date};function $(t,e){function n(){}n.prototype=e.prototype,t.N=e.prototype,t.prototype=new n,(t.prototype.constructor=t).xb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function W(){this.j=this.j,this.i=this.i}W.prototype.j=!1,W.prototype.la=function(){!this.j&&(this.j=!0,this.G(),0)&&(this[F]||(this[F]=++V))},W.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var z=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(N(t))return N(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Q=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=N(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function G(t){return Array.prototype.concat.apply([],arguments)}function H(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Y(t){return/^[\s\xa0]*$/.test(t)}var J,X=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Z(t,e){return-1!=t.indexOf(e)}function tt(t,e){return t<e?-1:e<t?1:0}t:{var et=D.navigator;if(et){var nt=et.userAgent;if(nt){J=nt;break t}}J=""}function rt(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function it(t){var e,n={};for(e in t)n[e]=t[e];return n}var ot="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function at(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<ot.length;o++)n=ot[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function st(t){return st[" "](t),t}st[" "]=R;var ut,ct,lt=Z(J,"Opera"),ht=Z(J,"Trident")||Z(J,"MSIE"),ft=Z(J,"Edge"),pt=ft||ht,dt=Z(J,"Gecko")&&!(Z(J.toLowerCase(),"webkit")&&!Z(J,"Edge"))&&!(Z(J,"Trident")||Z(J,"MSIE"))&&!Z(J,"Edge"),mt=Z(J.toLowerCase(),"webkit")&&!Z(J,"Edge");function yt(){var t=D.document;return t?t.documentMode:void 0}t:{var vt="",gt=(ct=J,dt?/rv:([^\);]+)(\)|;)/.exec(ct):ft?/Edge\/([\d\.]+)/.exec(ct):ht?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ct):mt?/WebKit\/(\S+)/.exec(ct):lt?/(?:Version)[ \/]?(\S+)/.exec(ct):void 0);if(gt&&(vt=gt?gt[1]:""),ht){var bt=yt();if(null!=bt&&bt>parseFloat(vt)){ut=String(bt);break t}}ut=vt}var wt,Tt={};function St(t){return e=t,n=Tt,Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=function(){for(var e=0,n=X(String(ut)).split("."),r=X(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=tt(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||tt(0==a[2].length,0==s[2].length)||tt(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}();var e,n}var Et=D.document;wt=Et&&ht?yt()||("CSS1Compat"==Et.compatMode?parseInt(ut,10):5):void 0;var Ct=!ht||9<=Number(wt),It=ht&&!St("9"),_t=function(){if(!D.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{D.addEventListener("test",R,e),D.removeEventListener("test",R,e)}catch(t){}return t}();function At(t,e){this.type=t,this.a=this.target=e,this.Ia=!0}function Dt(t,e){if(At.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(dt){t:{try{st(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=N(t.pointerType)?t.pointerType:Nt[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}At.prototype.b=function(){this.Ia=!1},$(Dt,At);var Nt={2:"touch",3:"pen",4:"mouse"};Dt.prototype.b=function(){Dt.N.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,It)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var kt="closure_listenable_"+(1e6*Math.random()|0),Ot=0;function Rt(t){t.X=!0,t.listener=null,t.proxy=null,t.src=null,t.da=null}function xt(t){this.src=t,this.a={},this.b=0}function Mt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=z(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Rt(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Lt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.X&&o.listener==e&&o.capture==!!n&&o.da==r)return i}return-1}xt.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=Lt(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):((e=new function(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.da=i,this.key=++Ot,this.X=this.Z=!1}(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Pt="closure_lm_"+(1e6*Math.random()|0),Ft={};function Vt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(M(n)){for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);return null}return r=zt(r),e&&e[kt]?e.Aa(n,r,P(i)?!!i.capture:!!i,o):Bt(e,n,r,!0,i,o)}(t,e,n,r,i);if(M(e)){for(var o=0;o<e.length;o++)Vt(t,e[o],n,r,i);return null}return n=zt(n),t&&t[kt]?t.za(e,n,P(r)?!!r.capture:!!r,i):Bt(t,e,n,!1,r,i)}function Bt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=P(i)?!!i.capture:!!i;if(a&&!Ct)return null;var s=$t(t);if(s||(t[Pt]=s=new xt(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=Kt,e=Ct?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),(n.proxy=r).src=t,r.listener=n,t.addEventListener)_t||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Ut(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function qt(t){if(!k(t)&&t&&!t.X){var e=t.src;if(e&&e[kt])Mt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Ut(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=$t(e))?(Mt(n,t),0==n.b&&(n.src=null,e[Pt]=null)):Rt(t)}}}function Ut(t){return t in Ft?Ft[t]:Ft[t]="on"+t}function jt(t,e){var n=t.listener,r=t.da||t.src;return t.Z&&qt(t),n.call(r,e)}function Kt(t,e){return!!t.X||jt(t,Ct?new Dt(e,this):e=new Dt(e||O("window.event"),this))}function $t(t){return(t=t[Pt])instanceof xt?t:null}var Wt="__closure_events_fn_"+(1e9*Math.random()>>>0);function zt(t){return"function"==x(t)?t:(t[Wt]||(t[Wt]=function(e){return t.handleEvent(e)}),t[Wt])}function Qt(){W.call(this),this.c=new xt(this),(this.J=this).B=null}function Gt(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.X&&a.capture==n){var s=a.listener,u=a.da||a.src;a.Z&&Mt(t.c,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Ia}$(Qt,W),Qt.prototype[kt]=!0,(I=Qt.prototype).addEventListener=function(t,e,n,r){Vt(this,t,e,n,r)},I.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(M(n))for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);else i=P(i)?!!i.capture:!!i,r=zt(r),e&&e[kt]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=Lt(a=e.a[n],r,i,o))&&(Rt(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete e.a[n],e.b--))):(e=e&&$t(e))&&(n=e.a[n.toString()],e=-1,n&&(e=Lt(n,r,i,o)),(r=-1<e?n[e]:null)&&qt(r))}(this,t,e,n,r)},I.dispatchEvent=function(t){var e,n=this.B;if(n)for(e=[];n;n=n.B)e.push(n);n=this.J;var r=t.type||t;if(N(t))t=new At(t,n);else if(t instanceof At)t.target=t.target||n;else{var i=t;at(t=new At(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.a=e[o];i=Gt(a,r,!0,t)&&i}if(i=Gt(a=t.a=n,r,!0,t)&&i,i=Gt(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Gt(a=t.a=e[o],r,!1,t)&&i;return i},I.G=function(){if(Qt.N.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Rt(n[r]);delete e.a[t],e.b--}}this.B=null},I.za=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},I.Aa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Ht=D.JSON.stringify;function Yt(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function Jt(){this.b=this.a=null}Yt.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var Xt,Zt=new Yt(function(){return new te},function(t){t.reset()});function te(){this.next=this.b=this.a=null}function ee(t){D.setTimeout(function(){throw t},0)}function ne(t,e){Xt||function(){var t=D.Promise.resolve(void 0);Xt=function(){t.then(oe)}}(),re||(Xt(),re=!0),ie.add(t,e)}Jt.prototype.add=function(t,e){var n=Zt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},te.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var re=!(te.prototype.reset=function(){this.next=this.b=this.a=null}),ie=new Jt;function oe(){for(var t;r=n=void 0,r=null,(n=ie).a&&(r=n.a,n.a=n.a.next,n.a||(n.b=null),r.next=null),t=r;){try{t.a.call(t.b)}catch(t){ee(t)}var e=Zt;e.f(t),e.b<100&&(e.b++,t.next=e.a,e.a=t)}var n,r;re=!1}function ae(t,e){Qt.call(this),this.b=t||1,this.a=e||D,this.f=U(this.fb,this),this.g=K()}function se(t){t.ba=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function ue(t,e,n){if("function"==x(t))n&&(t=U(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=U(t.handleEvent,t)}return 2147483647<Number(e)?-1:D.setTimeout(t,e||0)}function ce(t,e,n){W.call(this),this.f=null!=n?U(t,n):t,this.c=e,this.b=U(this.$a,this),this.a=[]}function le(t){t.U=ue(t.b,t.c),t.f.apply(null,t.a)}function he(t){W.call(this),this.b=t,this.a={}}$(ae,Qt),(I=ae.prototype).ba=!1,I.L=null,I.fb=function(){if(this.ba){var t=K()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(se(this),this.start()))}},I.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=K())},I.G=function(){ae.N.G.call(this),se(this),delete this.a},$(ce,W),(I=ce.prototype).ea=!1,I.U=null,I.Ta=function(t){this.a=arguments,this.U?this.ea=!0:le(this)},I.G=function(){ce.N.G.call(this),this.U&&(D.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},I.$a=function(){this.U=null,this.ea&&(this.ea=!1,le(this))},$(he,W);var fe=[];function pe(t,e,n,r){M(n)||(n&&(fe[0]=n.toString()),n=fe);for(var i=0;i<n.length;i++){var o=Vt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function de(t){rt(t.a,function(t,e){this.a.hasOwnProperty(e)&&qt(t)},t),t.a={}}he.prototype.G=function(){he.N.G.call(this),de(this)},he.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var me=new Qt;function ye(t){At.call(this,"serverreachability",t)}function ve(t){me.dispatchEvent(new ye(me,t))}function ge(t){At.call(this,"statevent",t)}function be(t){me.dispatchEvent(new ge(me,t))}function we(t){At.call(this,"timingevent",t)}function Te(t,e){if("function"!=x(t))throw Error("Fn must not be null and must be a function");return D.setTimeout(function(){t()},e)}$(ye,At),$(ge,At),$(we,At);var Se={NO_ERROR:0,gb:1,nb:2,mb:3,jb:4,lb:5,ob:6,La:7,TIMEOUT:8,rb:9},Ee={ib:"complete",vb:"success",Ma:"error",La:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",kb:"downloadprogress",wb:"uploadprogress"};function Ce(){}function Ie(t){var e;return(e=t.a)||(e=t.a={}),e}function _e(){}Ce.prototype.a=null;var Ae,De={OPEN:"a",hb:"b",Ma:"c",qb:"d"};function Ne(){At.call(this,"d")}function ke(){At.call(this,"c")}function Oe(){}function Re(t,e,n){this.g=t,this.W=e,this.V=n||1,this.I=new he(this),this.O=xe,t=pt?125:void 0,this.P=new ae(t),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}$(Ne,At),$(ke,At),$(Oe,Ce),Ae=new Oe;var xe=45e3,Me={},Le={};function Pe(t,e,n){t.F=1,t.f=un(tn(e)),t.l=n,t.H=!0,Ve(t,null)}function Fe(t,e,n,r){t.F=1,t.f=un(tn(e)),t.l=null,t.H=n,Ve(t,r)}function Ve(t,e){t.v=K(),Ue(t),t.D=tn(t.f),sn(t.D,"t",t.V),t.A=0,t.a=t.g.$(t.g.Y()?e:null),0<t.J&&(t.B=new ce(U(t.Ja,t,t.a),t.J)),pe(t.I,t.a,"readystatechange",t.cb),e=t.h?it(t.h):{},t.l?(t.w||(t.w="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ca(t.D,t.w,t.l,e)):(t.w="GET",t.a.ca(t.D,t.w,null,e)),ve(1)}function Be(t,e,n){for(var r=!0;!t.m&&t.A<n.length;){var i=qe(t,n);if(i==Le){4==e&&(t.c=4,be(14),r=!1);break}if(i==Me){t.c=4,be(15),r=!1;break}ze(t,i)}4==e&&0==n.length&&(t.c=1,be(16),r=!1),t.b=t.b&&r,r||(We(t),$e(t))}function qe(t,e){var n=t.A,r=e.indexOf("\n",n);return-1==r?Le:(n=Number(e.substring(n,r)),isNaN(n)?Me:(r+=1)+n>e.length?Le:(e=e.substr(r,n),t.A=r+n,e))}function Ue(t){t.R=K()+t.O,je(t,t.O)}function je(t,e){if(null!=t.i)throw Error("WatchDog timer not null");t.i=Te(U(t.ab,t),e)}function Ke(t){t.i&&(D.clearTimeout(t.i),t.i=null)}function $e(t){t.g.Ca()||t.m||t.g.na(t)}function We(t){Ke(t);var e=t.B;e&&"function"==typeof e.la&&e.la(),t.B=null,se(t.P),de(t.I),t.a&&(e=t.a,t.a=null,e.abort(),e.la())}function ze(t,e){try{t.g.Fa(t,e),ve(4)}catch(t){}}function Qe(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(L(t)||N(t))Q(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.C&&"function"==typeof t.C)n=void 0;else if(L(t)||N(t)){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.C&&"function"==typeof t.C)return t.C();if(N(t))return t.split("");if(L(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Ge(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ge)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function He(t,e){Je(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ye(t))}function Ye(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Je(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Je(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function Je(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(I=Re.prototype).setTimeout=function(t){this.O=t},I.cb=function(t){t=t.target;var e=this.B;e&&3==Jn(t)?e.Ta():this.Ja(t)},I.Ja=function(t){try{if(t==this.a)t:{var e=Jn(this.a),n=this.a.ya(),r=this.a.T();if(!(e<3||3==e&&!pt&&!this.a.aa())){this.m||4!=e||7==n||ve(8==n||r<=0?3:2),Ke(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){e:{if(this.a){var a=Xn(this.a,"X-HTTP-Initial-Response");if(a&&!Y(a)){var s=a;break e}}s=null}if(!s){this.b=!1,this.c=3,be(12),We(this),$e(this);break t}this.s=!0,ze(this,s)}this.H?(Be(this,e,o),pt&&this.b&&3==e&&(pe(this.I,this.P,"tick",this.bb),this.P.start())):ze(this,o),4==e&&We(this),this.b&&!this.m&&(4==e?this.g.na(this):(this.b=!1,Ue(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,be(12)):(this.c=0,be(13)),We(this),$e(this)}}}catch(t){}},I.bb=function(){if(this.a){var t=Jn(this.a),e=this.a.aa();this.A<e.length&&(Ke(this),Be(this,t,e),this.b&&4!=t&&Ue(this))}},I.cancel=function(){this.m=!0,We(this)},I.ab=function(){this.i=null;var t=K();0<=t-this.R?(2!=this.F&&(ve(3),be(17)),We(this),this.c=2,$e(this)):je(this,this.R-t)},(I=Ge.prototype).C=function(){Ye(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},I.K=function(){return Ye(this),this.a.concat()},I.get=function(t,e){return Je(this.b,t)?this.b[t]:e},I.set=function(t,e){Je(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},I.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Xe=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ze(t,e){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,t instanceof Ze?(this.h=void 0!==e?e:t.h,en(this,t.f),this.j=t.j,nn(this,t.b),rn(this,t.i),this.a=t.a,on(this,Sn(t.c)),this.g=t.g):t&&(n=String(t).match(Xe))?(this.h=!!e,en(this,n[1]||"",!0),this.j=cn(n[2]||""),nn(this,n[3]||"",!0),rn(this,n[4]),this.a=cn(n[5]||"",!0),on(this,n[6]||"",!0),this.g=cn(n[7]||"")):(this.h=!!e,this.c=new vn(null,this.h))}function tn(t){return new Ze(t)}function en(t,e,n){t.f=n?cn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function nn(t,e,n){t.b=n?cn(e,!0):e}function rn(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.i=e}else t.i=null}function on(t,e,n){e instanceof vn?(t.c=e,function(t,e){e&&!t.f&&(gn(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(bn(this,e),Tn(this,n,t))},t)),t.f=e}(t.c,t.h)):(n||(e=ln(e,mn)),t.c=new vn(e,t.h))}function an(t,e,n){t.c.set(e,n)}function sn(t,e,n){M(n)||(n=[String(n)]),Tn(t.c,e,n)}function un(t){return an(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^K()).toString(36)),t}function cn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ln(t,e,n){return N(t)?(t=encodeURI(t).replace(e,hn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function hn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ze.prototype.toString=function(){var t=[],e=this.f;e&&t.push(ln(e,fn,!0),":");var n=this.b;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(ln(e,fn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&t.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(ln(n,"/"==n.charAt(0)?dn:pn,!0))),(n=this.c.toString())&&t.push("?",n),(n=this.g)&&t.push("#",ln(n,yn)),t.join("")},Ze.prototype.resolve=function(t){var e=tn(this),n=!!t.f;n?en(e,t.f):n=!!t.j,n?e.j=t.j:n=!!t.b,n?nn(e,t.b):n=null!=t.i;var r=t.a;if(n)rn(e,t.i);else if(n=!!t.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=e.a.lastIndexOf("/");-1!=i&&(r=e.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(Z(i,"./")||Z(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.a=r:n=""!==t.c.toString(),n?on(e,Sn(t.c)):n=!!t.g,n&&(e.g=t.g),e};var fn=/[#\/\?@]/g,pn=/[#\?:]/g,dn=/[#\?]/g,mn=/[#\?@]/g,yn=/#/g;function vn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function gn(t){t.a||(t.a=new Ge,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function bn(t,e){gn(t),e=En(t,e),Je(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,He(t.a,e))}function wn(t,e){return gn(t),e=En(t,e),Je(t.a.b,e)}function Tn(t,e,n){bn(t,e),0<n.length&&(t.c=null,t.a.set(En(t,e),H(n)),t.b+=n.length)}function Sn(t){var e=new vn;return e.c=t.c,t.a&&(e.a=new Ge(t.a),e.b=t.b),e}function En(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Cn(t){this.a=t,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function In(t){var e=t.a.F.a;if(null!=e)be(4),e?(be(10),lr(t.a,t,!1)):(be(11),lr(t.a,t,!0));else{t.b=new Re(t,void 0,void 0),t.b.h=t.h,e=mr(e=t.a,e.Y()?t.f:null,t.i),be(4),sn(e,"TYPE","xmlhttp");var n=t.a.j,r=t.a.I;n&&r&&an(e,n,r),Fe(t.b,e,!1,t.f)}}function _n(){this.a=new Ge}function An(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[F]||(t[F]=++V)):e.charAt(0)+t}function Dn(t){this.g=t||Nn,t=D.PerformanceNavigationTiming?0<(t=D.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(D.ka&&D.ka.Da&&D.ka.Da()&&D.ka.Da().yb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new _n),this.b=null,this.c=[]}(I=vn.prototype).add=function(t,e){gn(this),this.c=null,t=En(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},I.forEach=function(t,e){gn(this),this.a.forEach(function(n,r){Q(n,function(n){t.call(e,n,r,this)},this)},this)},I.K=function(){gn(this);for(var t=this.a.C(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},I.C=function(t){gn(this);var e=[];if(N(t))wn(this,t)&&(e=G(e,this.a.get(En(this,t))));else{t=this.a.C();for(var n=0;n<t.length;n++)e=G(e,t[n])}return e},I.set=function(t,e){return gn(this),this.c=null,wn(this,t=En(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},I.get=function(t,e){return t&&0<(t=this.C(t)).length?String(t[0]):e},I.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")},$(function(){},function(){}),(I=Cn.prototype).M=null,I.$=function(t){return this.a.$(t)},I.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},I.Ca=function(){return!1},I.Fa=function(t,e){if(this.c=t.o,0==this.M){if(!this.a.o&&(t=t.a)){var n=Xn(t,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(t=Xn(t,"X-HTTP-Session-Id"))&&(this.a.I=t)}if(e){try{var r=this.a.ja.a.parse(e)}catch(t){return(e=this.a).m=this.c,void pr(e,2)}this.f=r[0]}else(e=this.a).m=this.c,pr(e,2)}else 1==this.M&&(this.g?be(6):"11111"==e?(be(5),this.g=!0,(!ht||10<=Number(wt))&&(this.c=200,this.b.cancel(),be(11),lr(this.a,this,!0))):(be(7),this.g=!1))},I.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,In(this)):1==this.M&&(this.g?(be(11),lr(this.a,this,!0)):(be(10),lr(this.a,this,!1)));else{0==this.M?be(8):1==this.M&&be(9);var t=this.a;t.m=this.c,pr(t,2)}},I.Y=function(){return this.a.Y()},I.ma=function(){return this.a.ma()},_n.prototype.add=function(t){this.a.set(An(t),t)},_n.prototype.C=function(){return this.a.C()};var Nn=10;function kn(t,e){!t.a&&(Z(e,"spdy")||Z(e,"quic")||Z(e,"h2"))&&(t.f=t.g,t.a=new _n,t.b&&(Mn(t,t.b),t.b=null))}function On(t){return!!t.b||!!t.a&&t.a.a.c>=t.f}function Rn(t){return t.b?1:t.a?t.a.a.c:0}function xn(t,e){return t.b?t.b==e:!!t.a&&(e=An(e),Je(t.a.a.b,e))}function Mn(t,e){t.a?t.a.add(e):t.b=e}function Ln(t,e){var n;t.b&&t.b==e?t.b=null:((n=t.a)&&(n=An(e),n=Je(t.a.a.b,n)),n&&He(t.a.a,An(e)))}function Pn(t){if(null!=t.b)return t.c.concat(t.b.j);if(null==t.a||0==t.a.a.c)return H(t.c);var e=t.c;return Q(t.a.C(),function(t){e=e.concat(t.j)}),e}function Fn(){}function Vn(t,e,n){var r=n||"";try{Qe(t,function(t,n){var i=t;P(t)&&(i=Ht(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function Bn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}Dn.prototype.cancel=function(){var t;this.c=Pn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(Q(this.a.C(),function(t){t.cancel()}),(t=this.a.a).b={},t.a.length=0,t.c=0)},Fn.prototype.stringify=function(t){return D.JSON.stringify(t,void 0)},Fn.prototype.parse=function(t){return D.JSON.parse(t,void 0)};var qn=D.JSON.parse;function Un(t){Qt.call(this),this.headers=new Ge,this.H=t||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=jn,this.D=this.F=!1}$(Un,Qt);var jn="",Kn=/^https?$/i,$n=["POST","PUT"];function Wn(t){return"content-type"==t.toLowerCase()}function zn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Qn(t),Hn(t)}function Qn(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Gn(t){if(t.b&&void 0!==A&&(!t.s[1]||4!=Jn(t)||2!=t.T()))if(t.l&&4==Jn(t))ue(t.Ea,0,t);else if(t.dispatchEvent("readystatechange"),4==Jn(t)){t.b=!1;try{var e,n=t.T();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.A).match(Xe)[1]||null;if(!o&&D.self&&D.self.location){var a=D.self.location.protocol;o=a.substr(0,a.length-1)}i=!Kn.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var s=2<Jn(t)?t.a.statusText:""}catch(t){s=""}t.f=s+" ["+t.T()+"]",Qn(t)}}finally{Hn(t)}}}function Hn(t,e){if(t.a){Yn(t);var n=t.a,r=t.s[0]?R:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function Yn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(D.clearTimeout(t.m),t.m=null)}function Jn(t){return t.a?t.a.readyState:0}function Xn(t,e){return t.a?t.a.getResponseHeader(e):null}function Zn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}if(r)return t;if(n=function(t){var e="";return rt(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),N(t)){if(e=encodeURIComponent(String(e)),e+=n=null!=n?"="+encodeURIComponent(String(n)):""){if((n=t.indexOf("#"))<0&&(n=t.length),(r=t.indexOf("?"))<0||n<r){r=n;var i=""}else i=t.substring(r+1,n);n=(t=[t.substr(0,r),i,t.substr(n)])[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return an(t,e,n),t}function tr(t){this.f=[],this.F=new function(){this.a=this.b=null},this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Qa=this.P=0,this.Oa=!!O("internalChannelParams.failFast",t),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Na=O("internalChannelParams.baseRetryDelayMs",t)||5e3,this.Ra=O("internalChannelParams.retryDelaySeedMs",t)||1e4,this.Pa=O("internalChannelParams.forwardChannelMaxRetries",t)||2,this.qa=O("internalChannelParams.forwardChannelRequestTimeoutMs",t)||2e4,this.Ka=t&&t.zb||void 0,this.D=void 0,this.R=t&&t.supportsCrossDomainXhr||!1,this.H="",this.b=new Dn(t&&t.concurrentRequestLimit),this.ja=new function(){this.a=new Fn},this.o=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,(this.W=t&&t.fastHandshake||!1)&&!this.o&&(this.o=!0),t&&t.forceLongPolling&&(this.oa=!1),this.fa=void 0}function er(t){if(nr(t),3==t.u){var e=t.P++,n=tn(t.B);an(n,"SID",t.H),an(n,"RID",e),an(n,"TYPE","terminate"),ar(t,n),(e=new Re(t,e,void 0)).F=2,e.f=un(tn(n)),n=!1,D.navigator&&D.navigator.sendBeacon&&(n=D.navigator.sendBeacon(e.f.toString(),"")),!n&&D.Image&&((new Image).src=e.f,n=!0),n||(e.a=e.g.$(null),e.a.ca(e.f)),e.v=K(),Ue(e)}dr(t)}function nr(t){t.w&&(t.w.abort(),t.w=null),t.a&&(t.a.cancel(),t.a=null),t.l&&(D.clearTimeout(t.l),t.l=null),hr(t),t.b.cancel(),t.h&&(k(t.h)&&D.clearTimeout(t.h),t.h=null)}function rr(t,e){t.f.push(new function(t,e){this.b=t,this.a=e}(t.Qa++,e)),3==t.u&&ir(t)}function ir(t){On(t.b)||t.h||(t.h=!0,ne(t.Ha,t),t.A=0)}function or(t,e){var n;n=e?e.W:t.P++;var r=tn(t.B);an(r,"SID",t.H),an(r,"RID",n),an(r,"AID",t.O),ar(t,r),t.g&&t.i&&Zn(r,t.g,t.i),n=new Re(t,n,t.A+1),null===t.g&&(n.h=t.i),e&&(t.f=e.j.concat(t.f)),e=sr(t,n,1e3),n.setTimeout(Math.round(.5*t.qa)+Math.round(.5*t.qa*Math.random())),Mn(t.b,n),Pe(n,r,e)}function ar(t,e){t.c&&Qe({},function(t,n){an(e,n,t)})}function sr(t,e,n){n=Math.min(t.f.length,n);var r=t.c?U(t.c.Sa,t.c,t):null;t:for(var i=t.f,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),s=!1;else try{Vn(l,a,"req"+c+"_")}catch(t){r&&r(l)}}if(s){r=a.join("&");break t}}return t=t.f.splice(0,n),e.j=t,r}function ur(t){t.a||t.l||(t.S=1,ne(t.Ga,t),t.v=0)}function cr(t){return!(t.a||t.l||3<=t.v||(t.S++,t.l=Te(U(t.Ga,t),fr(t,t.v)),t.v++,0))}function lr(t,e,n){var r=e.l;r&&kn(t.b,r),t.ia=t.oa&&n,t.m=e.c,t.B=mr(t,null,t.ha),ir(t)}function hr(t){null!=t.s&&(D.clearTimeout(t.s),t.s=null)}function fr(t,e){var n=t.Na+Math.floor(Math.random()*t.Ra);return t.ma()||(n*=2),n*e}function pr(t,e){if(2==e){var n=null;t.c&&(n=null);var r=U(t.eb,t);n||(n=new Ze("//www.google.com/images/cleardot.gif"),D.location&&"http"==D.location.protocol||en(n,"https"),un(n)),function(t,e){var n=new function(){};if(D.Image){var r=new Image;r.onload=j(Bn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=j(Bn,n,r,"TestLoadImage: error",!1,e),r.onabort=j(Bn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=j(Bn,n,r,"TestLoadImage: timeout",!1,e),D.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else be(2);t.u=0,t.c&&t.c.ta(e),dr(t),nr(t)}function dr(t){t.u=0,t.m=-1,t.c&&(0==Pn(t.b).length&&0==t.f.length||(t.b.c.length=0,H(t.f),t.f.length=0),t.c.sa())}function mr(t,e,n){var r=function(t){return t instanceof Ze?tn(t):new Ze(t,void 0)}(n);if(""!=r.b)e&&nn(r,e+"."+r.b),rn(r,r.i);else{var i,o=D.location;i=e?e+"."+o.hostname:o.hostname,r=function(t,e,n,r){var i=new Ze(null,void 0);return t&&en(i,t),e&&nn(i,e),n&&rn(i,n),r&&(i.a=r),i}(o.protocol,i,+o.port,n)}return t.V&&rt(t.V,function(t,e){an(r,e,t)}),e=t.j,n=t.I,e&&n&&an(r,e,n),an(r,"VER",t.wa),ar(t,r),r}function yr(){}function vr(){if(ht&&!(10<=Number(wt)))throw Error("Environmental error: no available transport.")}function gr(t,e){Qt.call(this),this.a=new tr(e),this.g=t,this.m=e&&e.testUrl?e.testUrl:function(t){for(var e=t,n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?e=i:((r=""==e)||(r=0<=(r=e.length-1)&&e.indexOf("/",r)==r),e+=r?i:"/"+i)}return e}(this.g,"test"),this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.i=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.xa&&(t?t["X-WebChannel-Client-Profile"]=e.xa:t={"X-WebChannel-Client-Profile":e.xa}),this.a.J=t,(t=e&&e.httpHeadersOverwriteParam)&&!Y(t)&&(this.a.g=t),this.l=e&&e.supportsCrossDomainXhr||!1,this.h=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Y(e)&&(this.a.j=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Tr(this)}function br(t){Ne.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function wr(){ke.call(this),this.status=1}function Tr(t){this.a=t}(I=Un.prototype).ca=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+t);e=e?e.toUpperCase():"GET",this.A=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?Ie(this.H):Ie(Ae),this.a.onreadystatechange=U(this.Ea,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(t){return void zn(this,t)}t=n||"";var i=new Ge(this.headers);r&&Qe(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Wn,n=t.length,r=N(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:N(t)?t.charAt(e):t[e]}(i.K()),n=D.FormData&&t instanceof D.FormData,0<=z($n,e)&&!r&&!n&&i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Yn(this),0<this.o&&((this.D=function(t){return ht&&St(9)&&k(t.timeout)&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=U(this.Ba,this)):this.m=ue(this.Ba,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){zn(this,t)}},I.Ba=function(){void 0!==A&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},I.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Hn(this))},I.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Hn(this,!0)),Un.N.G.call(this)},I.Ea=function(){this.j||(this.w||this.l||this.g?Gn(this):this.Za())},I.Za=function(){Gn(this)},I.T=function(){try{return 2<Jn(this)?this.a.status:-1}catch(t){return-1}},I.aa=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},I.Ua=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),qn(e)}},I.ya=function(){return this.h},I.Xa=function(){return N(this.f)?this.f:String(this.f)},(I=tr.prototype).wa=8,I.u=1,I.Ca=function(){return 0==this.u},I.Ha=function(t){if(this.h)if(this.h=null,1==this.u){if(!t){this.P=Math.floor(1e5*Math.random());var e,n=new Re(this,t=this.P++,void 0),r=this.i;if(this.J&&(r?at(r=it(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)t:{for(var i=e=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&N(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=sr(this,n,e),an(i=tn(this.B),"RID",t),an(i,"CVER",22),this.o&&this.j&&an(i,"X-HTTP-Session-Id",this.j),ar(this,i),this.g&&r&&Zn(i,this.g,r),Mn(this.b,n),this.W?(an(i,"$req",e),an(i,"SID","null"),n.S=!0,Pe(n,i,null)):Pe(n,i,e),this.u=2}}else 3==this.u&&(t?or(this,t):0==this.f.length||On(this.b)||or(this))},I.Ga=function(){this.l=null,this.a=new Re(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var t=tn(this.pa);an(t,"RID","rpc"),an(t,"SID",this.H),an(t,"CI",this.ia?"0":"1"),an(t,"AID",this.O),ar(this,t),an(t,"TYPE","xmlhttp"),this.g&&this.i&&Zn(t,this.g,this.i),this.D&&this.a.setTimeout(this.D),Fe(this.a,t,!0,this.ga)},I.Fa=function(t,e){if(0!=this.u&&(this.a==t||xn(this.b,t)))if(this.m=t.o,!t.s&&xn(this.b,t)&&3==this.u){try{var n=this.ja.a.parse(e)}catch(t){n=null}if(M(n)&&3==n.length){if(0==(e=n)[0]){t:if(!this.l){if(this.a){if(!(this.a.v+3e3<t.v))break t;hr(this),this.a.cancel(),this.a=null}cr(this),be(18)}}else this.ra=e[1],0<this.ra-this.O&&e[2]<37500&&this.ia&&0==this.v&&!this.s&&(this.s=Te(U(this.Ya,this),6e3));if(Rn(this.b)<=1&&this.fa){try{this.fa()}catch(t){}this.fa=void 0}}else pr(this,11)}else if(!t.s&&this.a!=t||hr(this),!Y(e))for(e=n=this.ja.a.parse(e),n=0;n<e.length;n++){var r=e[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&k(r)&&0<r&&(this.D=1.5*r),this.o&&(r=t.a)&&((i=Xn(r,"X-Client-Wire-Protocol"))&&kn(this.b,i),this.j&&(r=Xn(r,"X-HTTP-Session-Id")))&&(this.I=r,an(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=t,this.pa=mr(this,this.Y()?this.ga:null,this.ha),r.s?(Ln(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(Ke(r),Ue(r)),this.a=r):ur(this),0<this.f.length&&ir(this)}else"stop"!=r[0]&&"close"!=r[0]||pr(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?pr(this,7):er(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},I.Ya=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,cr(this),be(19))},I.na=function(t){var e=null;if(this.a==t){hr(this),this.a=null;var n=2}else{if(!xn(this.b,t))return;e=t.j,Ln(this.b,t),n=1}if(this.m=t.o,0!=this.u)if(t.b)1==n?(e=K()-t.v,me.dispatchEvent(new we(me,t.l?t.l.length:0,e,this.A)),ir(this)):ur(this);else{var r=t.c;if(3==r||0==r&&0<this.m||!(1==n&&function(t,e){return!(Rn(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.f=e.j.concat(t.f),0):1==t.u||2==t.u||t.A>=(t.Oa?0:t.Pa)||(t.h=Te(U(t.Ha,t,e),fr(t,t.A)),t.A++,0)))}(this,t)||2==n&&cr(this)))switch(e&&0<e.length&&(t=this.b,t.c=t.c.concat(e)),r){case 1:pr(this,5);break;case 4:pr(this,10);break;case 3:pr(this,6);break;default:pr(this,2)}}},I.eb=function(t){be(t?2:1)},I.$=function(t){if(t&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Un(this.Ka)).F=this.R,t},I.ma=function(){return!!this.c&&!0},I.Y=function(){return this.R},(I=yr.prototype).va=function(){},I.ua=function(){},I.ta=function(){},I.sa=function(){},I.Sa=function(){},vr.prototype.a=function(t,e){return new gr(t,e)},$(gr,Qt),(I=gr.prototype).addEventListener=function(t,e,n,r){gr.N.addEventListener.call(this,t,e,n,r)},I.removeEventListener=function(t,e,n,r){gr.N.removeEventListener.call(this,t,e,n,r)},I.Va=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var t=this.a,e=this.m,n=this.g,r=this.b||void 0;be(0),t.ha=n,t.V=r||{},t.o&&(t.F.b=[],t.F.a=!1),t.w=new Cn(t),null===t.g&&(t.w.h=t.i),n=e,t.g&&t.i&&(n=Zn(e,t.g,t.i)),(t=t.w).i=n,e=mr(t.a,null,t.i),be(3),null!=(n=t.a.F.b)?(t.f=n[0],t.M=1,In(t)):(sn(e,"MODE","init"),!t.a.o&&t.a.j&&sn(e,"X-HTTP-Session-Id",t.a.j),t.b=new Re(t,void 0,void 0),t.b.h=t.h,Fe(t.b,e,!1,null),t.M=0)},I.close=function(){er(this.a)},I.Wa=function(t){if(N(t)){var e={};e.__data__=t,rr(this.a,e)}else this.h?((e={}).__data__=Ht(t),rr(this.a,e)):rr(this.a,t)},I.G=function(){this.a.c=null,delete this.f,er(this.a),delete this.a,gr.N.G.call(this)},$(br,Ne),$(wr,ke),$(Tr,yr),Tr.prototype.va=function(){this.a.dispatchEvent("a")},Tr.prototype.ua=function(t){this.a.dispatchEvent(new br(t))},Tr.prototype.ta=function(t){this.a.dispatchEvent(new wr(t))},Tr.prototype.sa=function(){this.a.dispatchEvent("b")};var Sr=j(function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r},vr);vr.prototype.createWebChannel=vr.prototype.a,gr.prototype.send=gr.prototype.Wa,gr.prototype.open=gr.prototype.Va,gr.prototype.close=gr.prototype.close,Se.NO_ERROR=0,Se.TIMEOUT=8,Se.HTTP_ERROR=6,Ee.COMPLETE="complete",(_e.EventType=De).OPEN="a",De.CLOSE="b",De.ERROR="c",De.MESSAGE="d",Qt.prototype.listen=Qt.prototype.za,Un.prototype.listenOnce=Un.prototype.Aa,Un.prototype.getLastError=Un.prototype.Xa,Un.prototype.getLastErrorCode=Un.prototype.ya,Un.prototype.getStatus=Un.prototype.T,Un.prototype.getResponseJson=Un.prototype.Ua,Un.prototype.getResponseText=Un.prototype.aa,Un.prototype.send=Un.prototype.ca;var Er,Cr,Ir={createWebChannelTransport:Sr,ErrorCode:Se,EventType:Ee,WebChannel:_e,XhrIo:Un},_r=Ir.createWebChannelTransport,Ar=Ir.ErrorCode,Dr=Ir.EventType,Nr=Ir.WebChannel,kr=Ir.XhrIo,Or=n.SDK_VERSION,Rr=new d("@firebase/firestore");function xr(){return Rr.logLevel===o.DEBUG?Er.DEBUG:Rr.logLevel===o.SILENT?Er.SILENT:Er.ERROR}function Mr(t){switch(t){case Er.DEBUG:Rr.logLevel=o.DEBUG;break;case Er.ERROR:Rr.logLevel=o.ERROR;break;case Er.SILENT:Rr.logLevel=o.SILENT;break;default:Rr.error("Firestore ("+Or+"): Invalid value passed to `setLogLevel`")}}function Lr(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(Rr.logLevel<=o.DEBUG){var i=n.map(Fr);Rr.debug.apply(Rr,l(["Firestore ("+Or+") ["+t+"]: "+e],i))}}function Pr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Rr.logLevel<=o.ERROR){var r=e.map(Fr);Rr.error.apply(Rr,l(["Firestore ("+Or+"): "+t],r))}}function Fr(t){if("string"==typeof t)return t;var e=qr.getPlatform();try{return e.formatJSON(t)}catch(e){return t}}function Vr(t){var e="FIRESTORE ("+Or+") INTERNAL ASSERTION FAILED: "+t;throw Pr(e),new Error(e)}function Br(t,e){t||Vr(e)}(Cr=Er=Er||{})[Cr.DEBUG=0]="DEBUG",Cr[Cr.ERROR=1]="ERROR",Cr[Cr.SILENT=2]="SILENT";var qr=(Ur.setPlatform=function(t){Ur.platform&&Vr("Platform already defined"),Ur.platform=t},Ur.getPlatform=function(){return Ur.platform||Vr("Platform not set"),Ur.platform},Ur);function Ur(){}function jr(){return qr.getPlatform().emptyByteString}var Kr,$r={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Wr=(i(zr,Kr=Error),zr);function zr(t,e){var n=Kr.call(this,e)||this;return n.code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function Qr(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new Wr($r.INVALID_ARGUMENT,t)}for(var r in n.prototype=t.prototype,t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}function Gr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Hr(t,e){return void 0!==t?t:e}function Yr(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Number(n);isNaN(r)||e(r,t[n])}}function Jr(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Xr(t){for(var e in Br(null!=t&&"object"==typeof t,"isEmpty() expects object parameter."),t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Zr(t,e){if(0!==e.length)throw new Wr($r.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+yi(e.length,"argument")+".")}function ti(t,e,n){if(e.length!==n)throw new Wr($r.INVALID_ARGUMENT,"Function "+t+"() requires "+yi(n,"argument")+", but was called with "+yi(e.length,"argument")+".")}function ei(t,e,n){if(e.length<n)throw new Wr($r.INVALID_ARGUMENT,"Function "+t+"() requires at least "+yi(n,"argument")+", but was called with "+yi(e.length,"argument")+".")}function ni(t,e,n,r){if(e.length<n||e.length>r)throw new Wr($r.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+yi(e.length,"argument")+".")}function ri(t,e,n,r){ui(t,e,mi(n)+" argument",r)}function ii(t,e,n,r){void 0!==r&&ri(t,e,n,r)}function oi(t,e,n,r){ui(t,e,n+" option",r)}function ai(t,e,n,r){void 0!==r&&oi(t,e,n,r)}function si(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(li(u))}var c=li(r);throw new Wr($r.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function ui(t,e,n,r){if(!("object"===e?ci(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=li(r);throw new Wr($r.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function ci(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function li(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return 20<t.length&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"!=typeof t)return"function"==typeof t?"a function":Vr("Unknown wrong type: "+typeof t);if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&1<e.length)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}function hi(t,e,n){if(void 0===n)throw new Wr($r.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+mi(e)+" argument, but it was undefined.")}function fi(t,e,n){Jr(e,function(e,r){if(n.indexOf(e)<0)throw new Wr($r.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))})}function pi(t,e,n,r){var i=li(r);return new Wr($r.INVALID_ARGUMENT,"Function "+t+"() requires its "+mi(n)+" argument to be a "+e+", but it was: "+i)}function di(t,e,n){if(n<=0)throw new Wr($r.INVALID_ARGUMENT,'Function "'+t+'()" requires its '+mi(e)+" argument to be a positive number, but it was: "+n+".")}function mi(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function yi(t,e){return t+" "+e+(1===t?"":"s")}var vi=(gi.newId=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return Br(20===e.length,"Invalid auto ID: "+e),e},gi);function gi(){}function bi(t,e){return t<e?-1:e<t?1:0}function wi(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].isEqual(e[n]))return!1;return!0}function Ti(t){return t+"\0"}function Si(){if("undefined"==typeof Uint8Array)throw new Wr($r.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Ei(){if(!qr.getPlatform().base64Available)throw new Wr($r.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Ci=(Ii.fromBase64String=function(t){ti("Blob.fromBase64String",arguments,1),ri("Blob.fromBase64String","string",1,t),Ei();try{return new Ii(qr.getPlatform().atob(t))}catch(t){throw new Wr($r.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},Ii.fromUint8Array=function(t){if(ti("Blob.fromUint8Array",arguments,1),Si(),!(t instanceof Uint8Array))throw pi("Blob.fromUint8Array","Uint8Array",1,t);return new Ii(Array.prototype.map.call(t,function(t){return String.fromCharCode(t)}).join(""))},Ii.prototype.toBase64=function(){return ti("Blob.toBase64",arguments,0),Ei(),qr.getPlatform().btoa(this._binaryString)},Ii.prototype.toUint8Array=function(){ti("Blob.toUint8Array",arguments,0),Si();for(var t=new Uint8Array(this._binaryString.length),e=0;e<this._binaryString.length;e++)t[e]=this._binaryString.charCodeAt(e);return t},Ii.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},Ii.prototype.isEqual=function(t){return this._binaryString===t._binaryString},Ii.prototype._compareTo=function(t){return bi(this._binaryString,t._binaryString)},Ii);function Ii(t){Ei(),this._binaryString=t}var _i=Qr(Ci,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),Ai="(default)",Di=(Object.defineProperty(Ni.prototype,"isDefaultDatabase",{get:function(){return this.database===Ai},enumerable:!0,configurable:!0}),Ni.prototype.isEqual=function(t){return t instanceof Ni&&t.projectId===this.projectId&&t.database===this.database},Ni.prototype.compareTo=function(t){return bi(this.projectId,t.projectId)||bi(this.database,t.database)},Ni);function Ni(t,e){this.projectId=t,this.database=e||Ai}var ki=(Oi.prototype.setPreviousValue=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},Oi.prototype.next=function(){var t=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(t),t},Oi.INVALID=-1,Oi);function Oi(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.setPreviousValue(t)},this.writeNewSequenceNumber=function(t){return e.writeSequenceNumber(t)})}var Ri="__name__",xi=(Object.defineProperty(Mi.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),Mi.prototype.isEqual=function(t){return 0===Mi.comparator(this,t)},Mi.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof Mi?t.forEach(function(t){e.push(t)}):e.push(t),this.construct(e)},Mi.prototype.limit=function(){return this.offset+this.length},Mi.prototype.popFirst=function(t){return t=void 0===t?1:t,Br(this.length>=t,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+t,this.length-t)},Mi.prototype.popLast=function(){return Br(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},Mi.prototype.firstSegment=function(){return Br(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},Mi.prototype.lastSegment=function(){return this.get(this.length-1)},Mi.prototype.get=function(t){return Br(t<this.length,"Index out of range"),this.segments[this.offset+t]},Mi.prototype.isEmpty=function(){return 0===this.length},Mi.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Mi.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Mi.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},Mi.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},Mi.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},Mi);function Mi(t,e,n){void 0===e?e=0:e>t.length&&Vr("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&Vr("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=n}var Li,Pi=(i(Fi,Li=xi),Fi.prototype.construct=function(t,e,n){return new Fi(t,e,n)},Fi.prototype.canonicalString=function(){return this.toArray().join("/")},Fi.prototype.toString=function(){return this.canonicalString()},Fi.fromString=function(t){if(0<=t.indexOf("//"))throw new Wr($r.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new Fi(t.split("/").filter(function(t){return 0<t.length}))},Fi.EMPTY_PATH=new Fi([]),Fi);function Fi(){return null!==Li&&Li.apply(this,arguments)||this}var Vi,Bi=/^[_a-zA-Z][_a-zA-Z0-9]*$/,qi=(i(Ui,Vi=xi),Ui.prototype.construct=function(t,e,n){return new Ui(t,e,n)},Ui.isValidIdentifier=function(t){return Bi.test(t)},Ui.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),Ui.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},Ui.prototype.toString=function(){return this.canonicalString()},Ui.prototype.isKeyField=function(){return 1===this.length&&this.get(0)===Ri},Ui.keyField=function(){return new Ui([Ri])},Ui.fromServerFormat=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new Wr($r.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var a=t[r];if("\\"===a){if(r+1===t.length)throw new Wr($r.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var s=t[r+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Wr($r.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=s,r+=2}else"`"===a?o=!o:"."!==a||o?n+=a:i(),r++}if(i(),o)throw new Wr($r.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ui(e)},Ui.EMPTY_PATH=new Ui([]),Ui);function Ui(){return null!==Vi&&Vi.apply(this,arguments)||this}var ji=(Ki.prototype.hasCollectionId=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},Ki.prototype.isEqual=function(t){return null!==t&&0===Pi.comparator(this.path,t.path)},Ki.prototype.toString=function(){return this.path.toString()},Ki.comparator=function(t,e){return Pi.comparator(t.path,e.path)},Ki.isDocumentKey=function(t){return t.length%2==0},Ki.fromSegments=function(t){return new Ki(new Pi(t.slice()))},Ki.fromPathString=function(t){return new Ki(Pi.fromString(t))},Ki.EMPTY=new Ki(new Pi([])),Ki);function Ki(t){this.path=t,Br(Ki.isDocumentKey(t),"Invalid DocumentKey with an odd number of segments: "+t.toArray().join("/"))}var $i,Wi,zi=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})};(Wi=$i=$i||{}).All="all",Wi.ListenStreamIdle="listen_stream_idle",Wi.ListenStreamConnectionBackoff="listen_stream_connection_backoff",Wi.WriteStreamIdle="write_stream_idle",Wi.WriteStreamConnectionBackoff="write_stream_connection_backoff",Wi.OnlineStateTimeout="online_state_timeout",Wi.ClientMetadataRefresh="client_metadata_refresh",Wi.LruGarbageCollection="lru_garbage_collection",Wi.RetryTransaction="retry_transaction";var Qi=(Gi.createAndSchedule=function(t,e,n,r,i){var o=new Gi(t,e,Date.now()+n,r,i);return o.start(n),o},Gi.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},Gi.prototype.skipDelay=function(){return this.handleDelayElapsed()},Gi.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Wr($r.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},Gi.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},Gi.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},Gi);function Gi(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new zi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}var Hi=(Object.defineProperty(Yi.prototype,"isShuttingDown",{get:function(){return this._isShuttingDown},enumerable:!0,configurable:!0}),Yi.prototype.enqueueAndForget=function(t){this.enqueue(t)},Yi.prototype.enqueueAndForgetEvenAfterShutdown=function(t){this.verifyNotFailed(),this.enqueueInternal(t)},Yi.prototype.enqueueEvenAfterShutdown=function(t){return this.verifyNotFailed(),this.enqueueInternal(t)},Yi.prototype.enqueueAndInitiateShutdown=function(t){return u(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return this.verifyNotFailed(),this._isShuttingDown?[3,2]:(this._isShuttingDown=!0,[4,this.enqueueEvenAfterShutdown(t)]);case 1:e.sent(),e.label=2;case 2:return[2]}})})},Yi.prototype.enqueue=function(t){return this.verifyNotFailed(),this._isShuttingDown?new Promise(function(t){}):this.enqueueInternal(t)},Yi.prototype.enqueueInternal=function(t){var e=this,n=this.tail.then(function(){return e.operationInProgress=!0,t().catch(function(t){e.failure=t,e.operationInProgress=!1;var n=t.stack||t.message||"";throw Pr("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw t},0),t}).then(function(t){return e.operationInProgress=!1,t})});return this.tail=n},Yi.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.verifyNotFailed(),Br(0<=e,"Attempted to schedule an operation with a negative delay of "+e),-1<this.timerIdsToSkip.indexOf(t)&&(e=0);var i=Qi.createAndSchedule(this,t,e,n,function(t){return r.removeDelayedOperation(t)});return this.delayedOperations.push(i),i},Yi.prototype.verifyNotFailed=function(){this.failure&&Vr("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},Yi.prototype.verifyOperationInProgress=function(){Br(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},Yi.prototype.drain=function(){return this.enqueueEvenAfterShutdown(function(){return Promise.resolve()})},Yi.prototype.containsDelayedOperation=function(t){for(var e=0,n=this.delayedOperations;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},Yi.prototype.runDelayedOperationsEarly=function(t){var e=this;return this.drain().then(function(){Br(t===$i.All||e.containsDelayedOperation(t),"Attempted to drain to missing operation "+t),e.delayedOperations.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),t!==$i.All&&i.timerId===t)break}return e.drain()})},Yi.prototype.skipDelaysForTimerId=function(t){this.timerIdsToSkip.push(t)},Yi.prototype.removeDelayedOperation=function(t){var e=this.delayedOperations.indexOf(t);Br(0<=e,"Delayed operation not found."),this.delayedOperations.splice(e,1)},Yi);function Yi(){this.tail=Promise.resolve(),this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.timerIdsToSkip=[]}var Ji="",Xi="",Zi="",to="";function eo(t){for(var e="",n=0;n<t.length;n++)0<e.length&&(e=ro(e)),e=no(t.get(n),e);return ro(e)}function no(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+=Ji+Zi;break;case Ji:n+=Ji+to;break;default:n+=o}}return n}function ro(t){return t+Ji+Xi}function io(t){var e=t.length;if(Br(2<=e,"Invalid path "+t),2===e)return Br(t.charAt(0)===Ji&&t.charAt(1)===Xi,"Non-empty path "+t+" had length 2"),Pi.EMPTY_PATH;for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf(Ji,o);switch((a<0||n<a)&&Vr('Invalid encoded resource path: "'+t+'"'),t.charAt(a+1)){case Xi:var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case Zi:i+=t.substring(o,a),i+="\0";break;case to:i+=t.substring(o,a+1);break;default:Vr('Invalid encoded resource path: "'+t+'"')}o=a+2}return new Pi(r)}var oo=(ao.now=function(){return ao.fromMillis(Date.now())},ao.fromDate=function(t){return ao.fromMillis(t.getTime())},ao.fromMillis=function(t){var e=Math.floor(t/1e3);return new ao(e,1e6*(t-1e3*e))},ao.prototype.toDate=function(){return new Date(this.toMillis())},ao.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},ao.prototype._compareTo=function(t){return this.seconds===t.seconds?bi(this.nanoseconds,t.nanoseconds):bi(this.seconds,t.seconds)},ao.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},ao.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},ao);function ao(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new Wr($r.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new Wr($r.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Wr($r.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new Wr($r.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}var so=(uo.fromMicroseconds=function(t){var e=Math.floor(t/1e6);return new uo(new oo(e,t%1e6*1e3))},uo.fromTimestamp=function(t){return new uo(t)},uo.forDeletedDoc=function(){return uo.MIN},uo.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},uo.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},uo.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},uo.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},uo.prototype.toTimestamp=function(){return this.timestamp},uo.MIN=new uo(new oo(0,0)),uo);function uo(t){this.timestamp=t}var co=(lo.prototype.insert=function(t,e){return new lo(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,po.BLACK,null,null))},lo.prototype.remove=function(t){return new lo(this.comparator,this.root.remove(t,this.comparator).copy(null,null,po.BLACK,null,null))},lo.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},lo.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},lo.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(lo.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),lo.prototype.minKey=function(){return this.root.minKey()},lo.prototype.maxKey=function(){return this.root.maxKey()},lo.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},lo.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},lo.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},lo.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},lo.prototype.getIterator=function(){return new ho(this.root,null,this.comparator,!1)},lo.prototype.getIteratorFrom=function(t){return new ho(this.root,t,this.comparator,!1)},lo.prototype.getReverseIterator=function(){return new ho(this.root,null,this.comparator,!0)},lo.prototype.getReverseIteratorFrom=function(t){return new ho(this.root,t,this.comparator,!0)},lo);function lo(t,e){this.comparator=t,this.root=e||po.EMPTY}var ho=(fo.prototype.getNext=function(){Br(0<this.nodeStack.length,"getNext() called on iterator when hasNext() is false.");var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},fo.prototype.hasNext=function(){return 0<this.nodeStack.length},fo.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},fo);function fo(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}var po=(mo.prototype.copy=function(t,e,n,r,i){return new mo(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},mo.prototype.isEmpty=function(){return!1},mo.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},mo.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},mo.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},mo.prototype.minKey=function(){return this.min().key},mo.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},mo.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},mo.prototype.removeMin=function(){if(this.left.isEmpty())return mo.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},mo.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return mo.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()},mo.prototype.isRed=function(){return this.color},mo.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},mo.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},mo.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},mo.prototype.rotateLeft=function(){var t=this.copy(null,null,mo.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},mo.prototype.rotateRight=function(){var t=this.copy(null,null,mo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},mo.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},mo.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},mo.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Vr("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw Vr("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check();if(t!==this.right.check())throw Vr("Black depths differ");return t+(this.isRed()?0:1)},mo.EMPTY=null,mo.RED=!0,mo.BLACK=!1,mo);function mo(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:mo.RED,this.left=null!=r?r:mo.EMPTY,this.right=null!=i?i:mo.EMPTY,this.size=this.left.size+1+this.right.size}var yo=(Object.defineProperty(vo.prototype,"key",{get:function(){throw Vr("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(vo.prototype,"value",{get:function(){throw Vr("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(vo.prototype,"color",{get:function(){throw Vr("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(vo.prototype,"left",{get:function(){throw Vr("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(vo.prototype,"right",{get:function(){throw Vr("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),vo.prototype.copy=function(t,e,n,r,i){return this},vo.prototype.insert=function(t,e,n){return new po(t,e)},vo.prototype.remove=function(t,e){return this},vo.prototype.isEmpty=function(){return!0},vo.prototype.inorderTraversal=function(t){return!1},vo.prototype.reverseTraversal=function(t){return!1},vo.prototype.minKey=function(){return null},vo.prototype.maxKey=function(){return null},vo.prototype.isRed=function(){return!1},vo.prototype.checkMaxDepth=function(){return!0},vo.prototype.check=function(){return 0},vo);function vo(){this.size=0}po.EMPTY=new yo;var go=(bo.fromMapKeys=function(t){var e=new bo(t.comparator);return t.forEach(function(t){e=e.add(t)}),e},bo.prototype.has=function(t){return null!==this.data.get(t)},bo.prototype.first=function(){return this.data.minKey()},bo.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(bo.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),bo.prototype.indexOf=function(t){return this.data.indexOf(t)},bo.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},bo.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(0<=this.comparator(r.key,t[1]))return;e(r.key)}},bo.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},bo.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},bo.prototype.getIterator=function(){return new wo(this.data.getIterator())},bo.prototype.getIteratorFrom=function(t){return new wo(this.data.getIteratorFrom(t))},bo.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},bo.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},bo.prototype.isEmpty=function(){return this.data.isEmpty()},bo.prototype.unionWith=function(t){var e=this;return t.forEach(function(t){e=e.add(t)}),e},bo.prototype.isEqual=function(t){if(!(t instanceof bo))return!1;if(this.size!==t.size)return!1;for(var e=this.data.getIterator(),n=t.data.getIterator();e.hasNext();){var r=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(r,i))return!1}return!0},bo.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},bo.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},bo.prototype.copy=function(t){var e=new bo(this.comparator);return e.data=t,e},bo);function bo(t){this.comparator=t,this.data=new co(this.comparator)}var wo=(To.prototype.getNext=function(){return this.iter.getNext().key},To.prototype.hasNext=function(){return this.iter.hasNext()},To);function To(t){this.iter=t}var So=new co(ji.comparator);function Eo(){return So}function Co(){return Eo()}var Io=new co(ji.comparator);function _o(){return Io}var Ao=new co(ji.comparator);function Do(){return Ao}var No=new go(ji.comparator);function ko(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=No,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Oo=new go(bi);function Ro(){return Oo}var xo=(Mo.prototype.applyToRemoteDocument=function(t,e,n){e&&Br(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var r=n.mutationResults;Br(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(t)){var a=r[i];e=o.applyToRemoteDocument(e,a)}}return e},Mo.prototype.applyToLocalView=function(t,e){e&&Br(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=s.applyToLocalView(e,e,this.localWriteTime));for(var i=e,o=0,a=this.mutations;o<a.length;o++){var s;(s=a[o]).key.isEqual(t)&&(e=s.applyToLocalView(e,i,this.localWriteTime))}return e},Mo.prototype.applyToLocalDocumentSet=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.applyToLocalView(r.key,t.get(r.key));i&&(n=n.insert(r.key,i))}),n},Mo.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},ko())},Mo.prototype.isEqual=function(t){return this.batchId===t.batchId&&wi(this.mutations,t.mutations)&&wi(this.baseMutations,t.baseMutations)},Mo);function Mo(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,Br(0<(this.mutations=r).length,"Cannot create an empty mutation batch")}var Lo=(Po.from=function(t,e,n,r){Br(t.mutations.length===n.length,"Mutations sent "+t.mutations.length+" must equal results received "+n.length);for(var i=Do(),o=t.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,n[a].version);return new Po(t,e,n,r,i)},Po);function Po(t,e,n,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.streamToken=r,this.docVersions=i}var Fo=(Vo.prototype.catch=function(t){return this.next(void 0,t)},Vo.prototype.next=function(t,e){var n=this;return this.callbackAttached&&Vr("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Vo(function(r,i){n.nextCallback=function(e){n.wrapSuccess(t,e).next(r,i)},n.catchCallback=function(t){n.wrapFailure(e,t).next(r,i)}})},Vo.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},Vo.prototype.wrapUserFunction=function(t){try{var e=t();return e instanceof Vo?e:Vo.resolve(e)}catch(t){return Vo.reject(t)}},Vo.prototype.wrapSuccess=function(t,e){return t?this.wrapUserFunction(function(){return t(e)}):Vo.resolve(e)},Vo.prototype.wrapFailure=function(t,e){return t?this.wrapUserFunction(function(){return t(e)}):Vo.reject(e)},Vo.resolve=function(t){return new Vo(function(e,n){e(t)})},Vo.reject=function(t){return new Vo(function(e,n){n(t)})},Vo.waitFor=function(t){return new Vo(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(t){return n(t)})}),o=!0,i===r&&e()})},Vo.or=function(t){for(var e=Vo.resolve(!1),n=function(t){e=e.next(function(e){return e?Vo.resolve(e):t()})},r=0,i=t;r<i.length;r++)n(i[r]);return e},Vo.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},Vo);function Vo(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}var Bo="SimpleDb",qo=(Uo.openOrCreate=function(t,e,n){return Br(Uo.isAvailable(),"IndexedDB not supported in current environment."),Lr(Bo,"Opening database:",t),new Fo(function(r,i){var o=window.indexedDB.open(t,e);o.onsuccess=function(t){var e=t.target.result;r(new Uo(e))},o.onblocked=function(){i(new Wr($r.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=function(t){var e=t.target.error;"VersionError"===e.name?i(new Wr($r.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i(e)},o.onupgradeneeded=function(e){Lr(Bo,'Database "'+t+'" requires upgrade from version:',e.oldVersion);var r=e.target.result;n.createOrUpgrade(r,o.transaction,e.oldVersion,iu).next(function(){Lr(Bo,"Database upgrade to version "+iu+" complete")})}}).toPromise()},Uo.delete=function(t){return Lr(Bo,"Removing database:",t),Go(window.indexedDB.deleteDatabase(t)).toPromise()},Uo.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(Uo.isMockPersistence())return!0;if(void 0===window.navigator)return!1;var t=y(),e=Uo.getIOSVersion(t),n=0<e&&e<10,r=Uo.getAndroidVersion(t),i=0<r&&r<4.5;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||n||i)},Uo.isMockPersistence=function(){var t;return void 0!==e&&"YES"===(null===(t=Object({NODE_ENV:"production"}))||void 0===t?void 0:t.USE_MOCK_PERSISTENCE)},Uo.getStore=function(t,e){return t.store(e)},Uo.getIOSVersion=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},Uo.getAndroidVersion=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},Uo.prototype.setVersionChangeListener=function(t){this.db.onversionchange=function(e){return t(e)}},Uo.prototype.runTransaction=function(t,e,n){return u(this,void 0,void 0,function(){var r,i,o,a,s,u;return c(this,function(l){switch(l.label){case 0:r=t.startsWith("readonly"),i=t.endsWith("idempotent"),o=0,a=function(){var t,a,u,l;return c(this,function(c){switch(c.label){case 0:++o,t=$o.open(s.db,r?"readonly":"readwrite",e),c.label=1;case 1:return c.trys.push([1,3,,4]),(a=n(t).catch(function(e){return t.abort(e),Fo.reject(e)}).toPromise()).catch(function(){}),[4,t.completionPromise];case 2:return c.sent(),[2,{value:a}];case 3:return u=c.sent(),l=i&&"FirebaseError"!==u.name&&o<3,Lr(Bo,"Transaction failed with error: %s. Retrying: %s.",u.message,l),l?[3,4]:[2,{value:Promise.reject(u)}];case 4:return[2]}})},s=this,l.label=1;case 1:return[5,a()];case 2:return"object"==typeof(u=l.sent())?[2,u.value]:[3,1];case 3:return[2]}})})},Uo.prototype.close=function(){this.db.close()},Uo);function Uo(t){this.db=t,12.2===Uo.getIOSVersion(y())&&Pr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}var jo=(Object.defineProperty(Ko.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(Ko.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(Ko.prototype,"cursor",{set:function(t){this.dbCursor=t},enumerable:!0,configurable:!0}),Ko.prototype.done=function(){this.shouldStop=!0},Ko.prototype.skip=function(t){this.nextKey=t},Ko.prototype.delete=function(){return Go(this.dbCursor.delete())},Ko);function Ko(t){this.dbCursor=t,this.shouldStop=!1,this.nextKey=null}var $o=(Wo.open=function(t,e,n){return new Wo(t.transaction(n,e))},Object.defineProperty(Wo.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),Wo.prototype.abort=function(t){t&&this.completionDeferred.reject(t),this.aborted||(Lr(Bo,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},Wo.prototype.store=function(t){var e=this.transaction.objectStore(t);return Br(!!e,"Object store not part of transaction: "+t),new zo(e)},Wo);function Wo(t){var e=this;this.transaction=t,this.aborted=!1,this.completionDeferred=new zi,this.transaction.oncomplete=function(){e.completionDeferred.resolve()},this.transaction.onabort=function(){t.error?e.completionDeferred.reject(t.error):e.completionDeferred.resolve()},this.transaction.onerror=function(t){var n=Yo(t.target.error);e.completionDeferred.reject(n)}}var zo=(Qo.prototype.put=function(t,e){return Go(void 0!==e?(Lr(Bo,"PUT",this.store.name,t,e),this.store.put(e,t)):(Lr(Bo,"PUT",this.store.name,"<auto-key>",t),this.store.put(t)))},Qo.prototype.add=function(t){return Lr(Bo,"ADD",this.store.name,t,t),Go(this.store.add(t))},Qo.prototype.get=function(t){var e=this;return Go(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Lr(Bo,"GET",e.store.name,t,n),n})},Qo.prototype.delete=function(t){return Lr(Bo,"DELETE",this.store.name,t),Go(this.store.delete(t))},Qo.prototype.count=function(){return Lr(Bo,"COUNT",this.store.name),Go(this.store.count())},Qo.prototype.loadAll=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.iterateCursor(n,function(t,e){r.push(e)}).next(function(){return r})},Qo.prototype.deleteAll=function(t,e){Lr(Bo,"DELETE ALL",this.store.name);var n=this.options(t,e);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,function(t,e,n){return n.delete()})},Qo.prototype.iterate=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.iterateCursor(r,e)},Qo.prototype.iterateSerial=function(t){var e=this.cursor({});return new Fo(function(n,r){e.onerror=function(t){var e=Yo(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},Qo.prototype.iterateCursor=function(t,e){var n=[];return new Fo(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new jo(i),a=e(i.primaryKey,i.value,o);if(a instanceof Fo){var s=a.catch(function(t){return o.done(),Fo.reject(t)});n.push(s)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}}).next(function(){return Fo.waitFor(n)})},Qo.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:(Br(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:n,range:e}},Qo.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.keysOnly?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},Qo);function Qo(t){this.store=t}function Go(t){return new Fo(function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Yo(t.target.error);n(e)}})}var Ho=!1;function Yo(t){var e=qo.getIOSVersion(y());if(12.2<=e&&e<13){var n="An internal error was encountered in the Indexed Database server";if(0<=t.message.indexOf(n)){var r=new Wr("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Ho||(Ho=!0,setTimeout(function(){throw r},0)),r}}return t}var Jo,Xo,Zo=(ta.forUser=function(t,e,n,r){return Br(""!==t.uid,"UserID must not be an empty string."),new ta(t.isAuthenticated()?t.uid:"",e,n,r)},ta.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ia(t).iterate({index:hu.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},ta.prototype.acknowledgeBatch=function(t,e,n){return this.getMutationQueueMetadata(t).next(function(e){return e.lastStreamToken=ra(n),aa(t).put(e)})},ta.prototype.getLastStreamToken=function(t){return this.getMutationQueueMetadata(t).next(function(t){return t.lastStreamToken})},ta.prototype.setLastStreamToken=function(t,e){return this.getMutationQueueMetadata(t).next(function(n){return n.lastStreamToken=ra(e),aa(t).put(n)})},ta.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=oa(t),a=ia(t);return a.add({}).next(function(s){Br("number"==typeof s,"Auto-generated key is not a number");for(var u=new xo(s,e,n,r),c=i.serializer.toDbMutationBatch(i.userId,u),l=[],h=new go(function(t,e){return bi(t.canonicalString(),e.canonicalString())}),f=0,p=r;f<p.length;f++){var d=p[f],m=pu.key(i.userId,d.key.path,s);h=h.add(d.key.path.popLast()),l.push(a.put(c)),l.push(o.put(m,pu.PLACEHOLDER))}return h.forEach(function(e){l.push(i.indexManager.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.documentKeysByBatchId[s]=u.keys()}),Fo.waitFor(l).next(function(){return u})})},ta.prototype.lookupMutationBatch=function(t,e){var n=this;return ia(t).get(e).next(function(t){return t?(Br(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),n.serializer.fromDbMutationBatch(t)):null})},ta.prototype.lookupMutationKeys=function(t,e){var n=this;return this.documentKeysByBatchId[e]?Fo.resolve(this.documentKeysByBatchId[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.documentKeysByBatchId[e]=r}return null})},ta.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return ia(t).iterate({index:hu.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Br(e.batchId>=r,"Should have found mutation after "+r),o=n.serializer.fromDbMutationBatch(e)),i.done()}).next(function(){return o})},ta.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return ia(t).iterate({index:hu.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},ta.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ia(t).loadAll(hu.userMutationsIndex,n).next(function(t){return t.map(function(t){return e.serializer.fromDbMutationBatch(t)})})},ta.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=pu.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return oa(t).iterate({range:i},function(r,i,a){var s=r[0],u=r[1],c=r[2],l=io(u);if(s===n.userId&&e.path.isEqual(l))return ia(t).get(c).next(function(t){if(!t)throw Vr("Dangling document-mutation reference found: "+r+" which points to "+c);Br(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+c),o.push(n.serializer.fromDbMutationBatch(t))});a.done()}).next(function(){return o})},ta.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new go(bi),i=[];return e.forEach(function(e){var o=pu.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=oa(t).iterate({range:a},function(t,i,o){var a=t[0],s=t[1],u=t[2],c=io(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()});i.push(s)}),Fo.waitFor(i).next(function(){return n.lookupMutationBatches(t,r)})},ta.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this;Br(!e.isDocumentQuery(),"Document queries shouldn't go down this path"),Br(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=e.path,i=r.length+1,o=pu.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new go(bi);return oa(t).iterate({range:a},function(t,e,o){var a=t[0],u=t[1],c=t[2],l=io(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()}).next(function(){return n.lookupMutationBatches(t,s)})},ta.prototype.lookupMutationBatches=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(ia(t).get(e).next(function(t){if(null===t)throw Vr("Dangling document-mutation reference found, which points to "+e);Br(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),r.push(n.serializer.fromDbMutationBatch(t))}))}),Fo.waitFor(i).next(function(){return r})},ta.prototype.removeMutationBatch=function(t,e){var n=this;return na(t.simpleDbTransaction,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.removeCachedMutationKeys(e.batchId)}),Fo.forEach(r,function(e){return n.referenceDelegate.removeMutationReference(t,e)})})},ta.prototype.removeCachedMutationKeys=function(t){delete this.documentKeysByBatchId[t]},ta.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Fo.resolve();var r=IDBKeyRange.lowerBound(pu.prefixForUser(e.userId)),i=[];return oa(t).iterate({range:r},function(t,n,r){if(t[0]===e.userId){var o=io(t[1]);i.push(o)}else r.done()}).next(function(){Br(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map(function(t){return t.canonicalString()}))})})},ta.prototype.containsKey=function(t,e){return ea(t,this.userId,e)},ta.prototype.getMutationQueueMetadata=function(t){var e=this;return aa(t).get(this.userId).next(function(t){return t||new cu(e.userId,-1,"")})},ta);function ta(t,e,n,r){this.userId=t,this.serializer=e,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}function ea(t,e,n){var r=pu.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return oa(t).iterate({range:o,keysOnly:!0},function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()}).next(function(){return a})}function na(t,e,n){var r=t.store(hu.store),i=t.store(pu.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.iterate({range:a},function(t,e,n){return s++,n.delete()});o.push(u.next(function(){Br(1===s,"Dangling document-mutation reference found: Missing batch "+n.batchId)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=pu.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Fo.waitFor(o).next(function(){return c})}function ra(t){return t instanceof Uint8Array?(Br(qo.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence."),t.toString()):t}function ia(t){return ic.getStore(t,hu.store)}function oa(t){return ic.getStore(t,pu.store)}function aa(t){return ic.getStore(t,cu.store)}(Xo=Jo=Jo||{})[Xo.QueryCache=0]="QueryCache",Xo[Xo.SyncEngine=1]="SyncEngine";var sa=(ua.prototype.next=function(){var t=this.nextId;return this.nextId+=2,t},ua.prototype.after=function(t){return this.seek(t+2),this.next()},ua.prototype.seek=function(t){Br((1&t)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=t},ua.forTargetCache=function(){return new ua(Jo.QueryCache,2)},ua.forSyncEngine=function(){return new ua(Jo.SyncEngine)},ua);function ua(t,e){Br((1&(this.generatorId=t))===t,"Generator ID "+t+" contains more than 1 reserved bits"),this.seek(void 0!==e?e:this.generatorId)}var ca=(la.prototype.allocateTargetId=function(t){var e=this;return this.retrieveMetadata(t).next(function(n){return n.highestTargetId=e.targetIdGenerator.after(n.highestTargetId),e.saveMetadata(t,n).next(function(){return n.highestTargetId})})},la.prototype.getLastRemoteSnapshotVersion=function(t){return this.retrieveMetadata(t).next(function(t){return so.fromTimestamp(new oo(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},la.prototype.getHighestSequenceNumber=function(t){return pa(t.simpleDbTransaction)},la.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.retrieveMetadata(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.saveMetadata(t,i)})},la.prototype.addTargetData=function(t,e){var n=this;return this.saveTargetData(t,e).next(function(){return n.retrieveMetadata(t).next(function(r){return r.targetCount+=1,n.updateMetadataFromTargetData(e,r),n.saveMetadata(t,r)})})},la.prototype.updateTargetData=function(t,e){return this.saveTargetData(t,e)},la.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return ha(t).delete(e.targetId)}).next(function(){return n.retrieveMetadata(t)}).next(function(e){return Br(0<e.targetCount,"Removing from an empty target cache"),e.targetCount-=1,n.saveMetadata(t,e)})},la.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return ha(t).iterate(function(a,s){var u=r.serializer.fromDbTarget(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return Fo.waitFor(o)}).next(function(){return i})},la.prototype.forEachTarget=function(t,e){var n=this;return ha(t).iterate(function(t,r){var i=n.serializer.fromDbTarget(r);e(i)})},la.prototype.retrieveMetadata=function(t){return fa(t.simpleDbTransaction)},la.prototype.saveMetadata=function(t,e){return function(t){return ic.getStore(t,Eu.store)}(t).put(Eu.key,e)},la.prototype.saveTargetData=function(t,e){return ha(t).put(this.serializer.toDbTarget(e))},la.prototype.updateMetadataFromTargetData=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},la.prototype.getTargetCount=function(t){return this.retrieveMetadata(t).next(function(t){return t.targetCount})},la.prototype.getTargetData=function(t,e){var n=this,r=e.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return ha(t).iterate({range:i,index:bu.queryTargetsIndexName},function(t,r,i){var a=n.serializer.fromDbTarget(r);e.isEqual(a.target)&&(o=a,i.done())}).next(function(){return o})},la.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=da(t);return e.forEach(function(e){var a=eo(e.path);i.push(o.put(new Tu(n,a))),i.push(r.referenceDelegate.addReference(t,e))}),Fo.waitFor(i)},la.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=da(t);return Fo.forEach(e,function(e){var o=eo(e.path);return Fo.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,e)])})},la.prototype.removeMatchingKeysForTargetId=function(t,e){var n=da(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},la.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=da(t),i=ko();return r.iterate({range:n,keysOnly:!0},function(t,e,n){var r=io(t[1]),o=new ji(r);i=i.add(o)}).next(function(){return i})},la.prototype.containsKey=function(t,e){var n=eo(e.path),r=IDBKeyRange.bound([n],[Ti(n)],!1,!0),i=0;return da(t).iterate({index:Tu.documentTargetsIndex,keysOnly:!0,range:r},function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())}).next(function(){return 0<i})},la.prototype.getTargetDataForTarget=function(t,e){var n=this;return ha(t).get(e).next(function(t){return t?n.serializer.fromDbTarget(t):null})},la);function la(t,e){this.referenceDelegate=t,this.serializer=e,this.targetIdGenerator=sa.forTargetCache()}function ha(t){return ic.getStore(t,bu.store)}function fa(t){return qo.getStore(t,Eu.store).get(Eu.key).next(function(t){return Br(null!==t,"Missing metadata row."),t})}function pa(t){return fa(t).next(function(t){return t.highestListenSequenceNumber})}function da(t){return ic.getStore(t,Tu.store)}var ma=(ya.fromSet=function(t){return new ya(t)},ya.fromArray=function(t){var e=new go(qi.comparator);return t.forEach(function(t){return e=e.add(t)}),new ya(e)},ya.prototype.covers=function(t){var e=!1;return this.fields.forEach(function(n){n.isPrefixOf(t)&&(e=!0)}),e},ya.prototype.isEqual=function(t){return this.fields.isEqual(t.fields)},ya);function ya(t){this.fields=t}var va=(ga.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},ga);function ga(t,e){this.field=t,this.transform=e}var ba,wa;(wa=ba=ba||{})[wa.Set=0]="Set",wa[wa.Patch=1]="Patch",wa[wa.Transform=2]="Transform",wa[wa.Delete=3]="Delete";var Ta=(Sa.exists=function(t){return new Sa(void 0,t)},Sa.updateTime=function(t){return new Sa(t)},Object.defineProperty(Sa.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),Sa.prototype.isValidFor=function(t){return void 0!==this.updateTime?t instanceof Ms&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===t instanceof Ms:(Br(this.isNone,"Precondition should be empty"),!0)},Sa.prototype.isEqual=function(t){return function(t,e){return null!=t?!(!e||!t.isEqual(e)):t===e}(this.updateTime,t.updateTime)&&this.exists===t.exists},Sa.NONE=new Sa,Sa);function Sa(t,e){this.updateTime=t,this.exists=e,Br(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}var Ea=(Ca.prototype.verifyKeyMatches=function(t){null!=t&&Br(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},Ca.getPostMutationVersion=function(t){return t instanceof Ms?t.version:so.MIN},Ca);function Ca(){}var Ia,_a=(i(Aa,Ia=Ea),Aa.prototype.applyToRemoteDocument=function(t,e){this.verifyKeyMatches(t),Br(null==e.transformResults,"Transform results received by SetMutation.");var n=e.version;return new Ms(this.key,n,{hasCommittedMutations:!0},this.value)},Aa.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=Ea.getPostMutationVersion(t);return new Ms(this.key,r,{hasLocalMutations:!0},this.value)},Aa.prototype.extractBaseValue=function(t){return null},Aa.prototype.isEqual=function(t){return t instanceof Aa&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.precondition.isEqual(t.precondition)},Aa);function Aa(t,e,n){var r=Ia.call(this)||this;return r.key=t,r.value=e,r.precondition=n,r.type=ba.Set,r}var Da,Na=(i(ka,Da=Ea),ka.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),Br(null==e.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(t))return new qs(this.key,e.version);var n=this.patchDocument(t);return new Ms(this.key,e.version,{hasCommittedMutations:!0},n)},ka.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=Ea.getPostMutationVersion(t),i=this.patchDocument(t);return new Ms(this.key,r,{hasLocalMutations:!0},i)},ka.prototype.extractBaseValue=function(t){return null},ka.prototype.isEqual=function(t){return t instanceof ka&&this.key.isEqual(t.key)&&this.fieldMask.isEqual(t.fieldMask)&&this.precondition.isEqual(t.precondition)},ka.prototype.patchDocument=function(t){var e;return e=t instanceof Ms?t.data():_s.EMPTY,this.patchObject(e)},ka.prototype.patchObject=function(t){var e=this;return this.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=e.data.field(n);t=null!==r?t.set(n,r):t.delete(n)}}),t},ka);function ka(t,e,n,r){var i=Da.call(this)||this;return i.key=t,i.data=e,i.fieldMask=n,i.precondition=r,i.type=ba.Patch,i}var Oa,Ra=(i(xa,Oa=Ea),xa.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),Br(null!=e.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(t))return new qs(this.key,e.version);var n=this.requireDocument(t),r=this.serverTransformResults(t,e.transformResults),i=e.version,o=this.transformObject(n.data(),r);return new Ms(this.key,i,{hasCommittedMutations:!0},o)},xa.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=this.requireDocument(t),i=this.localTransformResults(n,t,e),o=this.transformObject(r.data(),i);return new Ms(this.key,r.version,{hasLocalMutations:!0},o)},xa.prototype.extractBaseValue=function(t){for(var e=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof Ms?t.field(i.field):void 0,a=i.transform.computeBaseValue(o||null);null!=a&&(e=null==e?_s.EMPTY.set(i.field,a):e.set(i.field,a))}return e},xa.prototype.isEqual=function(t){return t instanceof xa&&this.key.isEqual(t.key)&&wi(this.fieldTransforms,t.fieldTransforms)&&this.precondition.isEqual(t.precondition)},xa.prototype.requireDocument=function(t){return Br(t instanceof Ms,"Unknown MaybeDocument type "+t),Br(t.key.isEqual(this.key),"Can only transform a document with the same key"),t},xa.prototype.serverTransformResults=function(t,e){var n=[];Br(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;t instanceof Ms&&(a=t.field(i.field)),n.push(o.applyToRemoteDocument(a,e[r]))}return n},xa.prototype.localTransformResults=function(t,e,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var a=o[i],s=a.transform,u=null;e instanceof Ms&&(u=e.field(a.field)),null===u&&n instanceof Ms&&(u=n.field(a.field)),r.push(s.applyToLocalView(u,t))}return r},xa.prototype.transformObject=function(t,e){Br(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n].field;t=t.set(r,e[n])}return t},xa);function xa(t,e){var n=Oa.call(this)||this;return n.key=t,n.fieldTransforms=e,n.type=ba.Transform,n.precondition=Ta.exists(!0),n}var Ma,La,Pa,Fa,Va,Ba=(i(qa,Ma=Ea),qa.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),Br(null==e.transformResults,"Transform results received by DeleteMutation."),new Fs(this.key,e.version,{hasCommittedMutations:!0})},qa.prototype.applyToLocalView=function(t,e,n){return this.verifyKeyMatches(t),this.precondition.isValidFor(t)?(t&&Br(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new Fs(this.key,so.forDeletedDoc())):t},qa.prototype.extractBaseValue=function(t){return null},qa.prototype.isEqual=function(t){return t instanceof qa&&this.key.isEqual(t.key)&&this.precondition.isEqual(t.precondition)},qa);function qa(t,e){var n=Ma.call(this)||this;return n.key=t,n.precondition=e,n.type=ba.Delete,n}(Pa=La=La||{})[Pa.NullValue=0]="NullValue",Pa[Pa.BooleanValue=1]="BooleanValue",Pa[Pa.NumberValue=2]="NumberValue",Pa[Pa.TimestampValue=3]="TimestampValue",Pa[Pa.StringValue=4]="StringValue",Pa[Pa.BlobValue=5]="BlobValue",Pa[Pa.RefValue=6]="RefValue",Pa[Pa.GeoPointValue=7]="GeoPointValue",Pa[Pa.ArrayValue=8]="ArrayValue",Pa[Pa.ObjectValue=9]="ObjectValue",(Va=Fa=Fa||{})[Va.Default=0]="Default",Va[Va.Estimate=1]="Estimate",Va[Va.Previous=2]="Previous";var Ua=(ja.fromSnapshotOptions=function(t,e){switch(t.serverTimestamps){case"estimate":return new ja(Fa.Estimate,e);case"previous":return new ja(Fa.Previous,e);case"none":case void 0:return new ja(Fa.Default,e);default:return Vr("fromSnapshotOptions() called with invalid options.")}},ja);function ja(t,e){this.serverTimestampBehavior=t,this.timestampsInSnapshots=e}var Ka=($a.prototype.toString=function(){var t=this.value();return null===t?"null":t.toString()},$a.prototype.defaultCompareTo=function(t){return Br(this.typeOrder!==t.typeOrder,"Default compareTo should not be used for values of same type."),bi(this.typeOrder,t.typeOrder)},$a);function $a(){}var Wa,za=(i(Qa,Wa=Ka),Qa.prototype.value=function(t){return null},Qa.prototype.isEqual=function(t){return t instanceof Qa},Qa.prototype.compareTo=function(t){return t instanceof Qa?0:this.defaultCompareTo(t)},Qa.INSTANCE=new Qa,Qa);function Qa(){var t=Wa.call(this)||this;return t.typeOrder=La.NullValue,t.internalValue=null,t}var Ga,Ha=(i(Ya,Ga=Ka),Ya.prototype.value=function(t){return this.internalValue},Ya.prototype.isEqual=function(t){return t instanceof Ya&&this.internalValue===t.internalValue},Ya.prototype.compareTo=function(t){return t instanceof Ya?bi(this,t):this.defaultCompareTo(t)},Ya.of=function(t){return t?Ya.TRUE:Ya.FALSE},Ya.TRUE=new Ya(!0),Ya.FALSE=new Ya(!1),Ya);function Ya(t){var e=Ga.call(this)||this;return e.internalValue=t,e.typeOrder=La.BooleanValue,e}var Ja,Xa=(i(Za,Ja=Ka),Za.prototype.value=function(t){return this.internalValue},Za.prototype.compareTo=function(t){return t instanceof Za?function(t,e){return t<e?-1:e<t?1:t===e?0:isNaN(t)?isNaN(e)?0:-1:1}(this.internalValue,t.internalValue):this.defaultCompareTo(t)},Za);function Za(t){var e=Ja.call(this)||this;return e.internalValue=t,e.typeOrder=La.NumberValue,e}function ts(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}var es,ns=(i(rs,es=Xa),rs.prototype.isEqual=function(t){return t instanceof rs&&ts(this.internalValue,t.internalValue)},rs);function rs(){return null!==es&&es.apply(this,arguments)||this}var is,os=(i(as,is=Xa),as.prototype.isEqual=function(t){return t instanceof as&&ts(this.internalValue,t.internalValue)},as.NAN=new as(NaN),as.POSITIVE_INFINITY=new as(1/0),as.NEGATIVE_INFINITY=new as(-1/0),as);function as(){return null!==is&&is.apply(this,arguments)||this}var ss,us=(i(cs,ss=Ka),cs.prototype.value=function(t){return this.internalValue},cs.prototype.isEqual=function(t){return t instanceof cs&&this.internalValue===t.internalValue},cs.prototype.compareTo=function(t){return t instanceof cs?bi(this.internalValue,t.internalValue):this.defaultCompareTo(t)},cs);function cs(t){var e=ss.call(this)||this;return e.internalValue=t,e.typeOrder=La.StringValue,e}var ls,hs=(i(fs,ls=Ka),fs.prototype.value=function(t){return!t||t.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},fs.prototype.isEqual=function(t){return t instanceof fs&&this.internalValue.isEqual(t.internalValue)},fs.prototype.compareTo=function(t){return t instanceof fs?this.internalValue._compareTo(t.internalValue):t instanceof ds?-1:this.defaultCompareTo(t)},fs);function fs(t){var e=ls.call(this)||this;return e.internalValue=t,e.typeOrder=La.TimestampValue,e}var ps,ds=(i(ms,ps=Ka),ms.prototype.value=function(t){return t&&t.serverTimestampBehavior===Fa.Estimate?new hs(this.localWriteTime).value(t):t&&t.serverTimestampBehavior===Fa.Previous&&this.previousValue?this.previousValue.value(t):null},ms.prototype.isEqual=function(t){return t instanceof ms&&this.localWriteTime.isEqual(t.localWriteTime)},ms.prototype.compareTo=function(t){return t instanceof ms?this.localWriteTime._compareTo(t.localWriteTime):t instanceof hs?1:this.defaultCompareTo(t)},ms.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},ms);function ms(t,e){var n=ps.call(this)||this;return n.localWriteTime=t,n.previousValue=e,n.typeOrder=La.TimestampValue,n}var ys,vs=(i(gs,ys=Ka),gs.prototype.value=function(t){return this.internalValue},gs.prototype.isEqual=function(t){return t instanceof gs&&this.internalValue.isEqual(t.internalValue)},gs.prototype.compareTo=function(t){return t instanceof gs?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},gs);function gs(t){var e=ys.call(this)||this;return e.internalValue=t,e.typeOrder=La.BlobValue,e}var bs,ws=(i(Ts,bs=Ka),Ts.prototype.value=function(t){return this.key},Ts.prototype.isEqual=function(t){return t instanceof Ts&&this.key.isEqual(t.key)&&this.databaseId.isEqual(t.databaseId)},Ts.prototype.compareTo=function(t){if(t instanceof Ts){var e=this.databaseId.compareTo(t.databaseId);return 0!==e?e:ji.comparator(this.key,t.key)}return this.defaultCompareTo(t)},Ts);function Ts(t,e){var n=bs.call(this)||this;return n.databaseId=t,n.key=e,n.typeOrder=La.RefValue,n}var Ss,Es=(i(Cs,Ss=Ka),Cs.prototype.value=function(t){return this.internalValue},Cs.prototype.isEqual=function(t){return t instanceof Cs&&this.internalValue.isEqual(t.internalValue)},Cs.prototype.compareTo=function(t){return t instanceof Cs?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},Cs);function Cs(t){var e=Ss.call(this)||this;return e.internalValue=t,e.typeOrder=La.GeoPointValue,e}var Is,_s=(i(As,Is=Ka),As.prototype.value=function(t){var e={};return this.internalValue.inorderTraversal(function(n,r){e[n]=r.value(t)}),e},As.prototype.forEach=function(t){this.internalValue.inorderTraversal(t)},As.prototype.isEqual=function(t){if(t instanceof As){for(var e=this.internalValue.getIterator(),n=t.internalValue.getIterator();e.hasNext()&&n.hasNext();){var r=e.getNext(),i=n.getNext();if(r.key!==i.key||!r.value.isEqual(i.value))return!1}return!e.hasNext()&&!n.hasNext()}return!1},As.prototype.compareTo=function(t){if(t instanceof As){for(var e=this.internalValue.getIterator(),n=t.internalValue.getIterator();e.hasNext()&&n.hasNext();){var r=e.getNext(),i=n.getNext(),o=bi(r.key,i.key)||r.value.compareTo(i.value);if(o)return o}return bi(e.hasNext(),n.hasNext())}return this.defaultCompareTo(t)},As.prototype.set=function(t,e){if(Br(!t.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===t.length)return this.setChild(t.firstSegment(),e);var n=this.child(t.firstSegment());n instanceof As||(n=As.EMPTY);var r=n.set(t.popFirst(),e);return this.setChild(t.firstSegment(),r)},As.prototype.delete=function(t){if(Br(!t.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===t.length)return new As(this.internalValue.remove(t.firstSegment()));var e=this.child(t.firstSegment());if(e instanceof As){var n=e.delete(t.popFirst());return new As(this.internalValue.insert(t.firstSegment(),n))}return this},As.prototype.contains=function(t){return null!==this.field(t)},As.prototype.field=function(t){Br(!t.isEmpty(),"Can't get field of empty path");var e=this;return t.forEach(function(t){e=e instanceof As?e.internalValue.get(t):null}),e},As.prototype.fieldMask=function(){var t=new go(qi.comparator);return this.internalValue.forEach(function(e,n){var r=new qi([e]);if(n instanceof As){var i=n.fieldMask().fields;i.isEmpty()?t=t.add(r):i.forEach(function(e){t=t.add(r.child(e))})}else t=t.add(r)}),ma.fromSet(t)},As.prototype.toString=function(){return this.internalValue.toString()},As.prototype.child=function(t){return this.internalValue.get(t)||void 0},As.prototype.setChild=function(t,e){return new As(this.internalValue.insert(t,e))},As.EMPTY=new As(new co(bi)),As);function As(t){var e=Is.call(this)||this;return e.internalValue=t,e.typeOrder=La.ObjectValue,e}var Ds,Ns=(i(ks,Ds=Ka),ks.prototype.value=function(t){return this.internalValue.map(function(e){return e.value(t)})},ks.prototype.contains=function(t){for(var e=0,n=this.internalValue;e<n.length;e++)if(n[e].isEqual(t))return!0;return!1},ks.prototype.forEach=function(t){this.internalValue.forEach(t)},ks.prototype.isEqual=function(t){if(t instanceof ks){if(this.internalValue.length!==t.internalValue.length)return!1;for(var e=0;e<this.internalValue.length;e++)if(!this.internalValue[e].isEqual(t.internalValue[e]))return!1;return!0}return!1},ks.prototype.compareTo=function(t){if(t instanceof ks){for(var e=Math.min(this.internalValue.length,t.internalValue.length),n=0;n<e;n++){var r=this.internalValue[n].compareTo(t.internalValue[n]);if(r)return r}return bi(this.internalValue.length,t.internalValue.length)}return this.defaultCompareTo(t)},ks.prototype.toString=function(){return"["+this.internalValue.map(function(t){return t.toString()}).join(",")+"]"},ks);function ks(t){var e=Ds.call(this)||this;return e.internalValue=t,e.typeOrder=La.ArrayValue,e}var Os=(Rs.compareByKey=function(t,e){return ji.comparator(t.key,e.key)},Rs);function Rs(t,e){this.key=t,this.version=e}var xs,Ms=(i(Ls,xs=Os),Ls.prototype.field=function(t){if(this.objectValue)return this.objectValue.field(t);this.fieldValueCache||(this.fieldValueCache=new Map);var e=t.canonicalString(),n=this.fieldValueCache.get(e);if(void 0===n){var r=this.getProtoField(t);n=void 0===r?null:this.converter(r),this.fieldValueCache.set(e,n)}return n},Ls.prototype.data=function(){var t=this;if(!this.objectValue){var e=_s.EMPTY;Jr(this.proto.fields||{},function(n,r){e=e.set(new qi([n]),t.converter(r))}),this.objectValue=e,this.fieldValueCache=void 0}return this.objectValue},Ls.prototype.value=function(){return this.data().value()},Ls.prototype.isEqual=function(t){return t instanceof Ls&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations&&this.data().isEqual(t.data())},Ls.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(Ls.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),Ls.prototype.getProtoField=function(t){Br(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var e=this.proto.fields?this.proto.fields[t.firstSegment()]:void 0,n=1;n<t.length;++n){if(!e||!e.mapValue||!e.mapValue.fields)return;e=e.mapValue.fields[t.get(n)]}return e},Ls.compareByField=function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?r.compareTo(i):Vr("Trying to compare documents on fields that don't exist")},Ls);function Ls(t,e,n,r,i,o){var a=xs.call(this,t,e)||this;return a.objectValue=r,a.proto=i,a.converter=o,Br(void 0!==a.objectValue||void 0!==a.proto&&void 0!==a.converter,"If objectValue is not defined, proto and converter need to be set."),a.hasLocalMutations=!!n.hasLocalMutations,a.hasCommittedMutations=!!n.hasCommittedMutations,a}var Ps,Fs=(i(Vs,Ps=Os),Vs.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(Vs.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),Vs.prototype.isEqual=function(t){return t instanceof Vs&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Vs);function Vs(t,e,n){var r=Ps.call(this,t,e)||this;return r.hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}var Bs,qs=(i(Us,Bs=Os),Us.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(Us.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),Us.prototype.isEqual=function(t){return t instanceof Us&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Us);function Us(){return null!==Bs&&Bs.apply(this,arguments)||this}var js=(Ks.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(a.isEqual(t))return s}},Ks.prototype.has=function(t){return void 0!==this.get(t)},Ks.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},Ks.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},Ks.prototype.forEach=function(t){Jr(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}})},Ks.prototype.isEmpty=function(){return Xr(this.inner)},Ks);function Ks(t){this.mapKeyFn=t,this.inner={}}var $s=(Object.defineProperty(Ws.prototype,"readTime",{get:function(){return Br(void 0!==this._readTime,"Read time is not set. All removeEntry() calls must include a readTime if `trackRemovals` is used."),this._readTime},set:function(t){Br(void 0===this._readTime||this._readTime.isEqual(t),"All changes in a RemoteDocumentChangeBuffer must have the same read time"),this._readTime=t},enumerable:!0,configurable:!0}),Ws.prototype.addEntry=function(t,e){this.assertNotApplied(),this.readTime=e,this.changes.set(t.key,t)},Ws.prototype.removeEntry=function(t,e){this.assertNotApplied(),e&&(this.readTime=e),this.changes.set(t,null)},Ws.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Fo.resolve(n):this.getFromCache(t,e)},Ws.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},Ws.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},Ws.prototype.assertNotApplied=function(){Br(!this.changesApplied,"Changes have already been applied.")},Ws);function Ws(){this.changes=new js(function(t){return t.toString()}),this.changesApplied=!1}var zs,Qs=(Gs.prototype.addEntry=function(t,e,n){return Js(t).put(Xs(e),n)},Gs.prototype.removeEntry=function(t,e){var n=Js(t),r=Xs(e);return n.delete(r)},Gs.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.setMetadata(t,r)})},Gs.prototype.getEntry=function(t,e){var n=this;return Js(t).get(Xs(e)).next(function(t){return n.maybeDecodeDocument(t)})},Gs.prototype.getSizedEntry=function(t,e){var n=this;return Js(t).get(Xs(e)).next(function(t){var e=n.maybeDecodeDocument(t);return e?{maybeDocument:e,size:Zs(t)}:null})},Gs.prototype.getEntries=function(t,e){var n=this,r=Co();return this.forEachDbEntry(t,e,function(t,e){var i=n.maybeDecodeDocument(e);r=r.insert(t,i)}).next(function(){return r})},Gs.prototype.getSizedEntries=function(t,e){var n=this,r=Co(),i=new co(ji.comparator);return this.forEachDbEntry(t,e,function(t,e){var o=n.maybeDecodeDocument(e);i=o?(r=r.insert(t,o),i.insert(t,Zs(e))):(r=r.insert(t,null),i.insert(t,0))}).next(function(){return{maybeDocuments:r,sizeMap:i}})},Gs.prototype.forEachDbEntry=function(t,e,n){if(e.isEmpty())return Fo.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Js(t).iterate({range:r},function(t,e,r){for(var a=ji.fromSegments(t);o&&ji.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},Gs.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this;Br(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var i=_o(),o=e.path.length+1,a={};if(n.isEqual(so.MIN)){var s=e.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.toArray(),c=this.serializer.toDbTimestampKey(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=mu.collectionReadTimeIndex}return Js(t).iterate(a,function(t,n,a){if(t.length===o){var s=r.serializer.fromDbRemoteDocument(n);e.path.isPrefixOf(s.key.path)?s instanceof Ms&&e.matches(s)&&(i=i.insert(s.key,s)):a.done()}}).next(function(){return i})},Gs.prototype.getNewDocumentChanges=function(t,e){var n=this,r=Eo(),i=this.serializer.toDbTimestampKey(e),o=Js(t),a=IDBKeyRange.lowerBound(i,!0);return o.iterate({index:mu.readTimeIndex,range:a},function(t,e){var o=n.serializer.fromDbRemoteDocument(e);r=r.insert(o.key,o),i=e.readTime}).next(function(){return{changedDocs:r,readTime:n.serializer.fromDbTimestampKey(i)}})},Gs.prototype.getLastDocumentChange=function(t){var e,n=this,r=Js(t),i=so.MIN;return r.iterate({index:mu.readTimeIndex,reverse:!0},function(t,r,o){e=n.serializer.fromDbRemoteDocument(r),r.readTime&&(i=n.serializer.fromDbTimestampKey(r.readTime)),o.done()}).next(function(){return{changedDoc:e,readTime:i}})},Gs.prototype.newChangeBuffer=function(t){return new Gs.RemoteDocumentChangeBuffer(this,!!t&&t.trackRemovals)},Gs.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},Gs.prototype.getMetadata=function(t){return Ys(t).get(vu.key).next(function(t){return Br(!!t,"Missing document cache metadata"),t})},Gs.prototype.setMetadata=function(t,e){return Ys(t).put(vu.key,e)},Gs.prototype.maybeDecodeDocument=function(t){if(t){var e=this.serializer.fromDbRemoteDocument(t);return e instanceof Fs&&e.version.isEqual(so.forDeletedDoc())?null:e}return null},Gs.RemoteDocumentChangeBuffer=(i(Hs,zs=$s),Hs.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new go(function(t,e){return bi(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,a){var s=e.documentSizes.get(o);if(Br(void 0!==s,"Cannot modify a document that wasn't read (for "+o+")"),a){Br(!e.readTime.isEqual(so.MIN),"Cannot add a document with a read time of zero");var u=e.documentCache.serializer.toDbRemoteDocument(a,e.readTime);i=i.add(o.path.popLast());var c=Zs(u);r+=c-s,n.push(e.documentCache.addEntry(t,o,u))}else if(r-=s,e.trackRemovals){var l=e.documentCache.serializer.toDbRemoteDocument(new Fs(o,so.forDeletedDoc()),e.readTime);n.push(e.documentCache.addEntry(t,o,l))}else n.push(e.documentCache.removeEntry(t,o))}),i.forEach(function(r){n.push(e.documentCache.indexManager.addToCollectionParentIndex(t,r))}),n.push(this.documentCache.updateMetadata(t,r)),Fo.waitFor(n)},Hs.prototype.getFromCache=function(t,e){var n=this;return this.documentCache.getSizedEntry(t,e).next(function(t){return null===t?(n.documentSizes.set(e,0),null):(n.documentSizes.set(e,t.size),t.maybeDocument)})},Hs.prototype.getAllFromCache=function(t,e){var n=this;return this.documentCache.getSizedEntries(t,e).next(function(t){var e=t.maybeDocuments;return t.sizeMap.forEach(function(t,e){n.documentSizes.set(t,e)}),e})},Hs),Gs);function Gs(t,e){this.serializer=t,this.indexManager=e}function Hs(t,e){var n=zs.call(this)||this;return n.documentCache=t,n.trackRemovals=e,n.documentSizes=new js(function(t){return t.toString()}),n}function Ys(t){return ic.getStore(t,vu.store)}function Js(t){return ic.getStore(t,mu.store)}function Xs(t){return t.path.toArray()}function Zs(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Vr("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}var tu=(eu.prototype.addToCollectionParentIndex=function(t,e){return this.collectionParentIndex.add(e),Fo.resolve()},eu.prototype.getCollectionParents=function(t,e){return Fo.resolve(this.collectionParentIndex.getEntries(e))},eu);function eu(){this.collectionParentIndex=new nu}var nu=(ru.prototype.add=function(t){Br(t.length%2==1,"Expected a collection path.");var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new go(Pi.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},ru.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},ru.prototype.getEntries=function(t){return(this.index[t]||new go(Pi.comparator)).toArray()},ru);function ru(){this.index={}}var iu=9,ou=(au.prototype.createOrUpgrade=function(t,e,n,r){var i=this;Br(n<r&&0<=n&&r<=iu,"Unexpected schema upgrade from v"+n+" to v{toVersion}.");var o=new $o(e);n<1&&1<=r&&(function(t){t.createObjectStore(su.store)}(t),function(t){t.createObjectStore(cu.store,{keyPath:cu.keyPath}),t.createObjectStore(hu.store,{keyPath:hu.keyPath,autoIncrement:!0}).createIndex(hu.userMutationsIndex,hu.userMutationsKeyPath,{unique:!0}),t.createObjectStore(pu.store)}(t),Au(t),function(t){t.createObjectStore(mu.store)}(t));var a=Fo.resolve();return n<3&&3<=r&&(0!==n&&(function(t){t.deleteObjectStore(Tu.store),t.deleteObjectStore(bu.store),t.deleteObjectStore(Eu.store)}(t),Au(t)),a=a.next(function(){return t=o.store(Eu.store),e=new Eu(0,0,so.MIN.toTimestamp(),0),t.put(Eu.key,e);var t,e})),n<4&&4<=r&&(0!==n&&(a=a.next(function(){return e=t,(n=o).store(hu.store).loadAll().next(function(t){e.deleteObjectStore(hu.store),e.createObjectStore(hu.store,{keyPath:hu.keyPath,autoIncrement:!0}).createIndex(hu.userMutationsIndex,hu.userMutationsKeyPath,{unique:!0});var r=n.store(hu.store),i=t.map(function(t){return r.put(t)});return Fo.waitFor(i)});var e,n})),a=a.next(function(){!function(t){t.createObjectStore(Du.store,{keyPath:Du.keyPath})}(t)})),n<5&&5<=r&&(a=a.next(function(){return i.removeAcknowledgedMutations(o)})),n<6&&6<=r&&(a=a.next(function(){return function(t){t.createObjectStore(vu.store)}(t),i.addDocumentGlobal(o)})),n<7&&7<=r&&(a=a.next(function(){return i.ensureSequenceNumbers(o)})),n<8&&8<=r&&(a=a.next(function(){return i.createCollectionParentIndex(t,o)})),n<9&&9<=r&&(a=a.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(mu.store);e.createIndex(mu.readTimeIndex,mu.readTimeIndexPath,{unique:!1}),e.createIndex(mu.collectionReadTimeIndex,mu.collectionReadTimeIndexPath,{unique:!1})}(e)})),a},au.prototype.addDocumentGlobal=function(t){var e=0;return t.store(mu.store).iterate(function(t,n){e+=Zs(n)}).next(function(){var n=new vu(e);return t.store(vu.store).put(vu.key,n)})},au.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(cu.store),r=t.store(hu.store);return n.loadAll().next(function(n){return Fo.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(hu.userMutationsIndex,i).next(function(r){return Fo.forEach(r,function(r){Br(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=e.serializer.fromDbMutationBatch(r);return na(t,n.userId,i).next(function(){})})})})})},au.prototype.ensureSequenceNumbers=function(t){var e=t.store(Tu.store),n=t.store(mu.store);return pa(t).next(function(t){var r=[];return n.iterate(function(n,i){var o=new Pi(n),a=[0,eo(o)];r.push(e.get(a).next(function(n){return n?Fo.resolve():function(n){return e.put(new Tu(0,eo(n),t))}(o)}))}).next(function(){return Fo.waitFor(r)})})},au.prototype.createCollectionParentIndex=function(t,e){function n(t){if(i.add(t)){var e=t.lastSegment(),n=t.popLast();return r.put({collectionId:e,parent:eo(n)})}}t.createObjectStore(Iu.store,{keyPath:Iu.keyPath});var r=e.store(Iu.store),i=new nu;return e.store(mu.store).iterate({keysOnly:!0},function(t,e){return n(new Pi(t).popLast())}).next(function(){return e.store(pu.store).iterate({keysOnly:!0},function(t,e){t[0];var r=t[1];return n((t[2],io(r)).popLast())})})},au);function au(t){this.serializer=t}var su=(uu.store="owner",uu.key="owner",uu);function uu(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}var cu=(lu.store="mutationQueues",lu.keyPath="userId",lu);function lu(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}var hu=(fu.store="mutations",fu.keyPath="batchId",fu.userMutationsIndex="userMutationsIndex",fu.userMutationsKeyPath=["userId","batchId"],fu);function fu(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}var pu=(du.prefixForUser=function(t){return[t]},du.prefixForPath=function(t,e){return[t,eo(e)]},du.key=function(t,e,n){return[t,eo(e),n]},du.store="documentMutations",du.PLACEHOLDER=new du,du);function du(){}var mu=(yu.store="remoteDocuments",yu.readTimeIndex="readTimeIndex",yu.readTimeIndexPath="readTime",yu.collectionReadTimeIndex="collectionReadTimeIndex",yu.collectionReadTimeIndexPath=["parentPath","readTime"],yu);function yu(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o}var vu=(gu.store="remoteDocumentGlobal",gu.key="remoteDocumentGlobalKey",gu);function gu(t){this.byteSize=t}var bu=(wu.store="targets",wu.keyPath="targetId",wu.queryTargetsIndexName="queryTargetsIndex",wu.queryTargetsKeyPath=["canonicalId","targetId"],wu);function wu(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a}var Tu=(Su.store="targetDocuments",Su.keyPath=["targetId","path"],Su.documentTargetsIndex="documentTargetsIndex",Su.documentTargetsKeyPath=["path","targetId"],Su);function Su(t,e,n){this.targetId=t,this.path=e,Br(0===t==(void 0!==(this.sequenceNumber=n)),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}var Eu=(Cu.key="targetGlobalKey",Cu.store="targetGlobal",Cu);function Cu(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}var Iu=(_u.store="collectionParents",_u.keyPath=["collectionId","parent"],_u);function _u(t,e){this.collectionId=t,this.parent=e}function Au(t){t.createObjectStore(Tu.store,{keyPath:Tu.keyPath}).createIndex(Tu.documentTargetsIndex,Tu.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(bu.store,{keyPath:bu.keyPath}).createIndex(bu.queryTargetsIndexName,bu.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Eu.store)}var Du=(Nu.store="clientMetadata",Nu.keyPath="clientId",Nu);function Nu(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r}var ku,Ou,Ru=l(l(l([cu.store,hu.store,pu.store,mu.store,bu.store,su.store,Eu.store,Tu.store],[Du.store]),[vu.store]),[Iu.store]),xu=(Mu.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(Br(e.length%2==1,"Expected a collection path."),this.collectionParentsCache.has(e))return Fo.resolve();var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.collectionParentsCache.add(e)});var o={collectionId:r,parent:eo(i)};return Lu(t).put(o)},Mu.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Ti(e),""],!1,!0);return Lu(t).loadAll(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(io(o.parent))}return n})},Mu);function Mu(){this.collectionParentsCache=new nu}function Lu(t){return ic.getStore(t,Iu.store)}(Ou=ku=ku||{})[Ou.Listen=0]="Listen",Ou[Ou.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",Ou[Ou.LimboResolution=2]="LimboResolution";var Pu=(Fu.prototype.withSequenceNumber=function(t){return new Fu(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},Fu.prototype.withResumeToken=function(t,e){return new Fu(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},Fu.prototype.withLastLimboFreeSnapshotVersion=function(t){return new Fu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},Fu.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.purpose===t.purpose&&this.sequenceNumber===t.sequenceNumber&&this.snapshotVersion.isEqual(t.snapshotVersion)&&this.lastLimboFreeSnapshotVersion.isEqual(t.lastLimboFreeSnapshotVersion)&&this.resumeToken===t.resumeToken&&this.target.isEqual(t.target)},Fu);function Fu(t,e,n,r,i,o,a){void 0===i&&(i=so.MIN),void 0===o&&(o=so.MIN),void 0===a&&(a=jr()),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}var Vu=(Bu.prototype.fromDbRemoteDocument=function(t){if(t.document)return this.remoteSerializer.fromDocument(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=ji.fromSegments(t.noDocument.path),n=this.fromDbTimestamp(t.noDocument.readTime);return new Fs(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}return t.unknownDocument?(e=ji.fromSegments(t.unknownDocument.path),n=this.fromDbTimestamp(t.unknownDocument.version),new qs(e,n)):Vr("Unexpected DbRemoteDocument")},Bu.prototype.toDbRemoteDocument=function(t,e){var n=this.toDbTimestampKey(e),r=t.key.path.popLast().toArray();if(t instanceof Ms){var i=t.proto?t.proto:this.remoteSerializer.toDocument(t),o=t.hasCommittedMutations;return new mu(null,null,i,o,n,r)}if(t instanceof Fs){var a=t.key.path.toArray(),s=this.toDbTimestamp(t.version);return o=t.hasCommittedMutations,new mu(null,new function(t,e){this.path=t,this.readTime=e}(a,s),null,o,n,r)}if(t instanceof qs){a=t.key.path.toArray();var u=this.toDbTimestamp(t.version);return new mu(new function(t,e){this.path=t,this.version=e}(a,u),null,null,!0,n,r)}return Vr("Unexpected MaybeDocument")},Bu.prototype.toDbTimestampKey=function(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]},Bu.prototype.fromDbTimestampKey=function(t){var e=new oo(t[0],t[1]);return so.fromTimestamp(e)},Bu.prototype.toDbTimestamp=function(t){var e=t.toTimestamp();return new function(t,e){this.seconds=t,this.nanoseconds=e}(e.seconds,e.nanoseconds)},Bu.prototype.fromDbTimestamp=function(t){var e=new oo(t.seconds,t.nanoseconds);return so.fromTimestamp(e)},Bu.prototype.toDbMutationBatch=function(t,e){var n=this,r=e.baseMutations.map(function(t){return n.remoteSerializer.toMutation(t)}),i=e.mutations.map(function(t){return n.remoteSerializer.toMutation(t)});return new hu(t,e.batchId,e.localWriteTime.toMillis(),r,i)},Bu.prototype.fromDbMutationBatch=function(t){var e=this,n=(t.baseMutations||[]).map(function(t){return e.remoteSerializer.fromMutation(t)}),r=t.mutations.map(function(t){return e.remoteSerializer.fromMutation(t)}),i=oo.fromMillis(t.localWriteTimeMs);return new xo(t.batchId,i,n,r)},Bu.prototype.toDbResourcePaths=function(t){var e=[];return t.forEach(function(t){e.push(eo(t.path))}),e},Bu.prototype.fromDbResourcePaths=function(t){for(var e=ko(),n=0,r=t;n<r.length;n++){var i=r[n];e=e.add(new ji(io(i)))}return e},Bu.prototype.fromDbTarget=function(t){var e,n=this.fromDbTimestamp(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?this.fromDbTimestamp(t.lastLimboFreeSnapshotVersion):so.MIN,i=t.resumeToken;return e=function(t){return void 0!==t.documents}(t.query)?this.remoteSerializer.fromDocumentsTarget(t.query):this.remoteSerializer.fromQueryTarget(t.query),new Pu(e,t.targetId,ku.Listen,t.lastListenSequenceNumber,n,r,i)},Bu.prototype.toDbTarget=function(t){Br(ku.Listen===t.purpose,"Only queries with purpose "+ku.Listen+" may be stored, got "+t.purpose);var e,n,r=this.toDbTimestamp(t.snapshotVersion),i=this.toDbTimestamp(t.lastLimboFreeSnapshotVersion);return e=t.target.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(t.target):this.remoteSerializer.toQueryTarget(t.target),n=t.resumeToken instanceof Uint8Array?(Br(qo.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence ."),t.resumeToken.toString()):t.resumeToken,new bu(t.targetId,t.target.canonicalId(),r,n,t.sequenceNumber,i,e)},Bu);function Bu(t){this.remoteSerializer=t}function qu(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=bi(n,i);return 0===a?bi(r,o):a}var Uu=(ju.prototype.nextIndex=function(){return++this.previousIndex},ju.prototype.addElement=function(t){var e=[t,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();qu(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(ju.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),ju);function ju(t){this.maxElements=t,this.buffer=new go(qu),this.previousIndex=0}var Ku={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$u=(Wu.withCacheSize=function(t){return new Wu(t,Wu.DEFAULT_COLLECTION_PERCENTILE,Wu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},Wu.COLLECTION_DISABLED=-1,Wu.MINIMUM_CACHE_SIZE_BYTES=1048576,Wu.DEFAULT=new Wu(Wu.DEFAULT_CACHE_SIZE_BYTES=41943040,Wu.DEFAULT_COLLECTION_PERCENTILE=10,Wu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3),Wu.DISABLED=new Wu(Wu.COLLECTION_DISABLED,0,0),Wu);function Wu(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}var zu=(Qu.prototype.start=function(){Br(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==$u.COLLECTION_DISABLED&&this.scheduleGC()},Qu.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(Qu.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),Qu.prototype.scheduleGC=function(){var t=this;Br(null===this.gcTask,"Cannot schedule GC while a task is pending");var e=this.hasRun?3e5:6e4;Lr("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay($i.LruGarbageCollection,e,function(){return t.gcTask=null,t.hasRun=!0,t.localStore.collectGarbage(t.garbageCollector).then(function(){return t.scheduleGC()}).catch(ac)})},Qu);function Qu(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.hasRun=!1,this.gcTask=null}var Gu=(Hu.prototype.calculateTargetCount=function(t,e){return this.delegate.getSequenceNumberCount(t).next(function(t){return Math.floor(e/100*t)})},Hu.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Fo.resolve(ki.INVALID);var r=new Uu(e);return this.delegate.forEachTarget(t,function(t){return r.addElement(t.sequenceNumber)}).next(function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(t,function(t){return r.addElement(t)})}).next(function(){return r.maxValue})},Hu.prototype.removeTargets=function(t,e,n){return this.delegate.removeTargets(t,e,n)},Hu.prototype.removeOrphanedDocuments=function(t,e){return this.delegate.removeOrphanedDocuments(t,e)},Hu.prototype.collect=function(t,e){var n=this;return this.params.cacheSizeCollectionThreshold===$u.COLLECTION_DISABLED?(Lr("LruGarbageCollector","Garbage collection skipped; disabled"),Fo.resolve(Ku)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(Lr("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Ku):n.runGarbageCollection(t,e)})},Hu.prototype.getCacheSize=function(t){return this.delegate.getCacheSize(t)},Hu.prototype.runGarbageCollection=function(t,e){var n,r,i,o,a,s,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return r=e>c.params.maximumSequenceNumbersToCollect?(Lr("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),c.params.maximumSequenceNumbersToCollect):e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,a=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,s=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),xr()<=Er.DEBUG&&Lr("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+t+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-l)+"ms"),Fo.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},Hu);function Hu(t,e){this.delegate=t,this.params=e}var Yu=(Ju.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},Ju.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},Ju);function Ju(){this.onCommittedListeners=[]}var Xu,Zu="IndexedDbPersistence",tc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ec="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",nc=(i(rc,Xu=Yu),rc);function rc(t,e){var n=Xu.call(this)||this;return n.simpleDbTransaction=t,n.currentSequenceNumber=e,n}var ic=(oc.getStore=function(t,e){if(t instanceof nc)return qo.getStore(t.simpleDbTransaction,e);throw Vr("IndexedDbPersistence must use instances of IndexedDbTransaction")},oc.createIndexedDbPersistence=function(t){return u(this,void 0,void 0,function(){var e;return c(this,function(n){switch(n.label){case 0:if(!oc.isAvailable())throw new Wr($r.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(e=new oc(t.allowTabSynchronization,t.persistenceKey,t.clientId,t.platform,t.lruParams,t.queue,t.serializer,t.sequenceNumberSyncer)).start()];case 1:return n.sent(),[2,e]}})})},oc.prototype.start=function(){var t=this;return Br(!this.started,"IndexedDbPersistence double-started!"),Br(null!==this.window,"Expected 'window' to be defined"),qo.openOrCreate(this.dbName,iu,new ou(this.serializer)).then(function(e){return t.simpleDb=e,t.updateClientMetadataAndTryBecomePrimary()}).then(function(){return t.attachVisibilityHandler(),t.attachWindowUnloadHook(),t.scheduleClientMetadataAndPrimaryLeaseRefreshes(),t.simpleDb.runTransaction("readonly-idempotent",[Eu.store],function(t){return pa(t)})}).then(function(e){t.listenSequence=new ki(e,t.sequenceNumberSyncer)}).then(function(){t._started=!0}).catch(function(e){return t.simpleDb&&t.simpleDb.close(),Promise.reject(e)})},oc.prototype.setPrimaryStateListener=function(t){var e=this;return this.primaryStateListener=function(n){return u(e,void 0,void 0,function(){return c(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},oc.prototype.setDatabaseDeletedListener=function(t){var e=this;this.simpleDb.setVersionChangeListener(function(n){return u(e,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return null!==n.newVersion?[3,2]:[4,t()];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},oc.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.queue.enqueueAndForget(function(){return u(e,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},oc.prototype.updateClientMetadataAndTryBecomePrimary=function(){var t=this;return this.simpleDb.runTransaction("readwrite-idempotent",Ru,function(e){return uc(e).put(new Du(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.verifyPrimaryLease(e).next(function(e){e||(t.isPrimary=!1,t.queue.enqueueAndForget(function(){return t.primaryStateListener(!1)}))})}).next(function(){return t.canActAsPrimary(e)}).next(function(n){return t.isPrimary&&!n?t.releasePrimaryLeaseIfHeld(e).next(function(){return!1}):!!n&&t.acquireOrExtendPrimaryLease(e).next(function(){return!0})})}).catch(function(e){if(!t.allowTabSynchronization)throw e;return Lr(Zu,"Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.queue.enqueueAndForget(function(){return t.primaryStateListener(e)}),t.isPrimary=e})},oc.prototype.verifyPrimaryLease=function(t){var e=this;return sc(t).get(su.key).next(function(t){return Fo.resolve(e.isLocalClient(t))})},oc.prototype.removeClientMetadata=function(t){return uc(t).delete(this.clientId)},oc.prototype.maybeGarbageCollectMultiClientState=function(){return u(this,void 0,void 0,function(){var t=this;return c(this,function(e){switch(e.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary-idempotent",function(e){var n=oc.getStore(e,Du.store);return n.loadAll().next(function(e){var r=t.filterActiveClients(e,18e5),i=e.filter(function(t){return-1===r.indexOf(t)});return Fo.forEach(i,function(t){return n.delete(t.clientId)}).next(function(){return i})})})]);case 1:e.sent().forEach(function(e){t.window.localStorage.removeItem(t.zombiedClientLocalStorageKey(e.clientId))}),e.label=2;case 2:return[2]}})})},oc.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var t=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay($i.ClientMetadataRefresh,4e3,function(){return t.updateClientMetadataAndTryBecomePrimary().then(function(){return t.maybeGarbageCollectMultiClientState()}).then(function(){return t.scheduleClientMetadataAndPrimaryLeaseRefreshes()})})},oc.prototype.isLocalClient=function(t){return!!t&&t.ownerId===this.clientId},oc.prototype.canActAsPrimary=function(t){var e=this;return sc(t).get(su.key).next(function(n){if(null!==n&&e.isWithinAge(n.leaseTimestampMs,5e3)&&!e.isClientZombied(n.ownerId)){if(e.isLocalClient(n)&&e.networkEnabled)return!0;if(!e.isLocalClient(n)){if(!n.allowTabSynchronization)throw new Wr($r.FAILED_PRECONDITION,ec);return!1}}return!(!e.networkEnabled||!e.inForeground)||uc(t).loadAll().next(function(t){return void 0===e.filterActiveClients(t,5e3).find(function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1})})}).next(function(t){return e.isPrimary!==t&&Lr(Zu,"Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},oc.prototype.shutdown=function(){return u(this,void 0,void 0,function(){var t=this;return c(this,function(e){switch(e.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite-idempotent",[su.store,Du.store],function(e){return t.releasePrimaryLeaseIfHeld(e).next(function(){return t.removeClientMetadata(e)})})];case 1:return e.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}})})},oc.prototype.filterActiveClients=function(t,e){var n=this;return t.filter(function(t){return n.isWithinAge(t.updateTimeMs,e)&&!n.isClientZombied(t.clientId)})},oc.prototype.getActiveClients=function(){var t=this;return this.simpleDb.runTransaction("readonly-idempotent",[Du.store],function(e){return uc(e).loadAll().next(function(e){return t.filterActiveClients(e,18e5).map(function(t){return t.clientId})})})},oc.clearPersistence=function(t){return u(this,void 0,void 0,function(){var e;return c(this,function(n){switch(n.label){case 0:return oc.isAvailable()?(e=t+oc.MAIN_DATABASE,[4,qo.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}})})},Object.defineProperty(oc.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),oc.prototype.getMutationQueue=function(t){return Br(this.started,"Cannot initialize MutationQueue before persistence is started."),Zo.forUser(t,this.serializer,this.indexManager,this.referenceDelegate)},oc.prototype.getTargetCache=function(){return Br(this.started,"Cannot initialize TargetCache before persistence is started."),this.targetCache},oc.prototype.getRemoteDocumentCache=function(){return Br(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},oc.prototype.getIndexManager=function(){return Br(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},oc.prototype.runTransaction=function(t,e,n){var r=this;Lr(Zu,"Starting transaction:",t);var i,o=e.endsWith("idempotent"),a=e.startsWith("readonly")?o?"readonly-idempotent":"readonly":o?"readwrite-idempotent":"readwrite";return this.simpleDb.runTransaction(a,Ru,function(o){return i=new nc(o,r.listenSequence.next()),"readwrite-primary"===e||"readwrite-primary-idempotent"===e?r.verifyPrimaryLease(o).next(function(t){return!!t||r.canActAsPrimary(o)}).next(function(e){if(!e)throw Pr("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.queue.enqueueAndForget(function(){return r.primaryStateListener(!1)}),new Wr($r.FAILED_PRECONDITION,tc);return n(i)}).next(function(t){return r.acquireOrExtendPrimaryLease(o).next(function(){return t})}):r.verifyAllowTabSynchronization(o).next(function(){return n(i)})}).then(function(t){return i.raiseOnCommittedEvent(),t})},oc.prototype.verifyAllowTabSynchronization=function(t){var e=this;return sc(t).get(su.key).next(function(t){if(null!==t&&e.isWithinAge(t.leaseTimestampMs,5e3)&&!e.isClientZombied(t.ownerId)&&!e.isLocalClient(t)&&!t.allowTabSynchronization)throw new Wr($r.FAILED_PRECONDITION,ec)})},oc.prototype.acquireOrExtendPrimaryLease=function(t){var e=new su(this.clientId,this.allowTabSynchronization,Date.now());return sc(t).put(su.key,e)},oc.isAvailable=function(){return qo.isAvailable()},oc.buildStoragePrefix=function(t){var e=t.databaseId.projectId;return t.databaseId.isDefaultDatabase||(e+="."+t.databaseId.database),"firestore/"+t.persistenceKey+"/"+e+"/"},oc.prototype.releasePrimaryLeaseIfHeld=function(t){var e=this,n=sc(t);return n.get(su.key).next(function(t){return e.isLocalClient(t)?(Lr(Zu,"Releasing primary lease."),n.delete(su.key)):Fo.resolve()})},oc.prototype.isWithinAge=function(t,e){var n=Date.now();return!(t<n-e||n<t&&(Pr("Detected an update time that is in the future: "+t+" > "+n),1))},oc.prototype.attachVisibilityHandler=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){t.queue.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.updateClientMetadataAndTryBecomePrimary()})},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},oc.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(Br(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},oc.prototype.attachWindowUnloadHook=function(){var t=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){t.markClientZombied(),t.queue.enqueueAndForget(function(){return t.shutdown()})},this.window.addEventListener("unload",this.windowUnloadHandler))},oc.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(Br("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},oc.prototype.isClientZombied=function(t){try{var e=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(t));return Lr(Zu,"Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return Pr(Zu,"Failed to get zombied client id.",t),!1}},oc.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(t){Pr("Failed to set zombie client id.",t)}},oc.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(t){}},oc.prototype.zombiedClientLocalStorageKey=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},oc.MAIN_DATABASE="main",oc);function oc(t,e,n,r,i,o,a,s){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.queue=o,this.sequenceNumberSyncer=s,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(t){return Promise.resolve()},this.referenceDelegate=new cc(this,i),this.dbName=e+oc.MAIN_DATABASE,this.serializer=new Vu(a),this.document=r.document,this.targetCache=new ca(this.referenceDelegate,this.serializer),this.indexManager=new xu,this.remoteDocumentCache=new Qs(this.serializer,this.indexManager),!r.window||!r.window.localStorage)throw new Wr($r.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.webStorage=this.window.localStorage}function ac(t){return u(this,void 0,void 0,function(){return c(this,function(e){if(!function(t){return t.code===$r.FAILED_PRECONDITION&&t.message===tc}(t))throw t;return Lr(Zu,"Unexpectedly lost primary lease"),[2]})})}function sc(t){return t.store(su.store)}function uc(t){return t.store(Du.store)}var cc=(lc.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocmentCount(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},lc.prototype.orphanedDocmentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,function(t){e++}).next(function(){return e})},lc.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},lc.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){return this.forEachOrphanedDocument(t,function(t,n){return e(n)})},lc.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},lc.prototype.addReference=function(t,e){return hc(t,e)},lc.prototype.removeReference=function(t,e){return hc(t,e)},lc.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},lc.prototype.removeMutationReference=function(t,e){return hc(t,e)},lc.prototype.isPinned=function(t,e){return this.inMemoryPins.containsKey(e)?Fo.resolve(!0):function(t,e){var n=!1;return aa(t).iterateSerial(function(r){return ea(t,r,e).next(function(t){return t&&(n=!0),Fo.resolve(!t)})}).next(function(){return n})}(t,e)},lc.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.forEachOrphanedDocument(t,function(a,s){if(s<=e){var u=n.isPinned(t,a).next(function(e){if(!e)return o++,r.getEntry(t,a).next(function(){return r.removeEntry(a),da(t).delete([0,eo(a.path)])})});i.push(u)}}).next(function(){return Fo.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},lc.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},lc.prototype.updateLimboDocument=function(t,e){return hc(t,e)},lc.prototype.forEachOrphanedDocument=function(t,e){var n,r=da(t),i=ki.INVALID;return r.iterate({index:Tu.documentTargetsIndex},function(t,r){var o=t[0],a=(t[1],r.path),s=r.sequenceNumber;0===o?(i!==ki.INVALID&&e(new ji(io(n)),i),i=s,n=a):i=ki.INVALID}).next(function(){i!==ki.INVALID&&e(new ji(io(n)),i)})},lc.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},lc);function lc(t,e){this.db=t,this.inMemoryPins=null,this.garbageCollector=new Gu(this,e)}function hc(t,e){return da(t).put(function(t,e){return new Tu(0,eo(t.path),e)}(e,t.currentSequenceNumber))}var fc=Number,pc=fc.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),dc=fc.MAX_SAFE_INTEGER||Math.pow(2,53)-1,mc=fc.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};function yc(t){return null==t}function vc(t){return mc(t)&&t<=dc&&pc<=t}var gc,bc,wc=(Tc.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var t=this.path.canonicalString();null!==this.collectionGroup&&(t+="|cg:"+this.collectionGroup),t+="|f:";for(var e=0,n=this.filters;e<n.length;e++)t+=n[e].canonicalId(),t+=",";t+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)t+=i[r].canonicalId(),t+=",";yc(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.memoizedCanonicalId=t}return this.memoizedCanonicalId},Tc.prototype.toString=function(){var t=this.path.canonicalString();return null!==this.collectionGroup&&(t+=" collectionGroup="+this.collectionGroup),0<this.filters.length&&(t+=", filters: ["+this.filters.join(", ")+"]"),yc(this.limit)||(t+=", limit: "+this.limit),0<this.orderBy.length&&(t+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),"Target("+t+")"},Tc.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(e=0;e<this.filters.length;e++)if(!this.filters[e].isEqual(t.filters[e]))return!1;return this.collectionGroup===t.collectionGroup&&!!this.path.isEqual(t.path)&&!(null!==this.startAt?!this.startAt.isEqual(t.startAt):null!==t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)},Tc.prototype.isDocumentQuery=function(){return ji.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},Tc);function Tc(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null}(bc=gc=gc||{}).First="F",bc.Last="L";var Sc=(Ec.atPath=function(t){return new Ec(t)},Object.defineProperty(Ec.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var t=this.getInequalityFilterField(),e=this.getFirstOrderByField();if(null!==t&&null===e)t.isKeyField()?this.memoizedOrderBy=[Yc]:this.memoizedOrderBy=[new Gc(t),Yc];else{Br(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field.");for(var n=!(this.memoizedOrderBy=[]),r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}if(!n){var a=0<this.explicitOrderBy.length?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:$c.ASCENDING;this.memoizedOrderBy.push(a===$c.ASCENDING?Yc:Jc)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),Ec.prototype.addFilter=function(t){Br(null==this.getInequalityFilterField()||!(t instanceof Ac)||!t.isInequality()||t.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),Br(!this.isDocumentQuery(),"No filtering allowed for document query");var e=this.filters.concat([t]);return new Ec(this.path,this.collectionGroup,this.explicitOrderBy.slice(),e,this.limit,this.limitType,this.startAt,this.endAt)},Ec.prototype.addOrderBy=function(t){Br(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var e=this.explicitOrderBy.concat([t]);return new Ec(this.path,this.collectionGroup,e,this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},Ec.prototype.withLimitToFirst=function(t){return new Ec(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),t,gc.First,this.startAt,this.endAt)},Ec.prototype.withLimitToLast=function(t){return new Ec(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),t,gc.Last,this.startAt,this.endAt)},Ec.prototype.withStartAt=function(t){return new Ec(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,t,this.endAt)},Ec.prototype.withEndAt=function(t){return new Ec(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,t)},Ec.prototype.asCollectionQueryAtPath=function(t){return new Ec(t,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},Ec.prototype.matchesAllDocuments=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.explicitOrderBy.length||1===this.explicitOrderBy.length&&this.explicitOrderBy[0].field.isKeyField())},Ec.prototype.canonicalId=function(){return this.toTarget().canonicalId()+"|lt:"+this.limitType},Ec.prototype.toString=function(){return"Query(target="+this.toTarget().toString()+"; limitType="+this.limitType+")"},Ec.prototype.isEqual=function(t){return this.toTarget().isEqual(t.toTarget())&&this.limitType===t.limitType},Ec.prototype.docComparator=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(t,e);if(0!==a)return a;n=n||o.field.isKeyField()}return Br(n,"orderBy used that doesn't compare on key field"),0},Ec.prototype.matches=function(t){return this.matchesPathAndCollectionGroup(t)&&this.matchesOrderBy(t)&&this.matchesFilters(t)&&this.matchesBounds(t)},Ec.prototype.hasLimitToFirst=function(){return!yc(this.limit)&&this.limitType===gc.First},Ec.prototype.hasLimitToLast=function(){return!yc(this.limit)&&this.limitType===gc.Last},Ec.prototype.getFirstOrderByField=function(){return 0<this.explicitOrderBy.length?this.explicitOrderBy[0].field:null},Ec.prototype.getInequalityFilterField=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof Ac&&n.isInequality())return n.field}return null},Ec.prototype.findFilterOperator=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof Ac&&0<=t.indexOf(r.op))return r.op}return null},Ec.prototype.isDocumentQuery=function(){return this.toTarget().isDocumentQuery()},Ec.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},Ec.prototype.toTarget=function(){if(!this.memoizedTarget)if(this.limitType===gc.First)this.memoizedTarget=new wc(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var t=[],e=0,n=this.orderBy;e<n.length;e++){var r=n[e],i=r.dir===$c.DESCENDING?$c.ASCENDING:$c.DESCENDING;t.push(new Gc(r.field,i))}var o=this.endAt?new zc(this.endAt.position,!this.endAt.before):null,a=this.startAt?new zc(this.startAt.position,!this.startAt.before):null;this.memoizedTarget=new wc(this.path,this.collectionGroup,t,this.filters,this.limit,o,a)}return this.memoizedTarget},Ec.prototype.matchesPathAndCollectionGroup=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(e):ji.isDocumentKey(this.path)?this.path.isEqual(e):this.path.isImmediateParentOf(e)},Ec.prototype.matchesOrderBy=function(t){for(var e=0,n=this.explicitOrderBy;e<n.length;e++){var r=n[e];if(!r.field.isKeyField()&&null===t.field(r.field))return!1}return!0},Ec.prototype.matchesFilters=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},Ec.prototype.matchesBounds=function(t){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,t)||this.endAt&&this.endAt.sortsBeforeDocument(this.orderBy,t))},Ec.prototype.assertValidBound=function(t){Br(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},Ec);function Ec(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=gc.First),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.memoizedOrderBy=null,this.memoizedTarget=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}var Cc=(Ic.fromString=function(t){switch(t){case"<":return Ic.LESS_THAN;case"<=":return Ic.LESS_THAN_OR_EQUAL;case"==":return Ic.EQUAL;case">=":return Ic.GREATER_THAN_OR_EQUAL;case">":return Ic.GREATER_THAN;case"array-contains":return Ic.ARRAY_CONTAINS;case"in":return Ic.IN;case"array-contains-any":return Ic.ARRAY_CONTAINS_ANY;default:return Vr("Unknown FieldFilter operator: "+t)}},Ic.prototype.toString=function(){return this.name},Ic.prototype.isEqual=function(t){return this.name===t.name},Ic.LESS_THAN=new Ic("<"),Ic.LESS_THAN_OR_EQUAL=new Ic("<="),Ic.EQUAL=new Ic("=="),Ic.GREATER_THAN=new Ic(">"),Ic.GREATER_THAN_OR_EQUAL=new Ic(">="),Ic.ARRAY_CONTAINS=new Ic("array-contains"),Ic.IN=new Ic("in"),Ic.ARRAY_CONTAINS_ANY=new Ic("array-contains-any"),Ic);function Ic(t){this.name=t}var _c,Ac=(i(Dc,_c=function(){}),Dc.create=function(t,e,n){if(t.isKeyField())return e===Cc.IN?(Br(n instanceof Ns,"Comparing on key with IN, but filter value not an ArrayValue"),Br(n.internalValue.every(function(t){return t instanceof ws}),"Comparing on key with IN, but an array value was not a RefValue"),new xc(t,n)):(Br(n instanceof ws,"Comparing on key, but filter value not a RefValue"),Br(e!==Cc.ARRAY_CONTAINS&&e!==Cc.ARRAY_CONTAINS_ANY,"'"+e.toString()+"' queries don't make sense on document keys."),new kc(t,e,n));if(n.isEqual(za.INSTANCE)){if(e!==Cc.EQUAL)throw new Wr($r.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new Dc(t,e,n)}if(n.isEqual(os.NAN)){if(e!==Cc.EQUAL)throw new Wr($r.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new Dc(t,e,n)}return e===Cc.ARRAY_CONTAINS?new Pc(t,n):e===Cc.IN?(Br(n instanceof Ns,"IN filter has invalid value: "+n.toString()),new Bc(t,n)):e===Cc.ARRAY_CONTAINS_ANY?(Br(n instanceof Ns,"ARRAY_CONTAINS_ANY filter has invalid value: "+n.toString()),new jc(t,n)):new Dc(t,e,n)},Dc.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&this.value.typeOrder===e.typeOrder&&this.matchesComparison(e.compareTo(this.value))},Dc.prototype.matchesComparison=function(t){switch(this.op){case Cc.LESS_THAN:return t<0;case Cc.LESS_THAN_OR_EQUAL:return t<=0;case Cc.EQUAL:return 0===t;case Cc.GREATER_THAN:return 0<t;case Cc.GREATER_THAN_OR_EQUAL:return 0<=t;default:return Vr("Unknown FieldFilter operator: "+this.op)}},Dc.prototype.isInequality=function(){return 0<=[Cc.LESS_THAN,Cc.LESS_THAN_OR_EQUAL,Cc.GREATER_THAN,Cc.GREATER_THAN_OR_EQUAL].indexOf(this.op)},Dc.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},Dc.prototype.isEqual=function(t){return t instanceof Dc&&this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&this.value.isEqual(t.value)},Dc.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},Dc);function Dc(t,e,n){var r=_c.call(this)||this;return r.field=t,r.op=e,r.value=n,r}var Nc,kc=(i(Oc,Nc=Ac),Oc.prototype.matches=function(t){var e=this.value,n=ji.comparator(t.key,e.key);return this.matchesComparison(n)},Oc);function Oc(){return null!==Nc&&Nc.apply(this,arguments)||this}var Rc,xc=(i(Mc,Rc=Ac),Mc.prototype.matches=function(t){return this.value.internalValue.some(function(e){return t.key.isEqual(e.key)})},Mc);function Mc(t,e){var n=Rc.call(this,t,Cc.IN,e)||this;return n.value=e,n}var Lc,Pc=(i(Fc,Lc=Ac),Fc.prototype.matches=function(t){var e=t.field(this.field);return e instanceof Ns&&e.contains(this.value)},Fc);function Fc(t,e){return Lc.call(this,t,Cc.ARRAY_CONTAINS,e)||this}var Vc,Bc=(i(qc,Vc=Ac),qc.prototype.matches=function(t){var e=this.value,n=t.field(this.field);return null!==n&&e.contains(n)},qc);function qc(t,e){var n=Vc.call(this,t,Cc.IN,e)||this;return n.value=e,n}var Uc,jc=(i(Kc,Uc=Ac),Kc.prototype.matches=function(t){var e=this,n=t.field(this.field);return n instanceof Ns&&n.internalValue.some(function(t){return e.value.contains(t)})},Kc);function Kc(t,e){var n=Uc.call(this,t,Cc.ARRAY_CONTAINS_ANY,e)||this;return n.value=e,n}var $c=(Wc.prototype.toString=function(){return this.name},Wc.ASCENDING=new Wc("asc"),Wc.DESCENDING=new Wc("desc"),Wc);function Wc(t){this.name=t}var zc=(Qc.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,n=this.position;e<n.length;e++)t+=n[e].toString();return t},Qc.prototype.sortsBeforeDocument=function(t,e){Br(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(i.field.isKeyField())Br(o instanceof ws,"Bound has a non-key value where the key path is being used."),n=ji.comparator(o.key,e.key);else{var a=e.field(i.field);Br(null!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(i.dir===$c.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},Qc.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++){var n=this.position[e],r=t.position[e];if(!n.isEqual(r))return!1}return!0},Qc);function Qc(t,e){this.position=t,this.before=e}var Gc=(Hc.prototype.compare=function(t,e){var n=this.isKeyOrderBy?Ms.compareByKey(t,e):Ms.compareByField(this.field,t,e);switch(this.dir){case $c.ASCENDING:return n;case $c.DESCENDING:return-1*n;default:return Vr("Unknown direction: "+this.dir)}},Hc.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},Hc.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},Hc.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},Hc);function Hc(t,e){this.field=t,void 0===e&&(e=$c.ASCENDING),this.dir=e,this.isKeyOrderBy=t.isKeyField()}var Yc=new Gc(qi.keyField(),$c.ASCENDING),Jc=new Gc(qi.keyField(),$c.DESCENDING),Xc=(Zc.prototype.setLocalDocumentsView=function(t){this.localDocumentsView=t},Zc.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return Br(void 0!==this.localDocumentsView,"setLocalDocumentsView() not called"),e.matchesAllDocuments()?this.executeFullCollectionScan(t,e):n.isEqual(so.MIN)?this.executeFullCollectionScan(t,e):this.localDocumentsView.getDocuments(t,r).next(function(o){var a=i.applyQuery(e,o);return(e.hasLimitToFirst()||e.hasLimitToLast())&&i.needsRefill(e.limitType,a,r,n)?i.executeFullCollectionScan(t,e):(xr()<=Er.DEBUG&&Lr("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),e.toString()),i.localDocumentsView.getDocumentsMatchingQuery(t,e,n).next(function(t){return a.forEach(function(e){t=t.insert(e.key,e)}),t}))})},Zc.prototype.applyQuery=function(t,e){var n=new go(function(e,n){return t.docComparator(e,n)});return e.forEach(function(e,r){r instanceof Ms&&t.matches(r)&&(n=n.add(r))}),n},Zc.prototype.needsRefill=function(t,e,n,r){if(n.size!==e.size)return!0;var i=t===gc.First?e.last():e.first();return!!i&&(i.hasPendingWrites||0<i.version.compareTo(r))},Zc.prototype.executeFullCollectionScan=function(t,e){return xr()<=Er.DEBUG&&Lr("IndexFreeQueryEngine","Using full collection scan to execute query: %s",e.toString()),this.localDocumentsView.getDocumentsMatchingQuery(t,e,so.MIN)},Zc);function Zc(){}var tl=(el.prototype.getDocument=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.getDocumentInternal(t,e,r)})},el.prototype.getDocumentInternal=function(t,e,n){return this.remoteDocumentCache.getEntry(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].applyToLocalView(e,t);return t})},el.prototype.applyLocalMutationsToDocuments=function(t,e,n){var r=Co();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].applyToLocalView(t,e);r=r.insert(t,e)}),r},el.prototype.getDocuments=function(t,e){var n=this;return this.remoteDocumentCache.getEntries(t,e).next(function(e){return n.getLocalViewOfDocuments(t,e)})},el.prototype.getLocalViewOfDocuments=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(r){var i=n.applyLocalMutationsToDocuments(t,e,r),o=Eo();return i.forEach(function(t,e){e=e||new Fs(t,so.forDeletedDoc()),o=o.insert(t,e)}),o})},el.prototype.getDocumentsMatchingQuery=function(t,e,n){return e.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(t,e.path):e.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(t,e,n):this.getDocumentsMatchingCollectionQuery(t,e,n)},el.prototype.getDocumentsMatchingDocumentQuery=function(t,e){return this.getDocument(t,new ji(e)).next(function(t){var e=_o();return t instanceof Ms&&(e=e.insert(t.key,t)),e})},el.prototype.getDocumentsMatchingCollectionGroupQuery=function(t,e,n){var r=this;Br(e.path.isEmpty(),"Currently we only support collection group queries at the root.");var i=e.collectionGroup,o=_o();return this.indexManager.getCollectionParents(t,i).next(function(a){return Fo.forEach(a,function(a){var s=e.asCollectionQueryAtPath(a.child(i));return r.getDocumentsMatchingCollectionQuery(t,s,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},el.prototype.getDocumentsMatchingCollectionQuery=function(t,e,n){var r,i,o=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o.mutationQueue.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return i=e,o.addMissingBaseDocuments(t,i,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c),h=u.applyToLocalView(l,l,o.localWriteTime);r=h instanceof Ms?r.insert(c,h):r.remove(c)}})}).next(function(){return r.forEach(function(t,n){e.matches(n)||(r=r.remove(t))}),r})},el.prototype.addMissingBaseDocuments=function(t,e,n){for(var r=ko(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof Na&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.remoteDocumentCache.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof Ms&&(c=c.insert(t,e))}),c})},el);function el(t,e,n){this.remoteDocumentCache=t,this.mutationQueue=e,this.indexManager=n}var nl=(rl.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},rl.prototype.addReference=function(t,e){var n=new il(t,e);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},rl.prototype.addReferences=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},rl.prototype.removeReference=function(t,e){this.removeRef(new il(t,e))},rl.prototype.removeReferences=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},rl.prototype.removeReferencesForId=function(t){var e=this,n=ji.EMPTY,r=new il(n,t),i=new il(n,t+1),o=[];return this.refsByTarget.forEachInRange([r,i],function(t){e.removeRef(t),o.push(t.key)}),o},rl.prototype.removeAllReferences=function(){var t=this;this.refsByKey.forEach(function(e){return t.removeRef(e)})},rl.prototype.removeRef=function(t){this.refsByKey=this.refsByKey.delete(t),this.refsByTarget=this.refsByTarget.delete(t)},rl.prototype.referencesForId=function(t){var e=ji.EMPTY,n=new il(e,t),r=new il(e,t+1),i=ko();return this.refsByTarget.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},rl.prototype.containsKey=function(t){var e=new il(t,0),n=this.refsByKey.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},rl);function rl(){this.refsByKey=new go(il.compareByKey),this.refsByTarget=new go(il.compareByTargetId)}var il=(ol.compareByKey=function(t,e){return ji.comparator(t.key,e.key)||bi(t.targetOrBatchId,e.targetOrBatchId)},ol.compareByTargetId=function(t,e){return bi(t.targetOrBatchId,e.targetOrBatchId)||ji.comparator(t.key,e.key)},ol);function ol(t,e){this.key=t,this.targetOrBatchId=e}var al=(sl.prototype.start=function(){return this.synchronizeLastDocumentChangeReadTime()},sl.prototype.handleUserChange=function(t){return u(this,void 0,void 0,function(){var e,n,r,i=this;return c(this,function(o){switch(o.label){case 0:return e=this.mutationQueue,n=this.localDocuments,[4,this.persistence.runTransaction("Handle user change","readonly-idempotent",function(r){var o;return i.mutationQueue.getAllMutationBatches(r).next(function(a){return o=a,e=i.persistence.getMutationQueue(t),n=new tl(i.remoteDocuments,e,i.persistence.getIndexManager()),e.getAllMutationBatches(r)}).next(function(t){for(var e=[],i=[],a=ko(),s=0,u=o;s<u.length;s++){var c=u[s];e.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var p=0,d=t;p<d.length;p++){c=d[p],i.push(c.batchId);for(var m=0,y=c.mutations;m<y.length;m++)f=y[m],a=a.add(f.key)}return n.getDocuments(r,a).next(function(t){return{affectedDocuments:t,removedBatchIds:e,addedBatchIds:i}})})})];case 1:return r=o.sent(),this.mutationQueue=e,this.localDocuments=n,this.queryEngine.setLocalDocumentsView(this.localDocuments),[2,r]}})})},sl.prototype.localWrite=function(t){var e,n=this,r=oo.now(),i=t.reduce(function(t,e){return t.add(e.key)},ko());return this.persistence.runTransaction("Locally write mutations","readwrite-idempotent",function(o){return n.localDocuments.getDocuments(o,i).next(function(i){e=i;for(var a=[],s=0,u=t;s<u.length;s++){var c=u[s],l=c.extractBaseValue(e.get(c.key));null!=l&&a.push(new Na(c.key,l,l.fieldMask(),Ta.exists(!0)))}return n.mutationQueue.addMutationBatch(o,r,a,t)})}).then(function(t){var n=t.applyToLocalDocumentSet(e);return{batchId:t.batchId,changes:n}})},sl.prototype.lookupMutationDocuments=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly-idempotent",function(n){return e.mutationQueue.lookupMutationKeys(n,t).next(function(t){return t?e.localDocuments.getDocuments(n,t):Fo.resolve(null)})})},sl.prototype.acknowledgeBatch=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary-idempotent",function(n){var r=t.batch.keys(),i=e.remoteDocuments.newChangeBuffer({trackRemovals:!0});return e.mutationQueue.acknowledgeBatch(n,t.batch,t.streamToken).next(function(){return e.applyWriteToRemoteDocuments(n,t,i)}).next(function(){return i.apply(n)}).next(function(){return e.mutationQueue.performConsistencyCheck(n)}).next(function(){return e.localDocuments.getDocuments(n,r)})})},sl.prototype.rejectBatch=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary-idempotent",function(n){var r;return e.mutationQueue.lookupMutationBatch(n,t).next(function(t){return Br(null!==t,"Attempt to reject nonexistent batch!"),r=t.keys(),e.mutationQueue.removeMutationBatch(n,t)}).next(function(){return e.mutationQueue.performConsistencyCheck(n)}).next(function(){return e.localDocuments.getDocuments(n,r)})})},sl.prototype.getHighestUnacknowledgedBatchId=function(){var t=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly-idempotent",function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)})},sl.prototype.getLastStreamToken=function(){var t=this;return this.persistence.runTransaction("Get last stream token","readonly-idempotent",function(e){return t.mutationQueue.getLastStreamToken(e)})},sl.prototype.setLastStreamToken=function(t){var e=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary-idempotent",function(n){return e.mutationQueue.setLastStreamToken(n,t)})},sl.prototype.getLastRemoteSnapshotVersion=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly-idempotent",function(e){return t.targetCache.getLastRemoteSnapshotVersion(e)})},sl.prototype.applyRemoteEvent=function(t){var e=this,n=t.snapshotVersion,r=this.targetDataByTarget;return this.persistence.runTransaction("Apply remote event","readwrite-primary-idempotent",function(i){var o=e.remoteDocuments.newChangeBuffer({trackRemovals:!0});r=e.targetDataByTarget;var a=[];Yr(t.targetChanges,function(t,o){var s=r.get(t);if(s){a.push(e.targetCache.removeMatchingKeys(i,o.removedDocuments,t).next(function(){return e.targetCache.addMatchingKeys(i,o.addedDocuments,t)}));var u=o.resumeToken;if(0<u.length){var c=s.withResumeToken(u,n).withSequenceNumber(i.currentSequenceNumber);r=r.insert(t,c),sl.shouldPersistTargetData(s,c,o)&&a.push(e.targetCache.updateTargetData(i,c))}}});var s=Eo(),u=ko();if(t.documentUpdates.forEach(function(t,e){u=u.add(t)}),a.push(o.getEntries(i,u).next(function(r){t.documentUpdates.forEach(function(u,c){var l=r.get(u);c instanceof Fs&&c.version.isEqual(so.MIN)?(o.removeEntry(u,n),s=s.insert(u,c)):null==l||0<c.version.compareTo(l.version)||0===c.version.compareTo(l.version)&&l.hasPendingWrites?(Br(!so.MIN.isEqual(n),"Cannot add a document when the remote version is zero"),o.addEntry(c,n),s=s.insert(u,c)):Lr("LocalStore","Ignoring outdated watch update for ",u,". Current version:",l.version," Watch version:",c.version),t.resolvedLimboDocuments.has(u)&&a.push(e.persistence.referenceDelegate.updateLimboDocument(i,u))})})),!n.isEqual(so.MIN)){var c=e.targetCache.getLastRemoteSnapshotVersion(i).next(function(t){return Br(0<=n.compareTo(t),"Watch stream reverted to previous snapshot?? "+n+" < "+t),e.targetCache.setTargetsMetadata(i,i.currentSequenceNumber,n)});a.push(c)}return Fo.waitFor(a).next(function(){return o.apply(i)}).next(function(){return e.localDocuments.getLocalViewOfDocuments(i,s)})}).then(function(t){return e.targetDataByTarget=r,t})},sl.shouldPersistTargetData=function(t,e,n){return Br(0<e.resumeToken.length,"Attempted to persist target data with no resume token"),0===t.resumeToken.length||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||0<n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size},sl.prototype.notifyLocalViewChanges=function(t){for(var e=this,n=0,r=t;n<r.length;n++){var i=r[n],o=i.targetId;if(this.localViewReferences.addReferences(i.addedKeys,o),this.localViewReferences.removeReferences(i.removedKeys,o),!i.fromCache){var a=this.targetDataByTarget.get(o);Br(null!==a,"Can't set limbo-free snapshot version for unknown target: "+o);var s=a.snapshotVersion,u=a.withLastLimboFreeSnapshotVersion(s);this.targetDataByTarget=this.targetDataByTarget.insert(o,u)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite-idempotent",function(n){return Fo.forEach(t,function(t){return Fo.forEach(t.removedKeys,function(t){return e.persistence.referenceDelegate.removeReference(n,t)})})})},sl.prototype.nextMutationBatch=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly-idempotent",function(n){return void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)})},sl.prototype.readDocument=function(t){var e=this;return this.persistence.runTransaction("read document","readonly-idempotent",function(n){return e.localDocuments.getDocument(n,t)})},sl.prototype.allocateTarget=function(t){var e=this;return this.persistence.runTransaction("Allocate target","readwrite-idempotent",function(n){var r;return e.targetCache.getTargetData(n,t).next(function(i){return i?(r=i,Fo.resolve(r)):e.targetCache.allocateTargetId(n).next(function(i){return r=new Pu(t,i,ku.Listen,n.currentSequenceNumber),e.targetCache.addTargetData(n,r).next(function(){return r})})})}).then(function(n){return null===e.targetDataByTarget.get(n.targetId)&&(e.targetDataByTarget=e.targetDataByTarget.insert(n.targetId,n),e.targetIdByTarget.set(t,n.targetId)),n})},sl.prototype.getTargetData=function(t,e){var n=this.targetIdByTarget.get(e);return void 0!==n?Fo.resolve(this.targetDataByTarget.get(n)):this.targetCache.getTargetData(t,e)},sl.prototype.releaseTarget=function(t,e){var n=this,r=this.targetDataByTarget.get(t);Br(null!==r,"Tried to release nonexistent target: "+t);var i=e?"readwrite-idempotent":"readwrite-primary-idempotent";return this.persistence.runTransaction("Release target",i,function(i){var o=n.localViewReferences.removeReferencesForId(t);return e?Fo.resolve():Fo.forEach(o,function(t){return n.persistence.referenceDelegate.removeReference(i,t)}).next(function(){n.persistence.referenceDelegate.removeTarget(i,r)})}).then(function(){n.targetDataByTarget=n.targetDataByTarget.remove(t),n.targetIdByTarget.delete(r.target)})},sl.prototype.executeQuery=function(t,e){var n=this,r=so.MIN,i=ko();return this.persistence.runTransaction("Execute query","readonly-idempotent",function(o){return n.getTargetData(o,t.toTarget()).next(function(t){if(t)return r=t.lastLimboFreeSnapshotVersion,n.targetCache.getMatchingKeysForTargetId(o,t.targetId).next(function(t){i=t})}).next(function(){return n.queryEngine.getDocumentsMatchingQuery(o,t,e?r:so.MIN,e?i:ko())}).next(function(t){return{documents:t,remoteKeys:i}})})},sl.prototype.remoteDocumentKeys=function(t){var e=this;return this.persistence.runTransaction("Remote document keys","readonly-idempotent",function(n){return e.targetCache.getMatchingKeysForTargetId(n,t)})},sl.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},sl.prototype.removeCachedMutationBatchMetadata=function(t){this.mutationQueue.removeCachedMutationKeys(t)},sl.prototype.setNetworkEnabled=function(t){this.persistence.setNetworkEnabled(t)},sl.prototype.applyWriteToRemoteDocuments=function(t,e,n){var r=this,i=e.batch,o=i.keys(),a=Fo.resolve();return o.forEach(function(r){a=a.next(function(){return n.getEntry(t,r)}).next(function(t){var o=t,a=e.docVersions.get(r);Br(null!==a,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(a)<0)&&((o=i.applyToRemoteDocument(r,o,e))?n.addEntry(o,e.commitVersion):Br(!t,"Mutation batch "+i+" applied to document "+t+" resulted in null"))})}),a.next(function(){return r.mutationQueue.removeMutationBatch(t,i)})},sl.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary-idempotent",function(n){return t.collect(n,e.targetDataByTarget)})},sl.prototype.getTarget=function(t){var e=this,n=this.targetDataByTarget.get(t);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly-idempotent",function(n){return e.targetCache.getTargetDataForTarget(n,t).next(function(t){return t?t.target:null})})},sl.prototype.getNewDocumentChanges=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly-idempotent",function(e){return t.remoteDocuments.getNewDocumentChanges(e,t.lastDocumentChangeReadTime)}).then(function(e){var n=e.changedDocs,r=e.readTime;return t.lastDocumentChangeReadTime=r,n})},sl.prototype.synchronizeLastDocumentChangeReadTime=function(){return u(this,void 0,void 0,function(){var t,e=this;return c(this,function(n){return this.remoteDocuments instanceof Qs?(t=this.remoteDocuments,[2,this.persistence.runTransaction("Synchronize last document change read time","readonly-idempotent",function(e){return t.getLastDocumentChange(e)}).then(function(t){var n=t.readTime;e.lastDocumentChangeReadTime=n})]):[2]})})},sl.RESUME_TOKEN_MAX_AGE_MICROS=3e8,sl);function sl(t,e,n){this.persistence=t,this.queryEngine=e,this.localViewReferences=new nl,this.targetDataByTarget=new co(bi),this.targetIdByTarget=new js(function(t){return t.canonicalId()}),this.lastDocumentChangeReadTime=so.MIN,Br(t.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=t.getMutationQueue(n),this.remoteDocuments=t.getRemoteDocumentCache(),this.targetCache=t.getTargetCache(),this.localDocuments=new tl(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager()),this.queryEngine.setLocalDocumentsView(this.localDocuments)}var ul=(cl.prototype.checkEmpty=function(t){return Fo.resolve(0===this.mutationQueue.length)},cl.prototype.acknowledgeBatch=function(t,e,n){var r=e.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");Br(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return Br(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,Fo.resolve()},cl.prototype.getLastStreamToken=function(t){return Fo.resolve(this.lastStreamToken)},cl.prototype.setLastStreamToken=function(t,e){return this.lastStreamToken=e,Fo.resolve()},cl.prototype.addMutationBatch=function(t,e,n,r){Br(0!==r.length,"Mutation batches should not be empty");var i=this.nextBatchId;this.nextBatchId++,0<this.mutationQueue.length&&Br(this.mutationQueue[this.mutationQueue.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new xo(i,e,n,r);this.mutationQueue.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new il(u.key,i)),this.indexManager.addToCollectionParentIndex(t,u.key.path.popLast())}return Fo.resolve(o)},cl.prototype.lookupMutationBatch=function(t,e){return Fo.resolve(this.findMutationBatch(e))},cl.prototype.lookupMutationKeys=function(t,e){var n=this.findMutationBatch(e);return Br(null!=n,"Failed to find local mutation batch."),Fo.resolve(n.keys())},cl.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.indexOfBatchId(n),i=r<0?0:r;return Fo.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)},cl.prototype.getHighestUnacknowledgedBatchId=function(){return Fo.resolve(0===this.mutationQueue.length?-1:this.nextBatchId-1)},cl.prototype.getAllMutationBatches=function(t){return Fo.resolve(this.mutationQueue.slice())},cl.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new il(e,0),i=new il(e,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],function(t){Br(e.isEqual(t.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(t.targetOrBatchId);Br(null!==r,"Batches in the index must exist in the main table"),o.push(r)}),Fo.resolve(o)},cl.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new go(bi);return e.forEach(function(t){var e=new il(t,0),i=new il(t,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([e,i],function(e){Br(t.isEqual(e.key),"For each key, should only iterate over a single key's batches"),r=r.add(e.targetOrBatchId)})}),Fo.resolve(this.findMutationBatches(r))},cl.prototype.getAllMutationBatchesAffectingQuery=function(t,e){Br(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=e.path,r=n.length+1,i=n;ji.isDocumentKey(i)||(i=i.child(""));var o=new il(new ji(i),0),a=new go(bi);return this.batchesByDocumentKey.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.targetOrBatchId)),!0)},o),Fo.resolve(this.findMutationBatches(a))},cl.prototype.findMutationBatches=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.findMutationBatch(t);null!==r&&n.push(r)}),n},cl.prototype.removeMutationBatch=function(t,e){var n=this;Br(0===this.indexOfExistingBatchId(e.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return Fo.forEach(e.mutations,function(i){var o=new il(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(t,i.key)}).next(function(){n.batchesByDocumentKey=r})},cl.prototype.removeCachedMutationKeys=function(t){},cl.prototype.containsKey=function(t,e){var n=new il(e,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return Fo.resolve(e.isEqual(r&&r.key))},cl.prototype.performConsistencyCheck=function(t){return 0===this.mutationQueue.length&&Br(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),Fo.resolve()},cl.prototype.indexOfExistingBatchId=function(t,e){var n=this.indexOfBatchId(t);return Br(0<=n&&n<this.mutationQueue.length,"Batches must exist to be "+e),n},cl.prototype.indexOfBatchId=function(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId},cl.prototype.findMutationBatch=function(t){var e=this.indexOfBatchId(t);if(e<0||e>=this.mutationQueue.length)return null;var n=this.mutationQueue[e];return Br(n.batchId===t,"If found batch must match"),n},cl);function cl(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=jr(),this.batchesByDocumentKey=new go(il.compareByKey)}var ll,hl=(fl.prototype.addEntry=function(t,e,n){Br(!n.isEqual(so.MIN),"Cannot add a document with a read time of zero");var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.sizer(e);return this.docs=this.docs.insert(r,{maybeDocument:e,size:a,readTime:n}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())},fl.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},fl.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Fo.resolve(n?n.maybeDocument:null)},fl.prototype.getEntries=function(t,e){var n=this,r=Co();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null)}),Fo.resolve(r)},fl.prototype.getDocumentsMatchingQuery=function(t,e,n){Br(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var r=_o(),i=new ji(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.maybeDocument,l=u.readTime;if(!e.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||c instanceof Ms&&e.matches(c)&&(r=r.insert(c.key,c))}return Fo.resolve(r)},fl.prototype.forEachDocumentKey=function(t,e){return Fo.forEach(this.docs,function(t){return e(t)})},fl.prototype.getNewDocumentChanges=function(t,e){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},fl.prototype.newChangeBuffer=function(t){return new fl.RemoteDocumentChangeBuffer(this)},fl.prototype.getSize=function(t){return Fo.resolve(this.size)},fl.RemoteDocumentChangeBuffer=(i(pl,ll=$s),pl.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i?n.push(e.documentCache.addEntry(t,i,e.readTime)):e.documentCache.removeEntry(r)}),Fo.waitFor(n)},pl.prototype.getFromCache=function(t,e){return this.documentCache.getEntry(t,e)},pl.prototype.getAllFromCache=function(t,e){return this.documentCache.getEntries(t,e)},pl),fl);function fl(t,e){this.indexManager=t,this.sizer=e,this.docs=new co(ji.comparator),this.size=0}function pl(t){var e=ll.call(this)||this;return e.documentCache=t,e}var dl=(ml.prototype.forEachTarget=function(t,e){return this.targets.forEach(function(t,n){return e(n)}),Fo.resolve()},ml.prototype.getLastRemoteSnapshotVersion=function(t){return Fo.resolve(this.lastRemoteSnapshotVersion)},ml.prototype.getHighestSequenceNumber=function(t){return Fo.resolve(this.highestSequenceNumber)},ml.prototype.allocateTargetId=function(t){var e=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=e,Fo.resolve(e)},ml.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.highestSequenceNumber&&(this.highestSequenceNumber=e),Fo.resolve()},ml.prototype.saveTargetData=function(t){this.targets.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e),t.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=t.sequenceNumber)},ml.prototype.addTargetData=function(t,e){return Br(!this.targets.has(e.target),"Adding a target that already exists"),this.saveTargetData(e),this.targetCount+=1,Fo.resolve()},ml.prototype.updateTargetData=function(t,e){return Br(this.targets.has(e.target),"Updating a non-existent target"),this.saveTargetData(e),Fo.resolve()},ml.prototype.removeTargetData=function(t,e){return Br(0<this.targetCount,"Removing a target from an empty cache"),Br(this.targets.has(e.target),"Removing a non-existent target from the cache"),this.targets.delete(e.target),this.references.removeReferencesForId(e.targetId),this.targetCount-=1,Fo.resolve()},ml.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.targets.forEach(function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.targets.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)}),Fo.waitFor(o).next(function(){return i})},ml.prototype.getTargetCount=function(t){return Fo.resolve(this.targetCount)},ml.prototype.getTargetData=function(t,e){var n=this.targets.get(e)||null;return Fo.resolve(n)},ml.prototype.getTargetDataForTarget=function(t,e){return Vr("Not yet implemented.")},ml.prototype.addMatchingKeys=function(t,e,n){this.references.addReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.addReference(t,e))}),Fo.waitFor(i)},ml.prototype.removeMatchingKeys=function(t,e,n){this.references.removeReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.removeReference(t,e))}),Fo.waitFor(i)},ml.prototype.removeMatchingKeysForTargetId=function(t,e){return this.references.removeReferencesForId(e),Fo.resolve()},ml.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.references.referencesForId(e);return Fo.resolve(n)},ml.prototype.containsKey=function(t,e){return Fo.resolve(this.references.containsKey(e))},ml);function ml(t){this.persistence=t,this.targets=new js(function(t){return t.canonicalId()}),this.lastRemoteSnapshotVersion=so.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new nl,this.targetCount=0,this.targetIdGenerator=sa.forTargetCache()}var yl=(vl.createLruPersistence=function(t,e,n){return new vl(t,function(t){return new El(t,new Vu(e),n)})},vl.createEagerPersistence=function(t){return new vl(t,function(t){return new Tl(t)})},vl.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(vl.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),vl.prototype.getActiveClients=function(){return u(this,void 0,void 0,function(){return c(this,function(t){return[2,[this.clientId]]})})},vl.prototype.setPrimaryStateListener=function(t){return t(!0)},vl.prototype.setDatabaseDeletedListener=function(){},vl.prototype.setNetworkEnabled=function(t){},vl.prototype.getIndexManager=function(){return this.indexManager},vl.prototype.getMutationQueue=function(t){var e=this.mutationQueues[t.toKey()];return e||(e=new ul(this.indexManager,this.referenceDelegate),this.mutationQueues[t.toKey()]=e),e},vl.prototype.getTargetCache=function(){return this.targetCache},vl.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},vl.prototype.runTransaction=function(t,e,n){var r=this;Lr("MemoryPersistence","Starting transaction:",t);var i=new bl(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next(function(t){return r.referenceDelegate.onTransactionCommitted(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},vl.prototype.mutationQueuesContainKey=function(t,e){return Fo.or(function(t){var e=[];return Jr(t,function(t,n){return e.push(n)}),e}(this.mutationQueues).map(function(n){return function(){return n.containsKey(t,e)}}))},vl);function vl(t,e){var n=this;this.clientId=t,this.mutationQueues={},this.listenSequence=new ki(0),this._started=!1,this._started=!0,this.referenceDelegate=e(this),this.targetCache=new dl(this),this.indexManager=new tu,this.remoteDocumentCache=new hl(this.indexManager,function(t){return n.referenceDelegate.documentSize(t)})}var gl,bl=(i(wl,gl=Yu),wl);function wl(t){var e=gl.call(this)||this;return e.currentSequenceNumber=t,e}var Tl=(Object.defineProperty(Sl.prototype,"orphanedDocuments",{get:function(){if(this._orphanedDocuments)return this._orphanedDocuments;throw Vr("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),Sl.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},Sl.prototype.addReference=function(t,e){return this.orphanedDocuments.delete(e),Fo.resolve()},Sl.prototype.removeReference=function(t,e){return this.orphanedDocuments.add(e),Fo.resolve()},Sl.prototype.removeMutationReference=function(t,e){return this.orphanedDocuments.add(e),Fo.resolve()},Sl.prototype.removeTarget=function(t,e){var n=this,r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.orphanedDocuments.add(t)})}).next(function(){return r.removeTargetData(t,e)})},Sl.prototype.onTransactionStarted=function(){this._orphanedDocuments=new Set},Sl.prototype.onTransactionCommitted=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Fo.forEach(this.orphanedDocuments,function(r){return e.isReferenced(t,r).next(function(t){t||n.removeEntry(r)})}).next(function(){return e._orphanedDocuments=null,n.apply(t)})},Sl.prototype.updateLimboDocument=function(t,e){var n=this;return this.isReferenced(t,e).next(function(t){t?n.orphanedDocuments.delete(e):n.orphanedDocuments.add(e)})},Sl.prototype.documentSize=function(t){return 0},Sl.prototype.isReferenced=function(t,e){var n=this;return Fo.or([function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.mutationQueuesContainKey(t,e)},function(){return Fo.resolve(n.inMemoryPins.containsKey(e))}])},Sl);function Sl(t){this.persistence=t,this.inMemoryPins=null,this._orphanedDocuments=null}var El=(Cl.prototype.onTransactionStarted=function(){},Cl.prototype.onTransactionCommitted=function(t){return Fo.resolve()},Cl.prototype.forEachTarget=function(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)},Cl.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocumentCount(t);return this.persistence.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},Cl.prototype.orphanedDocumentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,function(t){e++}).next(function(){return e})},Cl.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){var n=this;return Fo.forEach(this.orphanedSequenceNumbers,function(r,i){return n.isPinned(t,r,i).next(function(t){return t?Fo.resolve():e(i)})})},Cl.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},Cl.prototype.removeTargets=function(t,e,n){return this.persistence.getTargetCache().removeTargets(t,e,n)},Cl.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.forEachDocumentKey(t,function(i){return n.isPinned(t,i,e).next(function(t){t||(r++,o.removeEntry(i))})}).next(function(){return o.apply(t)}).next(function(){return r})},Cl.prototype.removeMutationReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Fo.resolve()},Cl.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)},Cl.prototype.addReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Fo.resolve()},Cl.prototype.removeReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Fo.resolve()},Cl.prototype.updateLimboDocument=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Fo.resolve()},Cl.prototype.documentSize=function(t){var e,n=this.serializer.toDbRemoteDocument(t,t.version);if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Vr("Unknown remote document type");e=n.noDocument}return JSON.stringify(e).length},Cl.prototype.isPinned=function(t,e,n){var r=this;return Fo.or([function(){return r.persistence.mutationQueuesContainKey(t,e)},function(){return Fo.resolve(r.inMemoryPins.containsKey(e))},function(){return r.persistence.getTargetCache().containsKey(t,e)},function(){var t=r.orphanedSequenceNumbers.get(e);return Fo.resolve(void 0!==t&&n<t)}])},Cl.prototype.getCacheSize=function(t){return this.persistence.getRemoteDocumentCache().getSize(t)},Cl);function Cl(t,e,n){this.persistence=t,this.serializer=e,this.inMemoryPins=null,this.orphanedSequenceNumbers=new js(function(t){return eo(t.path)}),this.garbageCollector=new Gu(this,n)}var Il=(_l.prototype.reset=function(){this.currentBaseMs=0},_l.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},_l.prototype.backoffAndRun=function(t){var e=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);0<this.currentBaseMs&&Lr("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,function(){return e.lastAttemptTime=Date.now(),t()}),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},_l.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},_l.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},_l);function _l(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.queue=t,this.timerId=e,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}var Al,Dl,Nl="PersistentStream";(Dl=Al=Al||{})[Dl.Initial=0]="Initial",Dl[Dl.Starting=1]="Starting",Dl[Dl.Open=2]="Open",Dl[Dl.Error=3]="Error",Dl[Dl.Backoff=4]="Backoff";var kl=(Ol.prototype.isStarted=function(){return this.state===Al.Starting||this.state===Al.Open||this.state===Al.Backoff},Ol.prototype.isOpen=function(){return this.state===Al.Open},Ol.prototype.start=function(){this.state!==Al.Error?(Br(this.state===Al.Initial,"Already started"),this.auth()):this.performBackoff()},Ol.prototype.stop=function(){return u(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return this.isStarted()?[4,this.close(Al.Initial)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},Ol.prototype.inhibitBackoff=function(){Br(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=Al.Initial,this.backoff.reset()},Ol.prototype.markIdle=function(){var t=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,function(){return t.handleIdleCloseTimer()}))},Ol.prototype.sendRequest=function(t){this.cancelIdleCheck(),this.stream.send(t)},Ol.prototype.handleIdleCloseTimer=function(){return u(this,void 0,void 0,function(){return c(this,function(t){return this.isOpen()?[2,this.close(Al.Initial)]:[2]})})},Ol.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},Ol.prototype.close=function(t,e){return u(this,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:return Br(this.isStarted(),"Only started streams should be closed."),Br(t===Al.Error||yc(e),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,t!==Al.Error?this.backoff.reset():e&&e.code===$r.RESOURCE_EXHAUSTED?(Pr(e.toString()),Pr("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):e&&e.code===$r.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.onClose(e)];case 1:return n.sent(),[2]}})})},Ol.prototype.tearDown=function(){},Ol.prototype.auth=function(){var t=this;Br(this.state===Al.Initial,"Must be in initial state to auth"),this.state=Al.Starting;var e=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then(function(e){t.closeCount===n&&t.startStream(e)},function(n){e(function(){var e=new Wr($r.UNKNOWN,"Fetching auth token failed: "+n.message);return t.handleStreamClose(e)})})},Ol.prototype.startStream=function(t){var e=this;Br(this.state===Al.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(t),this.stream.onOpen(function(){n(function(){return Br(e.state===Al.Starting,"Expected stream to be in state Starting, but was "+e.state),e.state=Al.Open,e.listener.onOpen()})}),this.stream.onClose(function(t){n(function(){return e.handleStreamClose(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},Ol.prototype.performBackoff=function(){var t=this;Br(this.state===Al.Error,"Should only perform backoff when in Error state"),this.state=Al.Backoff,this.backoff.backoffAndRun(function(){return u(t,void 0,void 0,function(){return c(this,function(t){return Br(this.state===Al.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=Al.Initial,this.start(),Br(this.isStarted(),"PersistentStream should have started"),[2]})})})},Ol.prototype.handleStreamClose=function(t){return Br(this.isStarted(),"Can't handle server close on non-started stream"),Lr(Nl,"close with error: "+t),this.stream=null,this.close(Al.Error,t)},Ol.prototype.getCloseGuardedDispatcher=function(t){var e=this;return function(n){e.queue.enqueueAndForget(function(){return e.closeCount===t?n():(Lr(Nl,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},Ol);function Ol(t,e,n,r,i,o){this.queue=t,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=Al.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new Il(t,e)}var Rl,xl=(i(Ml,Rl=kl),Ml.prototype.startRpc=function(t){return this.connection.openStream("Listen",t)},Ml.prototype.onMessage=function(t){this.backoff.reset();var e=this.serializer.fromWatchChange(t),n=this.serializer.versionFromListenResponse(t);return this.listener.onWatchChange(e,n)},Ml.prototype.watch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.addTarget=this.serializer.toTarget(t);var n=this.serializer.toListenRequestLabels(t);n&&(e.labels=n),this.sendRequest(e)},Ml.prototype.unwatch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.removeTarget=t,this.sendRequest(e)},Ml);function Ml(t,e,n,r,i){var o=Rl.call(this,t,$i.ListenStreamConnectionBackoff,$i.ListenStreamIdle,e,n,i)||this;return o.serializer=r,o}var Ll,Pl=(i(Fl,Ll=kl),Object.defineProperty(Fl.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),Fl.prototype.start=function(){this.handshakeComplete_=!1,Ll.prototype.start.call(this)},Fl.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},Fl.prototype.startRpc=function(t){return this.connection.openStream("Write",t)},Fl.prototype.onMessage=function(t){if(Br(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=t.streamToken,this.handshakeComplete_){this.backoff.reset();var e=this.serializer.fromWriteResults(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.onMutationResult(n,e)}return Br(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},Fl.prototype.writeHandshake=function(){Br(this.isOpen(),"Writing handshake requires an opened stream"),Br(!this.handshakeComplete_,"Handshake already completed");var t={};t.database=this.serializer.encodedDatabaseId,this.sendRequest(t)},Fl.prototype.writeMutations=function(t){var e=this;Br(this.isOpen(),"Writing mutations requires an opened stream"),Br(this.handshakeComplete_,"Handshake must be complete before writing mutations"),Br(0<this.lastStreamToken.length,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:t.map(function(t){return e.serializer.toMutation(t)})};this.sendRequest(n)},Fl);function Fl(t,e,n,r,i){var o=Ll.call(this,t,$i.WriteStreamConnectionBackoff,$i.WriteStreamIdle,e,n,i)||this;return o.serializer=r,o.handshakeComplete_=!1,o.lastStreamToken=jr(),o}var Vl=(Bl.prototype.newPersistentWriteStream=function(t){return new Pl(this.queue,this.connection,this.credentials,this.serializer,t)},Bl.prototype.newPersistentWatchStream=function(t){return new xl(this.queue,this.connection,this.credentials,this.serializer,t)},Bl.prototype.commit=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,writes:t.map(function(t){return e.serializer.toMutation(t)})};return this.invokeRPC("Commit",n).then(function(t){return e.serializer.fromWriteResults(t.writeResults,t.commitTime)})},Bl.prototype.lookup=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,documents:t.map(function(t){return e.serializer.toName(t)})};return this.invokeStreamingRPC("BatchGetDocuments",n).then(function(n){var r=Eo();n.forEach(function(t){var n=e.serializer.fromMaybeDocument(t);r=r.insert(n.key,n)});var i=[];return t.forEach(function(t){var e=r.get(t);Br(!!e,"Missing entity in write response for "+t),i.push(e)}),i})},Bl.prototype.invokeRPC=function(t,e){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeRPC(t,e,r)}).catch(function(t){throw t.code===$r.UNAUTHENTICATED&&n.credentials.invalidateToken(),t})},Bl.prototype.invokeStreamingRPC=function(t,e){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeStreamingRPC(t,e,r)}).catch(function(t){throw t.code===$r.UNAUTHENTICATED&&n.credentials.invalidateToken(),t})},Bl);function Bl(t,e,n,r){this.queue=t,this.connection=e,this.credentials=n,this.serializer=r}var ql,Ul,jl,Kl,$l=(Wl.prototype.lookup=function(t){return u(this,void 0,void 0,function(){var e,n=this;return c(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),0<this.mutations.length)throw new Wr($r.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.datastore.lookup(t)];case 1:return(e=r.sent()).forEach(function(t){t instanceof Fs||t instanceof Ms?n.recordVersion(t):Vr("Document in a transaction was a "+t.constructor.name)}),[2,e]}})})},Wl.prototype.set=function(t,e){this.write(e.toMutations(t,this.precondition(t))),this.writtenDocs.add(t)},Wl.prototype.update=function(t,e){try{this.write(e.toMutations(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t)},Wl.prototype.delete=function(t){this.write([new Ba(t,this.precondition(t))]),this.writtenDocs.add(t)},Wl.prototype.commit=function(){return u(this,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;if(t=this.readVersions,this.mutations.forEach(function(e){t=t.remove(e.key)}),!t.isEmpty())throw new Wr($r.INVALID_ARGUMENT,"Every document read in a transaction must also be written.");return[4,this.datastore.commit(this.mutations)];case 1:return e.sent(),this.committed=!0,[2]}})})},Wl.prototype.recordVersion=function(t){var e;if(t instanceof Ms)e=t.version;else{if(!(t instanceof Fs))throw Vr("Document in a transaction was a "+t.constructor.name);e=so.forDeletedDoc()}var n=this.readVersions.get(t.key);if(null!==n){if(!e.isEqual(n))throw new Wr($r.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(t.key,e)},Wl.prototype.precondition=function(t){var e=this.readVersions.get(t);return!this.writtenDocs.has(t)&&e?Ta.updateTime(e):Ta.NONE},Wl.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t);if(this.writtenDocs.has(t)||!e)return Ta.exists(!0);if(e.isEqual(so.forDeletedDoc()))throw new Wr($r.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ta.updateTime(e)},Wl.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(t)},Wl.prototype.ensureCommitNotCalled=function(){Br(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")},Wl);function Wl(t){this.datastore=t,this.readVersions=Do(),this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}(Ul=ql=ql||{})[Ul.Unknown=0]="Unknown",Ul[Ul.Online=1]="Online",Ul[Ul.Offline=2]="Offline",(Kl=jl=jl||{})[Kl.RemoteStore=0]="RemoteStore",Kl[Kl.SharedClientState=1]="SharedClientState";var zl,Ql,Gl=(Hl.prototype.handleWatchStreamStart=function(){var t=this;0===this.watchStreamFailures&&(this.setAndBroadcast(ql.Unknown),Br(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay($i.OnlineStateTimeout,1e4,function(){return t.onlineStateTimer=null,Br(t.state===ql.Unknown,"Timer should be canceled if we transitioned to a different state."),t.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),t.setAndBroadcast(ql.Offline),Promise.resolve()}))},Hl.prototype.handleWatchStreamFailure=function(t){this.state===ql.Online?(this.setAndBroadcast(ql.Unknown),Br(0===this.watchStreamFailures,"watchStreamFailures must be 0"),Br(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,1<=this.watchStreamFailures&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+t.toString()),this.setAndBroadcast(ql.Offline)))},Hl.prototype.set=function(t){this.clearOnlineStateTimer(),this.watchStreamFailures=0,t===ql.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(t)},Hl.prototype.setAndBroadcast=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},Hl.prototype.logClientOfflineWarningIfNecessary=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(Pr(e),this.shouldWarnClientIsOffline=!1):Lr("OnlineStateTracker",e)},Hl.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},Hl);function Hl(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state=ql.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}function Yl(t){switch(t){case $r.OK:return Vr("Treated status OK as error");case $r.CANCELLED:case $r.UNKNOWN:case $r.DEADLINE_EXCEEDED:case $r.RESOURCE_EXHAUSTED:case $r.INTERNAL:case $r.UNAVAILABLE:case $r.UNAUTHENTICATED:return!1;case $r.INVALID_ARGUMENT:case $r.NOT_FOUND:case $r.ALREADY_EXISTS:case $r.PERMISSION_DENIED:case $r.FAILED_PRECONDITION:case $r.ABORTED:case $r.OUT_OF_RANGE:case $r.UNIMPLEMENTED:case $r.DATA_LOSS:return!0;default:return Vr("Unknown status code: "+t)}}function Jl(t){if(void 0===t)return Pr("GRPC error has no .code"),$r.UNKNOWN;switch(t){case zl.OK:return $r.OK;case zl.CANCELLED:return $r.CANCELLED;case zl.UNKNOWN:return $r.UNKNOWN;case zl.DEADLINE_EXCEEDED:return $r.DEADLINE_EXCEEDED;case zl.RESOURCE_EXHAUSTED:return $r.RESOURCE_EXHAUSTED;case zl.INTERNAL:return $r.INTERNAL;case zl.UNAVAILABLE:return $r.UNAVAILABLE;case zl.UNAUTHENTICATED:return $r.UNAUTHENTICATED;case zl.INVALID_ARGUMENT:return $r.INVALID_ARGUMENT;case zl.NOT_FOUND:return $r.NOT_FOUND;case zl.ALREADY_EXISTS:return $r.ALREADY_EXISTS;case zl.PERMISSION_DENIED:return $r.PERMISSION_DENIED;case zl.FAILED_PRECONDITION:return $r.FAILED_PRECONDITION;case zl.ABORTED:return $r.ABORTED;case zl.OUT_OF_RANGE:return $r.OUT_OF_RANGE;case zl.UNIMPLEMENTED:return $r.UNIMPLEMENTED;case zl.DATA_LOSS:return $r.DATA_LOSS;default:return Vr("Unknown status code: "+t)}}(Ql=zl=zl||{})[Ql.OK=0]="OK",Ql[Ql.CANCELLED=1]="CANCELLED",Ql[Ql.UNKNOWN=2]="UNKNOWN",Ql[Ql.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ql[Ql.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ql[Ql.NOT_FOUND=5]="NOT_FOUND",Ql[Ql.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ql[Ql.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ql[Ql.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ql[Ql.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ql[Ql.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ql[Ql.ABORTED=10]="ABORTED",Ql[Ql.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ql[Ql.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ql[Ql.INTERNAL=13]="INTERNAL",Ql[Ql.UNAVAILABLE=14]="UNAVAILABLE",Ql[Ql.DATA_LOSS=15]="DATA_LOSS";var Xl,Zl,th,eh,nh=(rh.emptySet=function(t){return new rh(t.comparator)},rh.prototype.has=function(t){return null!=this.keyedMap.get(t)},rh.prototype.get=function(t){return this.keyedMap.get(t)},rh.prototype.first=function(){return this.sortedSet.minKey()},rh.prototype.last=function(){return this.sortedSet.maxKey()},rh.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},rh.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(rh.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),rh.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},rh.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},rh.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},rh.prototype.isEqual=function(t){if(!(t instanceof rh))return!1;if(this.size!==t.size)return!1;for(var e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();e.hasNext();){var r=e.getNext().key,i=n.getNext().key;if(!r.isEqual(i))return!1}return!0},rh.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},rh.prototype.copy=function(t,e){var n=new rh;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n},rh);function rh(t){this.comparator=t?function(e,n){return t(e,n)||ji.comparator(e.key,n.key)}:function(t,e){return ji.comparator(t.key,e.key)},this.keyedMap=_o(),this.sortedSet=new co(this.comparator)}(Zl=Xl=Xl||{})[Zl.Added=0]="Added",Zl[Zl.Removed=1]="Removed",Zl[Zl.Modified=2]="Modified",Zl[Zl.Metadata=3]="Metadata",(eh=th=th||{})[eh.Local=0]="Local",eh[eh.Synced=1]="Synced";var ih=(oh.prototype.track=function(t){var e=t.doc.key,n=this.changeMap.get(e);n?t.type!==Xl.Added&&n.type===Xl.Metadata?this.changeMap=this.changeMap.insert(e,t):t.type===Xl.Metadata&&n.type!==Xl.Removed?this.changeMap=this.changeMap.insert(e,{type:n.type,doc:t.doc}):t.type===Xl.Modified&&n.type===Xl.Modified?this.changeMap=this.changeMap.insert(e,{type:Xl.Modified,doc:t.doc}):t.type===Xl.Modified&&n.type===Xl.Added?this.changeMap=this.changeMap.insert(e,{type:Xl.Added,doc:t.doc}):t.type===Xl.Removed&&n.type===Xl.Added?this.changeMap=this.changeMap.remove(e):t.type===Xl.Removed&&n.type===Xl.Modified?this.changeMap=this.changeMap.insert(e,{type:Xl.Removed,doc:n.doc}):t.type===Xl.Added&&n.type===Xl.Removed?this.changeMap=this.changeMap.insert(e,{type:Xl.Modified,doc:t.doc}):Vr("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(e,t)},oh.prototype.getChanges=function(){var t=[];return this.changeMap.inorderTraversal(function(e,n){t.push(n)}),t},oh);function oh(){this.changeMap=new co(ji.comparator)}var ah=(sh.fromInitialDocuments=function(t,e,n,r){var i=[];return e.forEach(function(t){i.push({type:Xl.Added,doc:t})}),new sh(t,e,nh.emptySet(e),i,n,r,!0,!1)},Object.defineProperty(sh.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),sh.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},sh);function sh(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}var uh=(ch.createSynthesizedRemoteEventForCurrentChange=function(t,e){var n,r=((n={})[t]=lh.createSynthesizedTargetChangeForCurrentChange(t,e),n);return new ch(so.MIN,r,Ro(),Eo(),ko())},ch);function ch(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}var lh=(hh.createSynthesizedTargetChangeForCurrentChange=function(t,e){return new hh(jr(),e,ko(),ko(),ko())},hh);function hh(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}var fh,ph,dh=function(t,e,n,r){this.updatedTargetIds=t,this.removedTargetIds=e,this.key=n,this.newDoc=r},mh=function(t,e){this.targetId=t,this.existenceFilter=e};(ph=fh=fh||{})[ph.NoChange=0]="NoChange",ph[ph.Added=1]="Added",ph[ph.Removed=2]="Removed",ph[ph.Current=3]="Current",ph[ph.Reset=4]="Reset";var yh=function(t,e,n,r){void 0===n&&(n=jr()),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},vh=(Object.defineProperty(gh.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(gh.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(gh.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(gh.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),gh.prototype.updateResumeToken=function(t){0<t.length&&(this._hasPendingChanges=!0,this._resumeToken=t)},gh.prototype.toTargetChange=function(){var t=ko(),e=ko(),n=ko();return this.documentChanges.forEach(function(r,i){switch(i){case Xl.Added:t=t.add(r);break;case Xl.Modified:e=e.add(r);break;case Xl.Removed:n=n.add(r);break;default:Vr("Encountered invalid change type: "+i)}}),new lh(this._resumeToken,this._current,t,e,n)},gh.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=Sh()},gh.prototype.addDocumentChange=function(t,e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(t,e)},gh.prototype.removeDocumentChange=function(t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(t)},gh.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},gh.prototype.recordTargetResponse=function(){this.pendingResponses-=1},gh.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},gh);function gh(){this.pendingResponses=0,this.documentChanges=Sh(),this._resumeToken=jr(),this._current=!1,this._hasPendingChanges=!0}var bh=(wh.prototype.handleDocumentChange=function(t){for(var e=0,n=t.updatedTargetIds;e<n.length;e++){var r=n[e];t.newDoc instanceof Ms?this.addDocumentToTarget(r,t.newDoc):t.newDoc instanceof Fs&&this.removeDocumentFromTarget(r,t.key,t.newDoc)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.removeDocumentFromTarget(r,t.key,t.newDoc)},wh.prototype.handleTargetChange=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.ensureTargetState(n);switch(t.state){case fh.NoChange:e.isActiveTarget(n)&&r.updateResumeToken(t.resumeToken);break;case fh.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(t.resumeToken);break;case fh.Removed:r.recordTargetResponse(),r.isPending||e.removeTarget(n),Br(!t.cause,"WatchChangeAggregator does not handle errored targets");break;case fh.Current:e.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(t.resumeToken));break;case fh.Reset:e.isActiveTarget(n)&&(e.resetTarget(n),r.updateResumeToken(t.resumeToken));break;default:Vr("Unknown target watch change state: "+t.state)}})},wh.prototype.forEachTarget=function(t,e){0<t.targetIds.length?t.targetIds.forEach(e):Yr(this.targetStates,e)},wh.prototype.handleExistenceFilter=function(t){var e=t.targetId,n=t.existenceFilter.count,r=this.targetDataForActiveTarget(e);if(r){var i=r.target;if(i.isDocumentQuery())if(0===n){var o=new ji(i.path);this.removeDocumentFromTarget(e,o,new Fs(o,so.forDeletedDoc()))}else Br(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(e)!==n&&(this.resetTarget(e),this.pendingTargetResets=this.pendingTargetResets.add(e))}},wh.prototype.createRemoteEvent=function(t){var e=this,n={};Yr(this.targetStates,function(r,i){var o=e.targetDataForActiveTarget(r);if(o){if(i.current&&o.target.isDocumentQuery()){var a=new ji(o.target.path);null!==e.pendingDocumentUpdates.get(a)||e.targetContainsDocument(r,a)||e.removeDocumentFromTarget(r,a,new Fs(a,t))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}});var r=ko();this.pendingDocumentTargetMapping.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.targetDataForActiveTarget(t);return!n||n.purpose===ku.LimboResolution||(i=!1)}),i&&(r=r.add(t))});var i=new uh(t,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=Eo(),this.pendingDocumentTargetMapping=Th(),this.pendingTargetResets=new go(bi),i},wh.prototype.addDocumentToTarget=function(t,e){if(this.isActiveTarget(t)){var n=this.targetContainsDocument(t,e.key)?Xl.Modified:Xl.Added;this.ensureTargetState(t).addDocumentChange(e.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e.key,e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e.key,this.ensureDocumentTargetMapping(e.key).add(t))}},wh.prototype.removeDocumentFromTarget=function(t,e,n){if(this.isActiveTarget(t)){var r=this.ensureTargetState(t);this.targetContainsDocument(t,e)?r.addDocumentChange(e,Xl.Removed):r.removeDocumentChange(e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,this.ensureDocumentTargetMapping(e).delete(t)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e,n))}},wh.prototype.removeTarget=function(t){delete this.targetStates[t]},wh.prototype.getCurrentDocumentCountForTarget=function(t){var e=this.ensureTargetState(t).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},wh.prototype.recordPendingTargetRequest=function(t){this.ensureTargetState(t).recordPendingTargetRequest()},wh.prototype.ensureTargetState=function(t){return this.targetStates[t]||(this.targetStates[t]=new vh),this.targetStates[t]},wh.prototype.ensureDocumentTargetMapping=function(t){var e=this.pendingDocumentTargetMapping.get(t);return e||(e=new go(bi),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,e)),e},wh.prototype.isActiveTarget=function(t){var e=null!==this.targetDataForActiveTarget(t);return e||Lr("WatchChangeAggregator","Detected inactive target",t),e},wh.prototype.targetDataForActiveTarget=function(t){var e=this.targetStates[t];return e&&e.isPending?null:this.metadataProvider.getTargetDataForTarget(t)},wh.prototype.resetTarget=function(t){var e=this;Br(!this.targetStates[t].isPending,"Should only reset active targets"),this.targetStates[t]=new vh,this.metadataProvider.getRemoteKeysForTarget(t).forEach(function(n){e.removeDocumentFromTarget(t,n,null)})},wh.prototype.targetContainsDocument=function(t,e){return this.metadataProvider.getRemoteKeysForTarget(t).has(e)},wh);function wh(t){this.metadataProvider=t,this.targetStates={},this.pendingDocumentUpdates=Eo(),this.pendingDocumentTargetMapping=Th(),this.pendingTargetResets=new go(bi)}function Th(){return new co(ji.comparator)}function Sh(){return new co(ji.comparator)}var Eh="RemoteStore",Ch=(Ih.prototype.start=function(){return this.enableNetwork()},Ih.prototype.enableNetwork=function(){return u(this,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(t=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return t.lastStreamToken=e.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(ql.Unknown),[4,this.fillWritePipeline()];case 2:e.sent(),e.label=3;case 3:return[2]}})})},Ih.prototype.disableNetwork=function(){return u(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(ql.Offline),[2]}})})},Ih.prototype.disableNetworkInternal=function(){return u(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.writeStream.stop()];case 1:return t.sent(),[4,this.watchStream.stop()];case 2:return t.sent(),0<this.writePipeline.length&&(Lr(Eh,"Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}})})},Ih.prototype.shutdown=function(){return u(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return Lr(Eh,"RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(ql.Unknown),[2]}})})},Ih.prototype.listen=function(t){Gr(this.listenTargets,t.targetId)||(this.listenTargets[t.targetId]=t,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(t))},Ih.prototype.unlisten=function(t){Br(Gr(this.listenTargets,t),"unlisten called on target no currently watched: "+t),delete this.listenTargets[t],this.watchStream.isOpen()&&this.sendUnwatchRequest(t),Xr(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(ql.Unknown))},Ih.prototype.getTargetDataForTarget=function(t){return this.listenTargets[t]||null},Ih.prototype.getRemoteKeysForTarget=function(t){return this.syncEngine.getRemoteKeysForTarget(t)},Ih.prototype.sendWatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t.targetId),this.watchStream.watch(t)},Ih.prototype.sendUnwatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t),this.watchStream.unwatch(t)},Ih.prototype.startWatchStream=function(){Br(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new bh(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},Ih.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!Xr(this.listenTargets)},Ih.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},Ih.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},Ih.prototype.onWatchStreamOpen=function(){return u(this,void 0,void 0,function(){var t=this;return c(this,function(e){return Yr(this.listenTargets,function(e,n){t.sendWatchRequest(n)}),[2]})})},Ih.prototype.onWatchStreamClose=function(t){return u(this,void 0,void 0,function(){return c(this,function(e){return void 0===t&&Br(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(t),this.startWatchStream()):this.onlineStateTracker.set(ql.Unknown),[2]})})},Ih.prototype.onWatchStreamChange=function(t,e){return u(this,void 0,void 0,function(){var n;return c(this,function(r){switch(r.label){case 0:return this.onlineStateTracker.set(ql.Online),t instanceof yh&&t.state===fh.Removed&&t.cause?[2,this.handleTargetError(t)]:(t instanceof dh?this.watchChangeAggregator.handleDocumentChange(t):t instanceof mh?this.watchChangeAggregator.handleExistenceFilter(t):(Br(t instanceof yh,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(t)),e.isEqual(so.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),0<=e.compareTo(n)?[4,this.raiseWatchSnapshot(e)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}})})},Ih.prototype.raiseWatchSnapshot=function(t){var e=this;Br(!t.isEqual(so.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(t);return Yr(n.targetChanges,function(n,r){if(0<r.resumeToken.length){var i=e.listenTargets[n];i&&(e.listenTargets[n]=i.withResumeToken(r.resumeToken,t))}}),n.targetMismatches.forEach(function(t){var n=e.listenTargets[t];if(n){e.listenTargets[t]=n.withResumeToken(jr(),n.snapshotVersion),e.sendUnwatchRequest(t);var r=new Pu(n.target,t,ku.ExistenceFilterMismatch,n.sequenceNumber);e.sendWatchRequest(r)}}),this.syncEngine.applyRemoteEvent(n)},Ih.prototype.handleTargetError=function(t){var e=this;Br(!!t.cause,"Handling target error without a cause");var n=t.cause,r=Promise.resolve();return t.targetIds.forEach(function(t){r=r.then(function(){return u(e,void 0,void 0,function(){return c(this,function(e){return Gr(this.listenTargets,t)?(delete this.listenTargets[t],this.watchChangeAggregator.removeTarget(t),[2,this.syncEngine.rejectListen(t,n)]):[2]})})})}),r},Ih.prototype.fillWritePipeline=function(){return u(this,void 0,void 0,function(){var t,e;return c(this,function(n){switch(n.label){case 0:return this.canAddToWritePipeline()?(t=0<this.writePipeline.length?this.writePipeline[this.writePipeline.length-1].batchId:-1,[4,this.localStore.nextMutationBatch(t)]):[3,4];case 1:return null!==(e=n.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(e),[4,this.fillWritePipeline()];case 3:n.sent(),n.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}})})},Ih.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},Ih.prototype.outstandingWrites=function(){return this.writePipeline.length},Ih.prototype.addToWritePipeline=function(t){Br(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(t),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(t.mutations)},Ih.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&0<this.writePipeline.length},Ih.prototype.startWriteStream=function(){Br(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},Ih.prototype.onWriteStreamOpen=function(){return u(this,void 0,void 0,function(){return c(this,function(t){return this.writeStream.writeHandshake(),[2]})})},Ih.prototype.onWriteHandshakeComplete=function(){var t=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var e=0,n=t.writePipeline;e<n.length;e++){var r=n[e];t.writeStream.writeMutations(r.mutations)}}).catch(ac)},Ih.prototype.onMutationResult=function(t,e){var n=this;Br(0<this.writePipeline.length,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=Lo.from(r,t,e,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then(function(){return n.fillWritePipeline()})},Ih.prototype.onWriteStreamClose=function(t){return u(this,void 0,void 0,function(){var e=this;return c(this,function(n){return void 0===t&&Br(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),t&&0<this.writePipeline.length?[2,(this.writeStream.handshakeComplete?this.handleWriteError(t):this.handleHandshakeError(t)).then(function(){e.shouldStartWriteStream()&&e.startWriteStream()})]:[2]})})},Ih.prototype.handleHandshakeError=function(t){return u(this,void 0,void 0,function(){return c(this,function(e){return Yl(t.code)?(Lr(Eh,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=jr(),[2,this.localStore.setLastStreamToken(jr()).catch(ac)]):[2]})})},Ih.prototype.handleWriteError=function(t){return u(this,void 0,void 0,function(){var e,n=this;return c(this,function(r){return function(t){return Yl(t)&&t!==$r.ABORTED}(t.code)?(e=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(e.batchId,t).then(function(){return n.fillWritePipeline()})]):[2]})})},Ih.prototype.createTransaction=function(){return new $l(this.datastore)},Ih.prototype.restartNetwork=function(){return u(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(ql.Unknown),[4,this.enableNetwork()];case 2:return t.sent(),[2]}})})},Ih.prototype.handleCredentialChange=function(){return u(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return this.canUseNetwork()?(Lr(Eh,"RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},Ih.prototype.applyPrimaryState=function(t){return u(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return(this.isPrimary=t)&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return e.sent(),[3,4];case 2:return t?[3,4]:[4,this.disableNetworkInternal()];case 3:e.sent(),this.onlineStateTracker.set(ql.Unknown),e.label=4;case 4:return[2]}})})},Ih);function Ih(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=i,this.connectivityMonitor.addCallback(function(t){n.enqueueAndForget(function(){return u(o,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return this.canUseNetwork()?(Lr(Eh,"Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.onlineStateTracker=new Gl(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}var _h=(Object.defineProperty(Ah.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(Ah.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),Ah.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},Ah.prototype._compareTo=function(t){return bi(this._lat,t._lat)||bi(this._long,t._long)},Ah);function Ah(t,e){if(ti("GeoPoint",arguments,2),ri("GeoPoint","number",1,t),ri("GeoPoint","number",2,e),!isFinite(t)||t<-90||90<t)throw new Wr($r.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new Wr($r.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}var Dh=(Nh.prototype.applyToLocalView=function(t,e){return new ds(e,t)},Nh.prototype.applyToRemoteDocument=function(t,e){return e},Nh.prototype.computeBaseValue=function(t){return null},Nh.prototype.isEqual=function(t){return t instanceof Nh},Nh.instance=new Nh,Nh);function Nh(){}var kh=(Oh.prototype.applyToLocalView=function(t,e){return this.apply(t)},Oh.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},Oh.prototype.apply=function(t){for(var e=Ph(t),n=function(t){e.find(function(e){return e.isEqual(t)})||e.push(t)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Ns(e)},Oh.prototype.computeBaseValue=function(t){return null},Oh.prototype.isEqual=function(t){return t instanceof Oh&&wi(t.elements,this.elements)},Oh);function Oh(t){this.elements=t}var Rh=(xh.prototype.applyToLocalView=function(t,e){return this.apply(t)},xh.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},xh.prototype.apply=function(t){for(var e=Ph(t),n=function(t){e=e.filter(function(e){return!e.isEqual(t)})},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Ns(e)},xh.prototype.computeBaseValue=function(t){return null},xh.prototype.isEqual=function(t){return t instanceof xh&&wi(t.elements,this.elements)},xh);function xh(t){this.elements=t}var Mh=(Lh.prototype.applyToLocalView=function(t,e){var n=this.computeBaseValue(t);if(n instanceof ns&&this.operand instanceof ns){var r=n.internalValue+this.operand.internalValue;return new ns(r)}return r=n.internalValue+this.operand.internalValue,new os(r)},Lh.prototype.applyToRemoteDocument=function(t,e){return Br(null!==e,"Didn't receive transformResult for NUMERIC_ADD transform"),e},Lh.prototype.computeBaseValue=function(t){return t instanceof Xa?t:new ns(0)},Lh.prototype.isEqual=function(t){return t instanceof Lh&&this.operand.isEqual(t.operand)},Lh);function Lh(t){this.operand=t}function Ph(t){return t instanceof Ns?t.internalValue.slice():[]}var Fh=(Vh.prototype.isEqual=function(t){return t&&t.count===this.count},Vh);function Vh(t){this.count=t}var Bh,qh,Uh=((Bh={})[$c.ASCENDING.name]="ASCENDING",Bh[$c.DESCENDING.name]="DESCENDING",Bh),jh=((qh={})[Cc.LESS_THAN.name]="LESS_THAN",qh[Cc.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",qh[Cc.GREATER_THAN.name]="GREATER_THAN",qh[Cc.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",qh[Cc.EQUAL.name]="EQUAL",qh[Cc.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",qh[Cc.IN.name]="IN",qh[Cc.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",qh),Kh=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $h(t,e){Br(!yc(t),e+" is missing")}function Wh(t){return"number"==typeof t?t:"string"==typeof t?Number(t):Vr("can't parse "+t)}var zh=(Qh.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},Qh.prototype.unsafeCastProtoByteString=function(t){return t},Qh.prototype.fromRpcStatus=function(t){var e=void 0===t.code?$r.UNKNOWN:Jl(t.code);return new Wr(e,t.message||"")},Qh.prototype.toInt32Value=function(t){return this.options.useProto3Json||yc(t)?t:{value:t}},Qh.prototype.fromInt32Value=function(t){var e;return yc(e="object"==typeof t?t.value:t)?null:e},Qh.prototype.toTimestamp=function(t){return this.options.useProto3Json?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}},Qh.prototype.fromTimestamp=function(t){if("string"==typeof t)return this.fromIso8601String(t);Br(!!t,"Cannot deserialize null or undefined timestamp.");var e=Wh(t.seconds||"0"),n=t.nanos||0;return new oo(e,n)},Qh.prototype.fromIso8601String=function(t){var e=0,n=Kh.exec(t);if(Br(!!n,"invalid timestamp: "+t),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t),o=Math.floor(i.getTime()/1e3);return new oo(o,e)},Qh.prototype.toBytes=function(t){return this.options.useProto3Json?t.toBase64():this.unsafeCastProtoByteString(t.toUint8Array())},Qh.prototype.fromBlob=function(t){return"string"==typeof t?(Br(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Ci.fromBase64String(t)):(Br(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Ci.fromUint8Array(t))},Qh.prototype.toVersion=function(t){return this.toTimestamp(t.toTimestamp())},Qh.prototype.fromVersion=function(t){return Br(!!t,"Trying to deserialize version that isn't set"),so.fromTimestamp(this.fromTimestamp(t))},Qh.prototype.toResourceName=function(t,e){return this.fullyQualifiedPrefixPath(t).child("documents").child(e).canonicalString()},Qh.prototype.fromResourceName=function(t){var e=Pi.fromString(t);return Br(this.isValidResourceName(e),"Tried to deserialize invalid key "+e.toString()),e},Qh.prototype.toName=function(t){return this.toResourceName(this.databaseId,t.path)},Qh.prototype.fromName=function(t){var e=this.fromResourceName(t);return Br(e.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.databaseId.projectId),Br(!e.get(3)&&!this.databaseId.database||e.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.databaseId.database),new ji(this.extractLocalPathFromResourceName(e))},Qh.prototype.toQueryPath=function(t){return this.toResourceName(this.databaseId,t)},Qh.prototype.fromQueryPath=function(t){var e=this.fromResourceName(t);return 4===e.length?Pi.EMPTY_PATH:this.extractLocalPathFromResourceName(e)},Object.defineProperty(Qh.prototype,"encodedDatabaseId",{get:function(){return new Pi(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),Qh.prototype.fullyQualifiedPrefixPath=function(t){return new Pi(["projects",t.projectId,"databases",t.database])},Qh.prototype.extractLocalPathFromResourceName=function(t){return Br(4<t.length&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.popFirst(5)},Qh.prototype.isValidResourceName=function(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)},Qh.prototype.toValue=function(t){if(t instanceof za)return{nullValue:"NULL_VALUE"};if(t instanceof Ha)return{booleanValue:t.value()};if(t instanceof ns)return{integerValue:""+t.value()};if(t instanceof os){var e=t.value();if(this.options.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:t.value()}}return t instanceof us?{stringValue:t.value()}:t instanceof _s?{mapValue:this.toMapValue(t)}:t instanceof Ns?{arrayValue:this.toArrayValue(t)}:t instanceof hs?{timestampValue:this.toTimestamp(t.internalValue)}:t instanceof Es?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof vs?{bytesValue:this.toBytes(t.value())}:t instanceof ws?{referenceValue:this.toResourceName(t.databaseId,t.key.path)}:Vr("Unknown FieldValue "+JSON.stringify(t))},Qh.prototype.fromValue=function(t){var e=this;if("nullValue"in t)return za.INSTANCE;if("booleanValue"in t)return Ha.of(t.booleanValue);if("integerValue"in t)return new ns(Wh(t.integerValue));if("doubleValue"in t){if(this.options.useProto3Json){if("NaN"===t.doubleValue)return os.NAN;if("Infinity"===t.doubleValue)return os.POSITIVE_INFINITY;if("-Infinity"===t.doubleValue)return os.NEGATIVE_INFINITY}return new os(t.doubleValue)}if("stringValue"in t)return new us(t.stringValue);if("mapValue"in t)return this.fromFields(t.mapValue.fields||{});if("arrayValue"in t){$h(t.arrayValue,"arrayValue");var n=t.arrayValue.values||[];return new Ns(n.map(function(t){return e.fromValue(t)}))}if("timestampValue"in t)return $h(t.timestampValue,"timestampValue"),new hs(this.fromTimestamp(t.timestampValue));if("geoPointValue"in t){$h(t.geoPointValue,"geoPointValue");var r=t.geoPointValue.latitude||0,i=t.geoPointValue.longitude||0;return new Es(new _h(r,i))}if("bytesValue"in t){$h(t.bytesValue,"bytesValue");var o=this.fromBlob(t.bytesValue);return new vs(o)}if("referenceValue"in t){$h(t.referenceValue,"referenceValue");var a=this.fromResourceName(t.referenceValue),s=new Di(a.get(1),a.get(3)),u=new ji(this.extractLocalPathFromResourceName(a));return new ws(s,u)}return Vr("Unknown Value proto "+JSON.stringify(t))},Qh.prototype.toMutationDocument=function(t,e){return{name:this.toName(t),fields:this.toFields(e)}},Qh.prototype.toDocument=function(t){return Br(!t.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(t.key),fields:this.toFields(t.data()),updateTime:this.toTimestamp(t.version.toTimestamp())}},Qh.prototype.fromDocument=function(t,e){var n=this,r=this.fromName(t.name),i=this.fromVersion(t.updateTime);return new Ms(r,i,{hasCommittedMutations:!!e},void 0,t,function(t){return n.fromValue(t)})},Qh.prototype.toFields=function(t){var e=this,n={};return t.forEach(function(t,r){n[t]=e.toValue(r)}),n},Qh.prototype.fromFields=function(t){var e=this,n=t,r=_s.EMPTY;return Jr(n,function(t,n){r=r.set(new qi([t]),e.fromValue(n))}),r},Qh.prototype.toMapValue=function(t){return{fields:this.toFields(t)}},Qh.prototype.toArrayValue=function(t){var e=this,n=[];return t.forEach(function(t){n.push(e.toValue(t))}),{values:n}},Qh.prototype.fromFound=function(t){var e=this;Br(!!t.found,"Tried to deserialize a found document from a missing document."),$h(t.found.name,"doc.found.name"),$h(t.found.updateTime,"doc.found.updateTime");var n=this.fromName(t.found.name),r=this.fromVersion(t.found.updateTime);return new Ms(n,r,{},void 0,t.found,function(t){return e.fromValue(t)})},Qh.prototype.fromMissing=function(t){Br(!!t.missing,"Tried to deserialize a missing document from a found document."),Br(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.fromName(t.missing),n=this.fromVersion(t.readTime);return new Fs(e,n)},Qh.prototype.fromMaybeDocument=function(t){return"found"in t?this.fromFound(t):"missing"in t?this.fromMissing(t):Vr("invalid batch get response: "+JSON.stringify(t))},Qh.prototype.toWatchTargetChangeState=function(t){switch(t){case fh.Added:return"ADD";case fh.Current:return"CURRENT";case fh.NoChange:return"NO_CHANGE";case fh.Removed:return"REMOVE";case fh.Reset:return"RESET";default:return Vr("Unknown WatchTargetChangeState: "+t)}},Qh.prototype.toTestWatchChange=function(t){if(t instanceof mh)return{filter:{count:t.existenceFilter.count,targetId:t.targetId}};if(t instanceof dh){if(t.newDoc instanceof Ms){var e=t.newDoc;return{documentChange:{document:{name:this.toName(e.key),fields:this.toFields(e.data()),updateTime:this.toVersion(e.version)},targetIds:t.updatedTargetIds,removedTargetIds:t.removedTargetIds}}}if(t.newDoc instanceof Fs)return e=t.newDoc,{documentDelete:{document:this.toName(e.key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}};if(null===t.newDoc)return{documentRemove:{document:this.toName(t.key),removedTargetIds:t.removedTargetIds}}}if(t instanceof yh){var n=void 0;return t.cause&&(n={code:function(t){if(void 0===t)return zl.OK;switch(t){case $r.OK:return zl.OK;case $r.CANCELLED:return zl.CANCELLED;case $r.UNKNOWN:return zl.UNKNOWN;case $r.DEADLINE_EXCEEDED:return zl.DEADLINE_EXCEEDED;case $r.RESOURCE_EXHAUSTED:return zl.RESOURCE_EXHAUSTED;case $r.INTERNAL:return zl.INTERNAL;case $r.UNAVAILABLE:return zl.UNAVAILABLE;case $r.UNAUTHENTICATED:return zl.UNAUTHENTICATED;case $r.INVALID_ARGUMENT:return zl.INVALID_ARGUMENT;case $r.NOT_FOUND:return zl.NOT_FOUND;case $r.ALREADY_EXISTS:return zl.ALREADY_EXISTS;case $r.PERMISSION_DENIED:return zl.PERMISSION_DENIED;case $r.FAILED_PRECONDITION:return zl.FAILED_PRECONDITION;case $r.ABORTED:return zl.ABORTED;case $r.OUT_OF_RANGE:return zl.OUT_OF_RANGE;case $r.UNIMPLEMENTED:return zl.UNIMPLEMENTED;case $r.DATA_LOSS:return zl.DATA_LOSS;default:return Vr("Unknown status code: "+t)}}(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(t.state),targetIds:t.targetIds,resumeToken:this.unsafeCastProtoByteString(t.resumeToken),cause:n}}}return Vr("Unrecognized watch change: "+JSON.stringify(t))},Qh.prototype.fromWatchChange=function(t){var e,n=this;if("targetChange"in t){$h(t.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=t.targetChange.resumeToken||this.emptyByteString(),a=t.targetChange.cause,s=a&&this.fromRpcStatus(a);e=new yh(r,i,o,s||null)}else if("documentChange"in t){$h(t.documentChange,"documentChange");var u=t.documentChange;$h(u.document,"documentChange.name"),$h(u.document.name,"documentChange.document.name"),$h(u.document.updateTime,"documentChange.document.updateTime");var c=this.fromName(u.document.name),l=this.fromVersion(u.document.updateTime),h=new Ms(c,l,{},void 0,u.document,function(t){return n.fromValue(t)}),f=u.targetIds||[],p=u.removedTargetIds||[];e=new dh(f,p,h.key,h)}else if("documentDelete"in t){$h(t.documentDelete,"documentDelete");var d=t.documentDelete;$h(d.document,"documentDelete.document"),c=this.fromName(d.document),l=d.readTime?this.fromVersion(d.readTime):so.forDeletedDoc(),h=new Fs(c,l),p=d.removedTargetIds||[],e=new dh([],p,h.key,h)}else if("documentRemove"in t){$h(t.documentRemove,"documentRemove");var m=t.documentRemove;$h(m.document,"documentRemove"),c=this.fromName(m.document),p=m.removedTargetIds||[],e=new dh([],p,c,null)}else{if(!("filter"in t))return Vr("Unknown change type "+JSON.stringify(t));$h(t.filter,"filter");var y=t.filter;$h(y.targetId,"filter.targetId");var v=y.count||0,g=new Fh(v),b=y.targetId;e=new mh(b,g)}return e},Qh.prototype.fromWatchTargetChangeState=function(t){return"NO_CHANGE"===t?fh.NoChange:"ADD"===t?fh.Added:"REMOVE"===t?fh.Removed:"CURRENT"===t?fh.Current:"RESET"===t?fh.Reset:Vr("Got unexpected TargetChange.state: "+t)},Qh.prototype.versionFromListenResponse=function(t){if(!("targetChange"in t))return so.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?so.MIN:e.readTime?this.fromVersion(e.readTime):so.MIN},Qh.prototype.toMutation=function(t){var e,n=this;if(t instanceof _a)e={update:this.toMutationDocument(t.key,t.value)};else if(t instanceof Ba)e={delete:this.toName(t.key)};else if(t instanceof Na)e={update:this.toMutationDocument(t.key,t.data),updateMask:this.toDocumentMask(t.fieldMask)};else{if(!(t instanceof Ra))return Vr("Unknown mutation type "+t.type);e={transform:{document:this.toName(t.key),fieldTransforms:t.fieldTransforms.map(function(t){return n.toFieldTransform(t)})}}}return t.precondition.isNone||(e.currentDocument=this.toPrecondition(t.precondition)),e},Qh.prototype.fromMutation=function(t){var e=this,n=t.currentDocument?this.fromPrecondition(t.currentDocument):Ta.NONE;if(t.update){$h(t.update.name,"name");var r=this.fromName(t.update.name),i=this.fromFields(t.update.fields||{});if(t.updateMask){var o=this.fromDocumentMask(t.updateMask);return new Na(r,i,o,n)}return new _a(r,i,n)}if(t.delete)return r=this.fromName(t.delete),new Ba(r,n);if(t.transform){r=this.fromName(t.transform.document);var a=t.transform.fieldTransforms.map(function(t){return e.fromFieldTransform(t)});return Br(!0===n.exists,'Transforms only support precondition "exists == true"'),new Ra(r,a)}return Vr("unknown mutation proto: "+JSON.stringify(t))},Qh.prototype.toPrecondition=function(t){return Br(!t.isNone,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Vr("Unknown precondition")},Qh.prototype.fromPrecondition=function(t){return void 0!==t.updateTime?Ta.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?Ta.exists(t.exists):Ta.NONE},Qh.prototype.fromWriteResult=function(t,e){var n=this,r=t.updateTime?this.fromVersion(t.updateTime):this.fromVersion(e);r.isEqual(so.MIN)&&(r=this.fromVersion(e));var i=null;return t.transformResults&&0<t.transformResults.length&&(i=t.transformResults.map(function(t){return n.fromValue(t)})),new function(t,e){this.version=t,this.transformResults=e}(r,i)},Qh.prototype.fromWriteResults=function(t,e){var n=this;return t&&0<t.length?(Br(void 0!==e,"Received a write result without a commit time"),t.map(function(t){return n.fromWriteResult(t,e)})):[]},Qh.prototype.toFieldTransform=function(t){var e=this,n=t.transform;if(n instanceof Dh)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof kh)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements.map(function(t){return e.toValue(t)})}};if(n instanceof Rh)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements.map(function(t){return e.toValue(t)})}};if(n instanceof Mh)return{fieldPath:t.field.canonicalString(),increment:this.toValue(n.operand)};throw Vr("Unknown transform: "+t.transform)},Qh.prototype.fromFieldTransform=function(t){var e=this,n=null;if("setToServerValue"in t)Br("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),n=Dh.instance;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new kh(r.map(function(t){return e.fromValue(t)}))}else if("removeAllFromArray"in t)r=t.removeAllFromArray.values||[],n=new Rh(r.map(function(t){return e.fromValue(t)}));else if("increment"in t){var i=this.fromValue(t.increment);Br(i instanceof Xa,"NUMERIC_ADD transform requires a NumberValue"),n=new Mh(i)}else Vr("Unknown transform proto: "+JSON.stringify(t));var o=qi.fromServerFormat(t.fieldPath);return new va(o,n)},Qh.prototype.toDocumentsTarget=function(t){return{documents:[this.toQueryPath(t.path)]}},Qh.prototype.fromDocumentsTarget=function(t){var e=t.documents.length;Br(1===e,"DocumentsTarget contained other than 1 document: "+e);var n=t.documents[0];return Sc.atPath(this.fromQueryPath(n)).toTarget()},Qh.prototype.toQueryTarget=function(t){var e={structuredQuery:{}},n=t.path;null!==t.collectionGroup?(Br(n.length%2==0,"Collection Group queries should be within a document path or root."),e.parent=this.toQueryPath(n),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(Br(n.length%2!=0,"Document queries with filters are not supported."),e.parent=this.toQueryPath(n.popLast()),e.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(t.filters);r&&(e.structuredQuery.where=r);var i=this.toOrder(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.toInt32Value(t.limit);return null!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.toCursor(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.toCursor(t.endAt)),e},Qh.prototype.fromQueryTarget=function(t){var e=this.fromQueryPath(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(0<r){Br(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=this.fromFilter(n.where));var s=[];n.orderBy&&(s=this.fromOrder(n.orderBy));var u=null;n.limit&&(u=this.fromInt32Value(n.limit));var c=null;n.startAt&&(c=this.fromCursor(n.startAt));var l=null;return n.endAt&&(l=this.fromCursor(n.endAt)),new Sc(e,i,s,a,u,gc.First,c,l).toTarget()},Qh.prototype.toListenRequestLabels=function(t){var e=this.toLabel(t.purpose);return null==e?null:{"goog-listen-tags":e}},Qh.prototype.toLabel=function(t){switch(t){case ku.Listen:return null;case ku.ExistenceFilterMismatch:return"existence-filter-mismatch";case ku.LimboResolution:return"limbo-document";default:return Vr("Unrecognized query purpose: "+t)}},Qh.prototype.toTarget=function(t){var e,n=t.target;return(e=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=t.targetId,0<t.resumeToken.length&&(e.resumeToken=this.unsafeCastProtoByteString(t.resumeToken)),e},Qh.prototype.toFilter=function(t){var e=this;if(0!==t.length){var n=t.map(function(t){return t instanceof Ac?e.toUnaryOrFieldFilter(t):Vr("Unrecognized filter: "+JSON.stringify(t))});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},Qh.prototype.fromFilter=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.fromUnaryFilter(t)]:void 0!==t.fieldFilter?[this.fromFieldFilter(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e.fromFilter(t)}).reduce(function(t,e){return t.concat(e)}):Vr("Unknown filter: "+JSON.stringify(t)):[]},Qh.prototype.toOrder=function(t){var e=this;if(0!==t.length)return t.map(function(t){return e.toPropertyOrder(t)})},Qh.prototype.fromOrder=function(t){var e=this;return t.map(function(t){return e.fromPropertyOrder(t)})},Qh.prototype.toCursor=function(t){var e=this;return{before:t.before,values:t.position.map(function(t){return e.toValue(t)})}},Qh.prototype.fromCursor=function(t){var e=this,n=!!t.before,r=t.values.map(function(t){return e.fromValue(t)});return new zc(r,n)},Qh.prototype.toDirection=function(t){return Uh[t.name]},Qh.prototype.fromDirection=function(t){switch(t){case"ASCENDING":return $c.ASCENDING;case"DESCENDING":return $c.DESCENDING;default:return}},Qh.prototype.toOperatorName=function(t){return jh[t.name]},Qh.prototype.fromOperatorName=function(t){switch(t){case"EQUAL":return Cc.EQUAL;case"GREATER_THAN":return Cc.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return Cc.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return Cc.LESS_THAN;case"LESS_THAN_OR_EQUAL":return Cc.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return Cc.ARRAY_CONTAINS;case"IN":return Cc.IN;case"ARRAY_CONTAINS_ANY":return Cc.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return Vr("Unspecified operator");default:return Vr("Unknown operator")}},Qh.prototype.toFieldPathReference=function(t){return{fieldPath:t.canonicalString()}},Qh.prototype.fromFieldPathReference=function(t){return qi.fromServerFormat(t.fieldPath)},Qh.prototype.toPropertyOrder=function(t){return{field:this.toFieldPathReference(t.field),direction:this.toDirection(t.dir)}},Qh.prototype.fromPropertyOrder=function(t){return new Gc(this.fromFieldPathReference(t.field),this.fromDirection(t.direction))},Qh.prototype.fromFieldFilter=function(t){return Ac.create(this.fromFieldPathReference(t.fieldFilter.field),this.fromOperatorName(t.fieldFilter.op),this.fromValue(t.fieldFilter.value))},Qh.prototype.toUnaryOrFieldFilter=function(t){if(t.op===Cc.EQUAL){if(t.value.isEqual(os.NAN))return{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NAN"}};if(t.value.isEqual(za.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(t.field),op:this.toOperatorName(t.op),value:this.toValue(t.value)}}},Qh.prototype.fromUnaryFilter=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.fromFieldPathReference(t.unaryFilter.field);return Ac.create(e,Cc.EQUAL,os.NAN);case"IS_NULL":var n=this.fromFieldPathReference(t.unaryFilter.field);return Ac.create(n,Cc.EQUAL,za.INSTANCE);case"OPERATOR_UNSPECIFIED":return Vr("Unspecified filter");default:return Vr("Unknown filter")}},Qh.prototype.toDocumentMask=function(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}},Qh.prototype.fromDocumentMask=function(t){var e=(t.fieldPaths||[]).map(function(t){return qi.fromServerFormat(t)});return ma.fromArray(e)},Qh);function Qh(t,e){this.databaseId=t,this.options=e}var Gh=(Hh.prototype.listen=function(t){var e=t.query,n=!1,r=this.queries.get(e);return r||(n=!0,r=new function(){this.viewSnap=null,this.targetId=0,this.listeners=[]},this.queries.set(e,r)),r.listeners.push(t),Br(!t.applyOnlineStateChange(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),!r.viewSnap||t.onViewSnapshot(r.viewSnap)&&this.raiseSnapshotsInSyncEvent(),n?this.syncEngine.listen(e).then(function(t){return r.targetId=t}):Promise.resolve(r.targetId)},Hh.prototype.unlisten=function(t){return u(this,void 0,void 0,function(){var e,n,r,i;return c(this,function(o){return e=t.query,n=!1,(r=this.queries.get(e))&&0<=(i=r.listeners.indexOf(t))&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(e),[2,this.syncEngine.unlisten(e)]):[2]})})},Hh.prototype.onWatchChange=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=i.query,a=this.queries.get(o);if(a){for(var s=0,u=a.listeners;s<u.length;s++)u[s].onViewSnapshot(i)&&(e=!0);a.viewSnap=i}}e&&this.raiseSnapshotsInSyncEvent()},Hh.prototype.onWatchError=function(t,e){var n=this.queries.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(e);this.queries.delete(t)},Hh.prototype.onOnlineStateChange=function(t){this.onlineState=t;var e=!1;this.queries.forEach(function(n,r){for(var i=0,o=r.listeners;i<o.length;i++)o[i].applyOnlineStateChange(t)&&(e=!0)}),e&&this.raiseSnapshotsInSyncEvent()},Hh.prototype.addSnapshotsInSyncListener=function(t){this.snapshotsInSyncListeners.add(t),t.next()},Hh.prototype.removeSnapshotsInSyncListener=function(t){this.snapshotsInSyncListeners.delete(t)},Hh.prototype.raiseSnapshotsInSyncEvent=function(){this.snapshotsInSyncListeners.forEach(function(t){t.next()})},Hh);function Hh(t){this.syncEngine=t,this.queries=new js(function(t){return t.canonicalId()}),this.onlineState=ql.Unknown,this.snapshotsInSyncListeners=new Set,this.syncEngine.subscribe(this)}var Yh=(Jh.prototype.onViewSnapshot=function(t){if(Br(0<t.docChanges.length||t.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];i.type!==Xl.Metadata&&e.push(i)}t=new ah(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(t)&&(this.queryObserver.next(t),o=!0):this.shouldRaiseInitialEvent(t,this.onlineState)&&(this.raiseInitialEvent(t),o=!0),this.snap=t,o},Jh.prototype.onError=function(t){this.queryObserver.error(t)},Jh.prototype.applyOnlineStateChange=function(t){this.onlineState=t;var e=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,t)&&(this.raiseInitialEvent(this.snap),e=!0),e},Jh.prototype.shouldRaiseInitialEvent=function(t,e){if(Br(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!t.fromCache)return!0;var n=e!==ql.Offline;return this.options.waitForSyncWhenOnline&&n?(Br(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.isEmpty()||e===ql.Offline},Jh.prototype.shouldRaiseEvent=function(t){if(0<t.docChanges.length)return!0;var e=this.snap&&this.snap.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},Jh.prototype.raiseInitialEvent=function(t){Br(!this.raisedInitialEvent,"Trying to raise initial events for second time"),t=ah.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(t)},Jh);function Jh(t,e,n){this.query=t,this.queryObserver=e,this.raisedInitialEvent=!1,this.snap=null,this.onlineState=ql.Unknown,this.options=n||{}}var Xh=(Zh.fromSnapshot=function(t,e){for(var n=ko(),r=ko(),i=0,o=e.docChanges;i<o.length;i++){var a=o[i];switch(a.type){case Xl.Added:n=n.add(a.doc.key);break;case Xl.Removed:r=r.add(a.doc.key)}}return new Zh(t,e.fromCache,n,r)},Zh);function Zh(t,e,n,r){this.targetId=t,this.fromCache=e,this.addedKeys=n,this.removedKeys=r}var tf=function(t){this.key=t},ef=function(t){this.key=t},nf=(Object.defineProperty(rf.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),rf.prototype.computeDocChanges=function(t,e){var n=this,r=e?e.changeSet:new ih,i=e?e.documentSet:this.documentSet,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=this.query.hasLimitToFirst()&&i.size===this.query.limit?i.last():null,c=this.query.hasLimitToLast()&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=e instanceof Ms?e:null;h&&(Br(t.isEqual(h.key),"Mismatching keys found in document changes: "+t+" != "+h.key),h=n.query.matches(h)?h:null);var f=!!l&&n.mutatedKeys.has(l.key),p=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),d=!1;l&&h?l.data().isEqual(h.data())?f!==p&&(r.track({type:Xl.Metadata,doc:h}),d=!0):n.shouldWaitForSyncedDocument(l,h)||(r.track({type:Xl.Modified,doc:h}),d=!0,(u&&0<n.query.docComparator(h,u)||c&&n.query.docComparator(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:Xl.Added,doc:h}),d=!0):l&&!h&&(r.track({type:Xl.Removed,doc:l}),d=!0,(u||c)&&(s=!0)),d&&(o=h?(a=a.add(h),p?o.add(t):o.delete(t)):(a=a.delete(t),o.delete(t)))}),this.query.hasLimitToFirst()||this.query.hasLimitToLast())for(;a.size>this.query.limit;){var l=this.query.hasLimitToFirst()?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:Xl.Removed,doc:l})}return Br(!s||!e,"View was refilled using docs that themselves needed refilling."),{documentSet:a,changeSet:r,needsRefill:s,mutatedKeys:o}},rf.prototype.shouldWaitForSyncedDocument=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},rf.prototype.applyChanges=function(t,e,n){var r=this;Br(!t.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=t.documentSet,this.mutatedKeys=t.mutatedKeys;var o=t.changeSet.getChanges();o.sort(function(t,e){return function(t,e){function n(t){switch(t){case Xl.Added:return 1;case Xl.Modified:case Xl.Metadata:return 2;case Xl.Removed:return 0;default:return Vr("Unknown ChangeType: "+t)}}return n(t)-n(e)}(t.type,e.type)||r.query.docComparator(t.doc,e.doc)}),this.applyTargetChange(n);var a=e?this.updateLimboDocuments():[],s=0===this.limboDocuments.size&&this.current?th.Synced:th.Local,u=s!==this.syncState;return this.syncState=s,0!==o.length||u?{snapshot:new ah(this.query,t.documentSet,i,o,t.mutatedKeys,s===th.Local,u,!1),limboChanges:a}:{limboChanges:a}},rf.prototype.applyOnlineStateChange=function(t){return this.current&&t===ql.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new ih,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},rf.prototype.shouldBeInLimbo=function(t){return!this._syncedDocuments.has(t)&&!!this.documentSet.has(t)&&!this.documentSet.get(t).hasLocalMutations},rf.prototype.applyTargetChange=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.add(t)}),t.modifiedDocuments.forEach(function(t){return Br(e._syncedDocuments.has(t),"Modified document "+t+" not found in view.")}),t.removedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.delete(t)}),this.current=t.current)},rf.prototype.updateLimboDocuments=function(){var t=this;if(!this.current)return[];var e=this.limboDocuments;this.limboDocuments=ko(),this.documentSet.forEach(function(e){t.shouldBeInLimbo(e.key)&&(t.limboDocuments=t.limboDocuments.add(e.key))});var n=[];return e.forEach(function(e){t.limboDocuments.has(e)||n.push(new ef(e))}),this.limboDocuments.forEach(function(t){e.has(t)||n.push(new tf(t))}),n},rf.prototype.synchronizeWithPersistedState=function(t){this._syncedDocuments=t.remoteKeys,this.limboDocuments=ko();var e=this.computeDocChanges(t.documents);return this.applyChanges(e,!0)},rf.prototype.computeInitialSnapshot=function(){return ah.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===th.Local)},rf);function rf(t,e){this.query=t,this._syncedDocuments=e,this.syncState=null,this.current=!1,this.limboDocuments=ko(),this.mutatedKeys=ko(),this.documentSet=new nh(t.docComparator.bind(t))}var of=(af.prototype.run=function(){this.runWithBackOff()},af.prototype.runWithBackOff=function(){var t=this;this.backoff.backoffAndRun(function(){return u(t,void 0,void 0,function(){var t,e,n=this;return c(this,function(r){return t=this.remoteStore.createTransaction(),(e=this.tryRunUpdateFunction(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.handleTransactionError(t)})})}).catch(function(t){n.handleTransactionError(t)}),[2]})})})},af.prototype.tryRunUpdateFunction=function(t){try{var e=this.updateFunction(t);return!yc(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},af.prototype.handleTransactionError=function(t){var e=this;0<this.retries&&this.isRetryableTransactionError(t)?(this.retries-=1,this.asyncQueue.enqueueAndForget(function(){return e.runWithBackOff(),Promise.resolve()})):this.deferred.reject(t)},af.prototype.isRetryableTransactionError=function(t){if("FirebaseError"!==t.name)return!1;var e=t.code;return"aborted"===e||"failed-precondition"===e||!Yl(e)},af);function af(t,e,n,r){this.asyncQueue=t,this.remoteStore=e,this.updateFunction=n,this.deferred=r,this.retries=5,this.backoff=new Il(this.asyncQueue,$i.RetryTransaction)}var sf="SyncEngine",uf=(Object.defineProperty(cf.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),cf.prototype.subscribe=function(t){Br(null!==t,"SyncEngine listener cannot be null"),Br(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=t},cf.prototype.listen=function(t){return u(this,void 0,void 0,function(){var e,n,r,i,o;return c(this,function(a){switch(a.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(t))?(e=r.targetId,this.sharedClientState.addLocalQueryTarget(e),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateTarget(t.toTarget())];case 2:return i=a.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),e=i.targetId,[4,this.initializeViewAndComputeSnapshot(t,e,"current"===o)];case 3:n=a.sent(),this.isPrimary&&this.remoteStore.listen(i),a.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,e]}})})},cf.prototype.initializeViewAndComputeSnapshot=function(t,e,n){return u(this,void 0,void 0,function(){var r,i,o,a,s,u;return c(this,function(c){switch(c.label){case 0:return[4,this.localStore.executeQuery(t,!0)];case 1:return r=c.sent(),i=new nf(t,r.remoteKeys),o=i.computeDocChanges(r.documents),a=lh.createSynthesizedTargetChangeForCurrentChange(e,n&&this.onlineState!==ql.Offline),Br(0===(s=i.applyChanges(o,!0===this.isPrimary,a)).limboChanges.length,"View returned limbo docs before target ack from the server."),Br(!!s.snapshot,"applyChanges for new view should always return a snapshot"),u=new function(t,e,n){this.query=t,this.targetId=e,this.view=n}(t,e,i),this.queryViewsByQuery.set(t,u),this.queriesByTarget[e]||(this.queriesByTarget[e]=[]),this.queriesByTarget[e].push(t),[2,s.snapshot]}})})},cf.prototype.synchronizeViewAndComputeSnapshot=function(t){return u(this,void 0,void 0,function(){var e,n;return c(this,function(r){switch(r.label){case 0:return[4,this.localStore.executeQuery(t.query,!0)];case 1:return e=r.sent(),n=t.view.synchronizeWithPersistedState(e),this.isPrimary&&this.updateTrackedLimbos(t.targetId,n.limboChanges),[2,n]}})})},cf.prototype.unlisten=function(t){return u(this,void 0,void 0,function(){var e,n,r=this;return c(this,function(i){switch(i.label){case 0:return this.assertSubscribed("unlisten()"),Br(!!(e=this.queryViewsByQuery.get(t)),"Trying to unlisten on query not found:"+t),1<(n=this.queriesByTarget[e.targetId]).length?(this.queriesByTarget[e.targetId]=n.filter(function(e){return!e.isEqual(t)}),this.queryViewsByQuery.delete(t),[2]):this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(e.targetId),this.sharedClientState.isActiveQueryTarget(e.targetId)?[3,2]:[4,this.localStore.releaseTarget(e.targetId,!1).then(function(){r.sharedClientState.clearQueryState(e.targetId),r.remoteStore.unlisten(e.targetId),r.removeAndCleanupTarget(e.targetId)}).catch(ac)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupTarget(e.targetId),[4,this.localStore.releaseTarget(e.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}})})},cf.prototype.write=function(t,e){return u(this,void 0,void 0,function(){var n;return c(this,function(r){switch(r.label){case 0:return this.assertSubscribed("write()"),[4,this.localStore.localWrite(t)];case 1:return n=r.sent(),this.sharedClientState.addPendingMutation(n.batchId),this.addMutationCallback(n.batchId,e),[4,this.emitNewSnapsAndNotifyLocalStore(n.changes)];case 2:return r.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return r.sent(),[2]}})})},cf.prototype.runTransaction=function(t,e,n){new of(t,this.remoteStore,e,n).run()},cf.prototype.applyRemoteEvent=function(t){return u(this,void 0,void 0,function(){var e,n=this;return c(this,function(r){switch(r.label){case 0:this.assertSubscribed("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(t)];case 2:return e=r.sent(),Jr(t.targetChanges,function(t,e){var r=n.limboResolutionsByTarget[Number(t)];r&&(Br(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),0<e.addedDocuments.size?r.receivedDocument=!0:0<e.modifiedDocuments.size?Br(r.receivedDocument,"Received change for limbo target document without add."):0<e.removedDocuments.size&&(Br(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))}),[4,this.emitNewSnapsAndNotifyLocalStore(e,t)];case 3:return r.sent(),[3,6];case 4:return[4,ac(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}})})},cf.prototype.applyOnlineStateChange=function(t,e){if(this.isPrimary&&e===jl.RemoteStore||!this.isPrimary&&e===jl.SharedClientState){this.assertSubscribed("applyOnlineStateChange()");var n=[];this.queryViewsByQuery.forEach(function(e,r){var i=r.view.applyOnlineStateChange(t);Br(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)}),this.syncEngineListener.onOnlineStateChange(t),this.syncEngineListener.onWatchChange(n),this.onlineState=t,this.isPrimary&&this.sharedClientState.setOnlineState(t)}},cf.prototype.rejectListen=function(t,e){return u(this,void 0,void 0,function(){var n,r,i,o,a,s=this;return c(this,function(u){switch(u.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(t,"rejected",e),n=this.limboResolutionsByTarget[t],(r=n&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[t],i=(i=new co(ji.comparator)).insert(r,new Fs(r,so.forDeletedDoc())),o=ko().add(r),a=new uh(so.MIN,{},new go(bi),i,o),[2,this.applyRemoteEvent(a)]):[3,1];case 1:return[4,this.localStore.releaseTarget(t,!1).then(function(){return s.removeAndCleanupTarget(t,e)}).catch(ac)];case 2:u.sent(),u.label=3;case 3:return[2]}})})},cf.prototype.applyBatchState=function(t,e,n){return u(this,void 0,void 0,function(){var r;return c(this,function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(t)];case 1:return null===(r=i.sent())?(Lr(sf,"Cannot apply mutation batch with id: "+t),[2]):"pending"!==e?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.processUserCallback(t,n||null),this.localStore.removeCachedMutationBatchMetadata(t)):Vr("Unknown batchState: "+e),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}})})},cf.prototype.applySuccessfulWrite=function(t){return u(this,void 0,void 0,function(){var e,n;return c(this,function(r){switch(r.label){case 0:this.assertSubscribed("applySuccessfulWrite()"),e=t.batch.batchId,this.processUserCallback(e,null),this.triggerPendingWritesCallbacks(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(t)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(e,"acknowledged"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,ac(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}})})},cf.prototype.rejectFailedWrite=function(t,e){return u(this,void 0,void 0,function(){var n;return c(this,function(r){switch(r.label){case 0:this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(t,e),this.triggerPendingWritesCallbacks(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(t)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(t,"rejected",e),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,ac(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}})})},cf.prototype.registerPendingWritesCallback=function(t){return u(this,void 0,void 0,function(){var e,n;return c(this,function(r){switch(r.label){case 0:return this.remoteStore.canUseNetwork()||Lr(sf,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.localStore.getHighestUnacknowledgedBatchId()];case 1:return-1===(e=r.sent())?t.resolve():((n=this.pendingWritesCallbacks.get(e)||[]).push(t),this.pendingWritesCallbacks.set(e,n)),[2]}})})},cf.prototype.triggerPendingWritesCallbacks=function(t){(this.pendingWritesCallbacks.get(t)||[]).forEach(function(t){t.resolve()}),this.pendingWritesCallbacks.delete(t)},cf.prototype.rejectOutstandingPendingWritesCallbacks=function(t){this.pendingWritesCallbacks.forEach(function(e){e.forEach(function(e){e.reject(new Wr($r.CANCELLED,t))})}),this.pendingWritesCallbacks.clear()},cf.prototype.addMutationCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n=(n=n||new co(bi)).insert(t,e),this.mutationUserCallbacks[this.currentUser.toKey()]=n},cf.prototype.processUserCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(t);r&&(Br(t===n.minKey(),"Mutation callbacks processed out-of-order?"),e?r.reject(e):r.resolve(),n=n.remove(t)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},cf.prototype.removeAndCleanupTarget=function(t,e){var n=this;void 0===e&&(e=null),this.sharedClientState.removeLocalQueryTarget(t),Br(this.queriesByTarget[t]&&0!==this.queriesByTarget[t].length,"There are no queries mapped to target id "+t);for(var r=0,i=this.queriesByTarget[t];r<i.length;r++){var o=i[r];this.queryViewsByQuery.delete(o),e&&this.syncEngineListener.onWatchError(o,e)}if(delete this.queriesByTarget[t],this.isPrimary){var a=this.limboDocumentRefs.referencesForId(t);this.limboDocumentRefs.removeReferencesForId(t),a.forEach(function(t){n.limboDocumentRefs.containsKey(t)||n.removeLimboTarget(t)})}},cf.prototype.removeLimboTarget=function(t){var e=this.limboTargetsByKey.get(t);null!==e&&(this.remoteStore.unlisten(e),this.limboTargetsByKey=this.limboTargetsByKey.remove(t),delete this.limboResolutionsByTarget[e])},cf.prototype.updateTrackedLimbos=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof tf?(this.limboDocumentRefs.addReference(i.key,t),this.trackLimboChange(i)):i instanceof ef?(Lr(sf,"Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,t),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)):Vr("Unknown limbo change: "+JSON.stringify(i))}},cf.prototype.trackLimboChange=function(t){var e=t.key;if(!this.limboTargetsByKey.get(e)){Lr(sf,"New document in limbo: "+e);var n=this.limboTargetIdGenerator.next(),r=Sc.atPath(e.path);this.limboResolutionsByTarget[n]=new function(t){this.key=t,this.receivedDocument=!1}(e),this.remoteStore.listen(new Pu(r.toTarget(),n,ku.LimboResolution,ki.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(e,n)}},cf.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},cf.prototype.emitNewSnapsAndNotifyLocalStore=function(t,e){return u(this,void 0,void 0,function(){var n,r,i,o=this;return c(this,function(a){switch(a.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach(function(a,s){i.push(Promise.resolve().then(function(){var e=s.view.computeDocChanges(t);return e.needsRefill?o.localStore.executeQuery(s.query,!1).then(function(t){var n=t.documents;return s.view.computeDocChanges(n,e)}):e}).then(function(t){var i=e&&e.targetChanges[s.targetId],a=s.view.applyChanges(t,!0===o.isPrimary,i);if(o.updateTrackedLimbos(s.targetId,a.limboChanges),a.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(s.targetId,a.snapshot.fromCache?"not-current":"current"),n.push(a.snapshot);var u=Xh.fromSnapshot(s.targetId,a.snapshot);r.push(u)}}))}),[4,Promise.all(i)];case 1:return a.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return a.sent(),[2]}})})},cf.prototype.assertSubscribed=function(t){Br(null!==this.syncEngineListener,"Trying to call "+t+" before calling subscribe().")},cf.prototype.handleCredentialChange=function(t){return u(this,void 0,void 0,function(){var e,n;return c(this,function(r){switch(r.label){case 0:return e=!this.currentUser.isEqual(t),this.currentUser=t,e?(this.rejectOutstandingPendingWritesCallbacks("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.localStore.handleUserChange(t)]):[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}})})},cf.prototype.applyPrimaryState=function(t){return u(this,void 0,void 0,function(){var e,n,r,i,o,a,s,u=this;return c(this,function(c){switch(c.label){case 0:return!0!==t||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return c.sent(),e=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(e.toArray())];case 2:for(n=c.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.remoteStore.listen(o);return[3,7];case 3:return!1!==t||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,a=[],s=Promise.resolve(),Yr(this.queriesByTarget,function(t,e){u.sharedClientState.isLocalQueryTarget(t)?a.push(t):s=s.then(function(){return u.removeAndCleanupTarget(t),u.localStore.releaseTarget(t,!0)}),u.remoteStore.unlisten(t)}),[4,s]);case 4:return c.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(a)];case 5:return c.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})},cf.prototype.resetLimboDocuments=function(){var t=this;Yr(this.limboResolutionsByTarget,function(e){t.remoteStore.unlisten(e)}),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new co(ji.comparator)},cf.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(t){return u(this,void 0,void 0,function(){var e,n,r,i,o,a,s,u,l,h,f,p,d;return c(this,function(c){switch(c.label){case 0:e=[],n=[],r=0,i=t,c.label=1;case 1:return r<i.length?(o=i[r],a=void 0,(s=this.queriesByTarget[o])&&0!==s.length?[4,this.localStore.releaseTarget(o,!0)]:[3,8]):[3,14];case 2:return c.sent(),[4,this.localStore.allocateTarget(s[0].toTarget())];case 3:a=c.sent(),u=0,l=s,c.label=4;case 4:return u<l.length?(h=l[u],Br(!!(f=this.queryViewsByQuery.get(h)),"No query view found for "+h),[4,this.synchronizeViewAndComputeSnapshot(f)]):[3,7];case 5:(p=c.sent()).snapshot&&n.push(p.snapshot),c.label=6;case 6:return u++,[3,4];case 7:return[3,12];case 8:return Br(!0===this.isPrimary,"A secondary tab should never have an active target without an active query."),[4,this.localStore.getTarget(o)];case 9:return Br(!!(d=c.sent()),"Target for id "+o+" not found"),[4,this.localStore.allocateTarget(d)];case 10:return a=c.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(d),o,!1)];case 11:c.sent(),c.label=12;case 12:e.push(a),c.label=13;case 13:return r++,[3,1];case 14:return this.syncEngineListener.onWatchChange(n),[2,e]}})})},cf.prototype.synthesizeTargetToQuery=function(t){return new Sc(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,gc.First,t.startAt,t.endAt)},cf.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},cf.prototype.applyTargetState=function(t,e,n){return u(this,void 0,void 0,function(){var r,i;return c(this,function(o){switch(o.label){case 0:if(this.isPrimary)return Lr(sf,"Ignoring unexpected query state notification."),[2];if(!this.queriesByTarget[t])return[3,7];switch(e){case"current":case"not-current":return[3,1];case"rejected":return[3,4]}return[3,6];case 1:return[4,this.localStore.getNewDocumentChanges()];case 2:return r=o.sent(),i=uh.createSynthesizedRemoteEventForCurrentChange(t,"current"===e),[4,this.emitNewSnapsAndNotifyLocalStore(r,i)];case 3:return o.sent(),[3,7];case 4:return[4,this.localStore.releaseTarget(t,!0)];case 5:return o.sent(),this.removeAndCleanupTarget(t,n),[3,7];case 6:Vr("Unexpected target state: "+e),o.label=7;case 7:return[2]}})})},cf.prototype.applyActiveTargetsChange=function(t,e){return u(this,void 0,void 0,function(){var n,r,i,o,a,s,u,l,h,f=this;return c(this,function(p){switch(p.label){case 0:if(!this.isPrimary)return[2];n=0,r=t,p.label=1;case 1:return n<r.length?(h=r[n],Br(!this.queriesByTarget[h],"Trying to add an already active target"),[4,this.localStore.getTarget(h)]):[3,6];case 2:return Br(!!(i=p.sent()),"Query data for active target "+h+" not found"),[4,this.localStore.allocateTarget(i)];case 3:return o=p.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(i),o.targetId,!1)];case 4:p.sent(),this.remoteStore.listen(o),p.label=5;case 5:return n++,[3,1];case 6:a=function(t){return c(this,function(e){switch(e.label){case 0:return s.queriesByTarget[t]?[4,s.localStore.releaseTarget(t,!1).then(function(){f.remoteStore.unlisten(t),f.removeAndCleanupTarget(t)}).catch(ac)]:[2,"continue"];case 1:return e.sent(),[2]}})},s=this,u=0,l=e,p.label=7;case 7:return u<l.length?(h=l[u],[5,a(h)]):[3,10];case 8:p.sent(),p.label=9;case 9:return u++,[3,7];case 10:return[2]}})})},cf.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},cf.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},cf.prototype.getRemoteKeysForTarget=function(t){var e=this.limboResolutionsByTarget[t];if(e&&e.receivedDocument)return ko().add(e.key);var n=ko(),r=this.queriesByTarget[t];if(!r)return n;for(var i=0,o=r;i<o.length;i++){var a=o[i],s=this.queryViewsByQuery.get(a);Br(!!s,"No query view found for "+a),n=n.unionWith(s.view.syncedDocuments)}return n},cf);function cf(t,e,n,r){this.localStore=t,this.remoteStore=e,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new js(function(t){return t.canonicalId()}),this.queriesByTarget={},this.limboTargetsByKey=new co(ji.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new nl,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=sa.forSyncEngine(),this.isPrimary=void 0,this.onlineState=ql.Unknown}var lf=(hf.prototype.isAuthenticated=function(){return null!=this.uid},hf.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},hf.prototype.isEqual=function(t){return t.uid===this.uid},hf.UNAUTHENTICATED=new hf(null),hf.GOOGLE_CREDENTIALS=new hf("google-credentials-uid"),hf.FIRST_PARTY=new hf("first-party-uid"),hf);function hf(t){this.uid=t}var ff="firestore_clients";function pf(t,e){return Br(-1===e.indexOf("_"),"Client key cannot contain '_', but was '"+e+"'"),ff+"_"+t+"_"+e}var df="firestore_mutations";function mf(t,e,n){var r=df+"_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}var yf="firestore_targets";function vf(t,e){return yf+"_"+t+"_"+e}var gf="firestore_online_state",bf="firestore_sequence_number",wf="SharedClientState",Tf=(Sf.fromWebStorageEntry=function(t,e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new Wr(r.error.code,r.error.message)),i?new Sf(t,e,r.state,o):(Pr(wf,"Failed to parse mutation state for ID '"+e+"': "+n),null)},Sf.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},Sf);function Sf(t,e,n,r){this.user=t,this.batchId=e,this.state=n,Br(void 0!==(this.error=r)==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}var Ef=(Cf.fromWebStorageEntry=function(t,e){var n=JSON.parse(e),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new Wr(n.error.code,n.error.message)),r?new Cf(t,n.state,i):(Pr(wf,"Failed to parse target state for ID '"+t+"': "+e),null)},Cf.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},Cf);function Cf(t,e,n){this.targetId=t,this.state=e,Br(void 0!==(this.error=n)==("rejected"===e),"QueryTargetMetadata must contain an error iff state is 'rejected'")}var If=(_f.fromWebStorageEntry=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Ro(),o=0;r&&o<n.activeTargetIds.length;++o)r=vc(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new _f(t,i):(Pr(wf,"Failed to parse client data for instance '"+t+"': "+e),null)},_f);function _f(t,e){this.clientId=t,this.activeTargetIds=e}var Af=(Df.fromWebStorageEntry=function(t){var e=JSON.parse(t);return"object"==typeof e&&e.onlineState in ql&&"string"==typeof e.clientId?new Df(e.clientId,ql[e.onlineState]):(Pr(wf,"Failed to parse online state: "+t),null)},Df);function Df(t,e){this.clientId=t,this.onlineState=e}var Nf=(kf.prototype.addQueryTarget=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},kf.prototype.removeQueryTarget=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},kf.prototype.toWebStorageJSON=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},kf);function kf(){this.activeTargetIds=Ro()}var Of=(Rf.isAvailable=function(t){return!(!t.window||null==t.window.localStorage)},Rf.prototype.start=function(){return u(this,void 0,void 0,function(){var t,e,n,r,i,o,a,s,u,l,h,f=this;return c(this,function(c){switch(c.label){case 0:return Br(!this.started,"WebStorageSharedClientState already started"),Br(null!==this.syncEngine,"syncEngine property must be set before calling start()"),Br(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(t=c.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.localClientId&&(i=this.getItem(pf(this.persistenceKey,r)))&&(o=If.fromWebStorageEntry(r,i))&&(this.activeClients[o.clientId]=o);for(this.persistClientState(),(a=this.storage.getItem(this.onlineStateKey))&&(s=this.fromWebStorageOnlineState(a))&&this.handleOnlineStateEvent(s),u=0,l=this.earlyEvents;u<l.length;u++)h=l[u],this.handleWebStorageEvent(h);return this.earlyEvents=[],this.platform.window.addEventListener("unload",function(){return f.shutdown()}),this.started=!0,[2]}})})},Rf.prototype.writeSequenceNumber=function(t){this.setItem(this.sequenceNumberKey,JSON.stringify(t))},Rf.prototype.getAllActiveQueryTargets=function(){var t=Ro();return Jr(this.activeClients,function(e,n){t=t.unionWith(n.activeTargetIds)}),t},Rf.prototype.isActiveQueryTarget=function(t){for(var e in this.activeClients)if(this.activeClients.hasOwnProperty(e)&&this.activeClients[e].activeTargetIds.has(t))return!0;return!1},Rf.prototype.addPendingMutation=function(t){this.persistMutationState(t,"pending")},Rf.prototype.updateMutationState=function(t,e,n){this.persistMutationState(t,e,n),this.removeMutationState(t)},Rf.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(vf(this.persistenceKey,t));if(n){var r=Ef.fromWebStorageEntry(t,n);r&&(e=r.state)}}return this.localClientState.addQueryTarget(t),this.persistClientState(),e},Rf.prototype.removeLocalQueryTarget=function(t){this.localClientState.removeQueryTarget(t),this.persistClientState()},Rf.prototype.isLocalQueryTarget=function(t){return this.localClientState.activeTargetIds.has(t)},Rf.prototype.clearQueryState=function(t){this.removeItem(vf(this.persistenceKey,t))},Rf.prototype.updateQueryState=function(t,e,n){this.persistQueryTargetState(t,e,n)},Rf.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.removeMutationState(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},Rf.prototype.setOnlineState=function(t){this.persistOnlineState(t)},Rf.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},Rf.prototype.getItem=function(t){var e=this.storage.getItem(t);return Lr(wf,"READ",t,e),e},Rf.prototype.setItem=function(t,e){Lr(wf,"SET",t,e),this.storage.setItem(t,e)},Rf.prototype.removeItem=function(t){Lr(wf,"REMOVE",t),this.storage.removeItem(t)},Rf.prototype.handleWebStorageEvent=function(t){var e=this;if(t.storageArea===this.storage){if(Lr(wf,"EVENT",t.key,t.newValue),t.key===this.localClientStorageKey)return void Pr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget(function(){return u(e,void 0,void 0,function(){var e,n,r,i,o,a;return c(this,function(s){if(!this.started)return this.earlyEvents.push(t),[2];if(null===t.key)return[2];if(this.clientStateKeyRe.test(t.key)){if(null==t.newValue)return n=this.fromWebStorageClientStateKey(t.key),[2,this.handleClientStateEvent(n,null)];if(e=this.fromWebStorageClientState(t.key,t.newValue))return[2,this.handleClientStateEvent(e.clientId,e)]}else if(this.mutationBatchKeyRe.test(t.key)){if(null!==t.newValue&&(r=this.fromWebStorageMutationMetadata(t.key,t.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(t.key)){if(null!==t.newValue&&(i=this.fromWebStorageQueryTargetMetadata(t.key,t.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(t.key===this.onlineStateKey){if(null!==t.newValue&&(o=this.fromWebStorageOnlineState(t.newValue)))return[2,this.handleOnlineStateEvent(o)]}else t.key===this.sequenceNumberKey&&(Br(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(a=function(t){var e=ki.INVALID;if(null!=t)try{var n=JSON.parse(t);Br("number"==typeof n,"Found non-numeric sequence number"),e=n}catch(t){Pr(wf,"Failed to read sequence number from WebStorage",t)}return e}(t.newValue))!==ki.INVALID&&this.sequenceNumberHandler(a));return[2]})})})}},Object.defineProperty(Rf.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),Rf.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},Rf.prototype.persistMutationState=function(t,e,n){var r=new Tf(this.currentUser,t,e,n),i=mf(this.persistenceKey,this.currentUser,t);this.setItem(i,r.toWebStorageJSON())},Rf.prototype.removeMutationState=function(t){var e=mf(this.persistenceKey,this.currentUser,t);this.removeItem(e)},Rf.prototype.persistOnlineState=function(t){var e={clientId:this.localClientId,onlineState:ql[t]};this.storage.setItem(this.onlineStateKey,JSON.stringify(e))},Rf.prototype.persistQueryTargetState=function(t,e,n){var r=vf(this.persistenceKey,t),i=new Ef(t,e,n);this.setItem(r,i.toWebStorageJSON())},Rf.prototype.fromWebStorageClientStateKey=function(t){var e=this.clientStateKeyRe.exec(t);return e?e[1]:null},Rf.prototype.fromWebStorageClientState=function(t,e){var n=this.fromWebStorageClientStateKey(t);return Br(null!==n,"Cannot parse client state key '"+t+"'"),If.fromWebStorageEntry(n,e)},Rf.prototype.fromWebStorageMutationMetadata=function(t,e){var n=this.mutationBatchKeyRe.exec(t);Br(null!==n,"Cannot parse mutation batch key '"+t+"'");var r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Tf.fromWebStorageEntry(new lf(i),r,e)},Rf.prototype.fromWebStorageQueryTargetMetadata=function(t,e){var n=this.queryTargetKeyRe.exec(t);Br(null!==n,"Cannot parse query target key '"+t+"'");var r=Number(n[1]);return Ef.fromWebStorageEntry(r,e)},Rf.prototype.fromWebStorageOnlineState=function(t){return Af.fromWebStorageEntry(t)},Rf.prototype.handleMutationBatchEvent=function(t){return u(this,void 0,void 0,function(){return c(this,function(e){return t.user.uid!==this.currentUser.uid?(Lr(wf,"Ignoring mutation for non-active user "+t.user.uid),[2]):[2,this.syncEngine.applyBatchState(t.batchId,t.state,t.error)]})})},Rf.prototype.handleQueryTargetEvent=function(t){return this.syncEngine.applyTargetState(t.targetId,t.state,t.error)},Rf.prototype.handleClientStateEvent=function(t,e){var n=this,r=this.getAllActiveQueryTargets();e?this.activeClients[t]=e:delete this.activeClients[t];var i=this.getAllActiveQueryTargets(),o=[],a=[];return i.forEach(function(t){return u(n,void 0,void 0,function(){return c(this,function(e){return r.has(t)||o.push(t),[2]})})}),r.forEach(function(t){return u(n,void 0,void 0,function(){return c(this,function(e){return i.has(t)||a.push(t),[2]})})}),this.syncEngine.applyActiveTargetsChange(o,a)},Rf.prototype.handleOnlineStateEvent=function(t){this.activeClients[t.clientId]&&this.onlineStateHandler(t.onlineState)},Rf);function Rf(t,e,n,r,i){if(this.queue=t,this.platform=e,this.persistenceKey=n,this.localClientId=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!Rf.isAvailable(this.platform))throw new Wr($r.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=i,this.localClientStorageKey=pf(this.persistenceKey,this.localClientId),this.sequenceNumberKey=function(t){return bf+"_"+t}(this.persistenceKey),this.activeClients[this.localClientId]=new Nf,this.clientStateKeyRe=new RegExp("^"+ff+"_"+o+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+df+"_"+o+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+yf+"_"+o+"_(\\d+)$"),this.onlineStateKey=function(t){return gf+"_"+t}(this.persistenceKey),this.platform.window.addEventListener("storage",this.storageListener)}var xf=(Mf.prototype.addPendingMutation=function(t){},Mf.prototype.updateMutationState=function(t,e,n){},Mf.prototype.addLocalQueryTarget=function(t){return this.localState.addQueryTarget(t),this.queryState[t]||"not-current"},Mf.prototype.updateQueryState=function(t,e,n){this.queryState[t]=e},Mf.prototype.removeLocalQueryTarget=function(t){this.localState.removeQueryTarget(t)},Mf.prototype.isLocalQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},Mf.prototype.clearQueryState=function(t){delete this.queryState[t]},Mf.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},Mf.prototype.isActiveQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},Mf.prototype.start=function(){return this.localState=new Nf,Promise.resolve()},Mf.prototype.handleUserChange=function(t,e,n){},Mf.prototype.setOnlineState=function(t){},Mf.prototype.shutdown=function(){},Mf.prototype.writeSequenceNumber=function(t){},Mf);function Mf(){this.localState=new Nf,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}var Lf="FirestoreClient",Pf=(Ff.prototype.lruParams=function(){return $u.withCacheSize(this.cacheSizeBytes)},Ff);function Ff(t,e){this.cacheSizeBytes=t,this.synchronizeTabs=e}var Vf=(Bf.prototype.start=function(t){var e=this;this.verifyNotTerminated();var n=new zi,r=new zi,i=!1;return this.credentials.setChangeListener(function(o){i?e.asyncQueue.enqueueAndForget(function(){return e.handleCredentialChange(o)}):(i=!0,e.initializePersistence(t,r,o).then(function(t){return e.initializeRest(o,t)}).then(n.resolve,n.reject))}),this.asyncQueue.enqueueAndForget(function(){return n.promise}),r.promise},Bf.prototype.enableNetwork=function(){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return t.syncEngine.enableNetwork()})},Bf.prototype.initializePersistence=function(t,e,n){var r=this;return t instanceof Pf?this.startIndexedDbPersistence(n,t).then(function(t){return e.resolve(),t}).catch(function(t){if(e.reject(t),!r.canFallback(t))throw t;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+t),r.startMemoryPersistence()}):(e.resolve(),this.startMemoryPersistence())},Bf.prototype.canFallback=function(t){return t instanceof Wr?t.code===$r.FAILED_PRECONDITION||t.code===$r.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},Bf.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Wr($r.FAILED_PRECONDITION,"The client has already been terminated.")},Bf.prototype.startIndexedDbPersistence=function(t,e){var n=this,r=ic.buildStoragePrefix(this.databaseInfo),i=new zh(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then(function(){return u(n,void 0,void 0,function(){var n,o;return c(this,function(a){switch(a.label){case 0:if(e.synchronizeTabs&&!Of.isAvailable(this.platform))throw new Wr($r.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return n=e.lruParams(),this.sharedClientState=e.synchronizeTabs?new Of(this.asyncQueue,this.platform,r,this.clientId,t):new xf,[4,ic.createIndexedDbPersistence({allowTabSynchronization:e.synchronizeTabs,persistenceKey:r,clientId:this.clientId,platform:this.platform,queue:this.asyncQueue,serializer:i,lruParams:n,sequenceNumberSyncer:this.sharedClientState})];case 1:return o=a.sent(),[2,(this.persistence=o).referenceDelegate.garbageCollector]}})})})},Bf.prototype.startMemoryPersistence=function(){return this.persistence=yl.createEagerPersistence(this.clientId),this.sharedClientState=new xf,Promise.resolve(null)},Bf.prototype.initializeRest=function(t,e){var n=this;return Lr(Lf,"Initializing. user=",t.uid),this.platform.loadConnection(this.databaseInfo).then(function(r){return u(n,void 0,void 0,function(){var n,i,o,a,s,l,h=this;return c(this,function(f){switch(f.label){case 0:return n=new Xc,this.localStore=new al(this.persistence,n,t),[4,this.localStore.start()];case 1:return f.sent(),e&&(this.lruScheduler=new zu(e,this.asyncQueue,this.localStore)),i=this.platform.newConnectivityMonitor(),o=this.platform.newSerializer(this.databaseInfo.databaseId),a=new Vl(this.asyncQueue,r,this.credentials,o),s=function(t){return h.syncEngine.applyOnlineStateChange(t,jl.RemoteStore)},l=function(t){return h.syncEngine.applyOnlineStateChange(t,jl.SharedClientState)},this.remoteStore=new Ch(this.localStore,a,this.asyncQueue,s,i),this.syncEngine=new uf(this.localStore,this.remoteStore,this.sharedClientState,t),this.sharedClientState.onlineStateHandler=l,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new Gh(this.syncEngine),[4,this.sharedClientState.start()];case 2:return f.sent(),[4,this.remoteStore.start()];case 3:return f.sent(),[4,this.persistence.setPrimaryStateListener(function(t){return u(h,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,this.syncEngine.applyPrimaryState(t)];case 1:return e.sent(),this.lruScheduler&&(t&&!this.lruScheduler.started?this.lruScheduler.start():t||this.lruScheduler.stop()),[2]}})})})];case 4:return f.sent(),[4,this.persistence.setDatabaseDeletedListener(function(){return u(h,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}})})})];case 5:return f.sent(),[2]}})})})},Bf.prototype.handleCredentialChange=function(t){return this.asyncQueue.verifyOperationInProgress(),Lr(Lf,"Credential Changed. Current user: "+t.uid),this.syncEngine.handleCredentialChange(t)},Bf.prototype.disableNetwork=function(){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return t.syncEngine.disableNetwork()})},Bf.prototype.terminate=function(){var t=this;return this.asyncQueue.enqueueAndInitiateShutdown(function(){return u(t,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return t.sent(),[4,this.sharedClientState.shutdown()];case 2:return t.sent(),[4,this.persistence.shutdown()];case 3:return t.sent(),this.credentials.removeChangeListener(),[2]}})})})},Bf.prototype.waitForPendingWrites=function(){var t=this;this.verifyNotTerminated();var e=new zi;return this.asyncQueue.enqueueAndForget(function(){return t.syncEngine.registerPendingWritesCallback(e)}),e.promise},Bf.prototype.listen=function(t,e,n){var r=this;this.verifyNotTerminated();var i=new Yh(t,e,n);return this.asyncQueue.enqueueAndForget(function(){return r.eventMgr.listen(i)}),i},Bf.prototype.unlisten=function(t){var e=this;this.clientTerminated||this.asyncQueue.enqueueAndForget(function(){return e.eventMgr.unlisten(t)})},Bf.prototype.getDocumentFromLocalCache=function(t){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return e.localStore.readDocument(t)}).then(function(t){if(t instanceof Ms)return t;if(t instanceof Fs)return null;throw new Wr($r.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},Bf.prototype.getDocumentsFromLocalCache=function(t){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return u(e,void 0,void 0,function(){var e,n,r;return c(this,function(i){switch(i.label){case 0:return[4,this.localStore.executeQuery(t,!0)];case 1:return e=i.sent(),n=new nf(t,e.remoteKeys),r=n.computeDocChanges(e.documents),[2,n.applyChanges(r,!1).snapshot]}})})})},Bf.prototype.write=function(t){var e=this;this.verifyNotTerminated();var n=new zi;return this.asyncQueue.enqueueAndForget(function(){return e.syncEngine.write(t,n)}),n.promise},Bf.prototype.databaseId=function(){return this.databaseInfo.databaseId},Bf.prototype.addSnapshotsInSyncListener=function(t){var e=this;this.verifyNotTerminated(),this.asyncQueue.enqueueAndForget(function(){return e.eventMgr.addSnapshotsInSyncListener(t),Promise.resolve()})},Bf.prototype.removeSnapshotsInSyncListener=function(t){this.clientTerminated||this.eventMgr.removeSnapshotsInSyncListener(t)},Object.defineProperty(Bf.prototype,"clientTerminated",{get:function(){return this.asyncQueue.isShuttingDown},enumerable:!0,configurable:!0}),Bf.prototype.transaction=function(t){var e=this;this.verifyNotTerminated();var n=new zi;return this.asyncQueue.enqueueAndForget(function(){return e.syncEngine.runTransaction(e.asyncQueue,t,n),Promise.resolve()}),n.promise},Bf);function Bf(t,e,n,r){this.platform=t,this.databaseInfo=e,this.credentials=n,this.asyncQueue=r,this.clientId=vi.newId()}var qf=(Uf.prototype.next=function(t){this.scheduleEvent(this.observer.next,t)},Uf.prototype.error=function(t){this.scheduleEvent(this.observer.error,t)},Uf.prototype.mute=function(){this.muted=!0},Uf.prototype.scheduleEvent=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},Uf);function Uf(t){this.observer=t,this.muted=!1}var jf=(Kf.documentId=function(){return Kf._DOCUMENT_ID},Kf.prototype.isEqual=function(t){if(!(t instanceof Kf))throw pi("isEqual","FieldPath",1,t);return this._internalPath.isEqual(t._internalPath)},Kf._DOCUMENT_ID=new Kf(qi.keyField().canonicalString()),Kf);function Kf(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t,e,n,r){if(!(e instanceof Array)||e.length<1)throw new Wr($r.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+yi(1,"element")+".")}(0,t);for(var n=0;n<t.length;++n)if(ri("FieldPath","string",n,t[n]),0===t[n].length)throw new Wr($r.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qi(t)}var $f=new RegExp("[~\\*/\\[\\]]"),Wf=(zf.prototype.getToken=function(){return Promise.resolve(null)},zf.prototype.invalidateToken=function(){},zf.prototype.setChangeListener=function(t){Br(!this.changeListener,"Can only call setChangeListener() once."),(this.changeListener=t)(lf.UNAUTHENTICATED)},zf.prototype.removeChangeListener=function(){Br(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},zf);function zf(){this.changeListener=null}var Qf=(Gf.prototype.getToken=function(){var t=this;Br(null!=this.tokenListener,"getToken cannot be called after listener removed.");var e=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){if(t.tokenCounter!==e)throw new Wr($r.ABORTED,"getToken aborted due to token change.");return n?(Br("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t}(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},Gf.prototype.invalidateToken=function(){this.forceRefresh=!0},Gf.prototype.setChangeListener=function(t){Br(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},Gf.prototype.removeChangeListener=function(){Br(null!=this.tokenListener,"removeChangeListener() called twice"),Br(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.auth&&this.auth.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},Gf.prototype.getUser=function(){var t=this.auth&&this.auth.getUid();return Br(null===t||"string"==typeof t,"Received invalid UID: "+t),new lf(t)},Gf);function Gf(t){var e=this;this.tokenListener=null,this.currentUser=lf.UNAUTHENTICATED,this.receivedInitialUser=!1,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){e.tokenCounter++,e.currentUser=e.getUser(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.tokenCounter=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.tokenListener):(this.tokenListener(null),t.get().then(function(t){e.auth=t,e.tokenListener&&e.auth.addAuthTokenListener(e.tokenListener)},function(){}))}var Hf=(Object.defineProperty(Yf.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.sessionIndex},e=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),Yf);function Yf(t,e){this.gapi=t,this.sessionIndex=e,this.type="FirstParty",this.user=lf.FIRST_PARTY}var Jf=(Xf.prototype.getToken=function(){return Promise.resolve(new Hf(this.gapi,this.sessionIndex))},Xf.prototype.setChangeListener=function(t){t(lf.FIRST_PARTY)},Xf.prototype.removeChangeListener=function(){},Xf.prototype.invalidateToken=function(){},Xf);function Xf(t,e){this.gapi=t,this.sessionIndex=e}function Zf(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var tp=(ep.delete=function(){return Zr("FieldValue.delete",arguments),rp.instance},ep.serverTimestamp=function(){return Zr("FieldValue.serverTimestamp",arguments),ap.instance},ep.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ei("FieldValue.arrayUnion",arguments,1),new cp(t)},ep.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ei("FieldValue.arrayRemove",arguments,1),new fp(t)},ep.increment=function(t){return ri("FieldValue.increment","number",1,t),ti("FieldValue.increment",arguments,1),new mp(t)},ep.prototype.isEqual=function(t){return this===t},ep);function ep(t){this._methodName=t}var np,rp=(i(ip,np=tp),ip.instance=new ip,ip);function ip(){return np.call(this,"FieldValue.delete")||this}var op,ap=(i(sp,op=tp),sp.instance=new sp,sp);function sp(){return op.call(this,"FieldValue.serverTimestamp")||this}var up,cp=(i(lp,up=tp),lp);function lp(t){var e=up.call(this,"FieldValue.arrayUnion")||this;return e._elements=t,e}var hp,fp=(i(pp,hp=tp),pp);function pp(t){var e=hp.call(this,"FieldValue.arrayRemove")||this;return e._elements=t,e}var dp,mp=(i(yp,dp=tp),yp);function yp(t){var e=dp.call(this,"FieldValue.increment")||this;return e._operand=t,e}var vp=Qr(tp,"Use FieldValue.<field>() instead."),gp=/^__.*__$/,bp=(wp.prototype.toMutations=function(t,e){var n=[];return null!==this.fieldMask?n.push(new Na(t,this.data,this.fieldMask,e)):n.push(new _a(t,this.data,e)),0<this.fieldTransforms.length&&n.push(new Ra(t,this.fieldTransforms)),n},wp);function wp(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}var Tp,Sp,Ep=(Cp.prototype.toMutations=function(t,e){var n=[new Na(t,this.data,this.fieldMask,e)];return 0<this.fieldTransforms.length&&n.push(new Ra(t,this.fieldTransforms)),n},Cp);function Cp(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}function Ip(t){switch(t){case Tp.Set:case Tp.MergeSet:case Tp.Update:return!0;case Tp.Argument:case Tp.ArrayArgument:return!1;default:throw Vr("Unexpected case for UserDataSource: "+t)}}(Sp=Tp=Tp||{})[Sp.Set=0]="Set",Sp[Sp.Update=1]="Update",Sp[Sp.MergeSet=2]="MergeSet",Sp[Sp.Argument=3]="Argument",Sp[Sp.ArrayArgument=4]="ArrayArgument";var _p=(Ap.prototype.childContextForField=function(t){var e=null==this.path?null:this.path.child(t),n=new Ap(this.dataSource,this.methodName,e,!1,this.fieldTransforms,this.fieldMask);return n.validatePathSegment(t),n},Ap.prototype.childContextForFieldPath=function(t){var e=null==this.path?null:this.path.child(t),n=new Ap(this.dataSource,this.methodName,e,!1,this.fieldTransforms,this.fieldMask);return n.validatePath(),n},Ap.prototype.childContextForArray=function(t){return new Ap(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},Ap.prototype.createError=function(t){var e=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new Wr($r.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},Ap.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},Ap.prototype.validatePath=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))},Ap.prototype.validatePathSegment=function(t){if(0===t.length)throw this.createError("Document fields must not be empty");if(Ip(this.dataSource)&&gp.test(t))throw this.createError('Document fields cannot begin and end with "__"')},Ap);function Ap(t,e,n,r,i,o){this.dataSource=t,this.methodName=e,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}var Dp=function(t,e){this.databaseId=t,this.key=e},Np=(kp.prototype.parseSetData=function(t,e){var n=new _p(Tp.Set,t,qi.EMPTY_PATH);Rp("Data must be an object, but it was:",n,e);var r=this.parseData(e,n);return new bp(r,null,n.fieldTransforms)},kp.prototype.parseMergeData=function(t,e,n){var r=new _p(Tp.MergeSet,t,qi.EMPTY_PATH);Rp("Data must be an object, but it was:",r,e);var i,o,a=this.parseData(e,r);if(n){for(var s=new go(qi.comparator),u=0,c=n;u<c.length;u++){var l=c[u],h=void 0;if(l instanceof jf)h=l._internalPath;else{if("string"!=typeof l)throw Vr("Expected stringOrFieldPath to be a string or a FieldPath");h=Mp(t,l)}if(!r.contains(h))throw new Wr($r.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");s=s.add(h)}i=ma.fromSet(s),o=r.fieldTransforms.filter(function(t){return i.covers(t.field)})}else i=ma.fromArray(r.fieldMask),o=r.fieldTransforms;return new bp(a,i,o)},kp.prototype.parseUpdateData=function(t,e){var n=this,r=new _p(Tp.Update,t,qi.EMPTY_PATH);Rp("Data must be an object, but it was:",r,e);var i=new go(qi.comparator),o=_s.EMPTY;Jr(e,function(e,a){var s=Mp(t,e),u=r.childContextForFieldPath(s);if((a=n.runPreConverter(a,u))instanceof rp)i=i.add(s);else{var c=n.parseData(a,u);null!=c&&(i=i.add(s),o=o.set(s,c))}});var a=ma.fromSet(i);return new Ep(o,a,r.fieldTransforms)},kp.prototype.parseUpdateVarargs=function(t,e,n,r){var i=new _p(Tp.Update,t,qi.EMPTY_PATH),o=[xp(t,e)],a=[n];if(r.length%2!=0)throw new Wr($r.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(xp(t,r[s])),a.push(r[s+1]);var u=new go(qi.comparator),c=_s.EMPTY;for(s=0;s<o.length;++s){var l=o[s],h=i.childContextForFieldPath(l),f=this.runPreConverter(a[s],h);if(f instanceof rp)u=u.add(l);else{var p=this.parseData(f,h);null!=p&&(u=u.add(l),c=c.set(l,p))}}var d=ma.fromSet(u);return new Ep(c,d,i.fieldTransforms)},kp.prototype.parseQueryValue=function(t,e,n){void 0===n&&(n=!1);var r=new _p(n?Tp.ArrayArgument:Tp.Argument,t,qi.EMPTY_PATH),i=this.parseData(e,r);return Br(null!=i,"Parsed data should not be null."),Br(0===r.fieldTransforms.length,"Field transforms should have been disallowed."),i},kp.prototype.runPreConverter=function(t,e){try{return this.preConverter(t)}catch(t){var n=Lp(t);throw e.createError(n)}},kp.prototype.parseData=function(t,e){if(Op(t=this.runPreConverter(t,e)))return Rp("Unsupported field value:",e,t),this.parseObject(t,e);if(t instanceof tp)return this.parseSentinelFieldValue(t,e),null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.arrayElement&&e.dataSource!==Tp.ArrayArgument)throw e.createError("Nested arrays are not supported");return this.parseArray(t,e)}return this.parseScalarValue(t,e)},kp.prototype.parseObject=function(t,e){var n=this,r=new co(bi);return Xr(t)?e.path&&0<e.path.length&&e.fieldMask.push(e.path):Jr(t,function(t,i){var o=n.parseData(i,e.childContextForField(t));null!=o&&(r=r.insert(t,o))}),new _s(r)},kp.prototype.parseArray=function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=o[i],s=this.parseData(a,e.childContextForArray(r));null==s&&(s=za.INSTANCE),n.push(s),r++}return new Ns(n)},kp.prototype.parseSentinelFieldValue=function(t,e){if(!Ip(e.dataSource))throw e.createError(t._methodName+"() can only be used with update() and set()");if(null===e.path)throw e.createError(t._methodName+"() is not currently supported inside arrays");if(t instanceof rp){if(e.dataSource!==Tp.MergeSet)throw e.dataSource===Tp.Update?(Br(0<e.path.length,"FieldValue.delete() at the top level should have already been handled."),e.createError("FieldValue.delete() can only appear at the top level of your update data")):e.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.fieldMask.push(e.path)}else if(t instanceof ap)e.fieldTransforms.push(new va(e.path,Dh.instance));else if(t instanceof cp){var n=this.parseArrayTransformElements(t._methodName,t._elements),r=new kh(n);e.fieldTransforms.push(new va(e.path,r))}else if(t instanceof fp){n=this.parseArrayTransformElements(t._methodName,t._elements);var i=new Rh(n);e.fieldTransforms.push(new va(e.path,i))}else if(t instanceof mp){var o=this.parseQueryValue("FieldValue.increment",t._operand),a=new Mh(o);e.fieldTransforms.push(new va(e.path,a))}else Vr("Unknown FieldValue type: "+t)},kp.prototype.parseScalarValue=function(t,e){if(null===t)return za.INSTANCE;if("number"==typeof t)return vc(t)?new ns(t):new os(t);if("boolean"==typeof t)return Ha.of(t);if("string"==typeof t)return new us(t);if(t instanceof Date)return new hs(oo.fromDate(t));if(t instanceof oo)return new hs(new oo(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)));if(t instanceof _h)return new Es(t);if(t instanceof Ci)return new vs(t);if(t instanceof Dp)return new ws(t.databaseId,t.key);throw e.createError("Unsupported field value: "+li(t))},kp.prototype.parseArrayTransformElements=function(t,e){var n=this;return e.map(function(e,r){var i=new _p(Tp.Argument,t,qi.EMPTY_PATH);return n.parseData(e,i.childContextForArray(r))})},kp);function kp(t){this.preConverter=t}function Op(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof oo||t instanceof _h||t instanceof Ci||t instanceof Dp||t instanceof tp)}function Rp(t,e,n){if(!Op(n)||!ci(n)){var r=li(n);throw"an object"===r?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function xp(t,e){if(e instanceof jf)return e._internalPath;if("string"==typeof e)return Mp(t,e);throw new Wr($r.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function Mp(t,e){try{return function(t){if(0<=t.search($f))throw new Wr($r.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(jf.bind.apply(jf,l([void 0],t.split("."))))}catch(e){throw new Wr($r.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e)._internalPath}catch(e){var n=Lp(e);throw new Wr($r.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function Lp(t){return t instanceof Error?t.message:t.toString()}var Pp=$u.COLLECTION_DISABLED,Fp=(Vp.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling},Vp);function Vp(t){if(void 0===t.host){if(void 0!==t.ssl)throw new Wr($r.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else oi("settings","non-empty string","host",t.host),this.host=t.host,ai("settings","boolean","ssl",t.ssl),this.ssl=Hr(t.ssl,!0);if(fi("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),ai("settings","object","credentials",t.credentials),this.credentials=t.credentials,ai("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),!0===t.timestampsInSnapshots?Pr("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===t.timestampsInSnapshots&&Pr("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=Hr(t.timestampsInSnapshots,!0),ai("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=$u.DEFAULT_CACHE_SIZE_BYTES;else{if(t.cacheSizeBytes!==Pp&&t.cacheSizeBytes<$u.MINIMUM_CACHE_SIZE_BYTES)throw new Wr($r.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+$u.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=t.cacheSizeBytes}ai("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=void 0!==t.experimentalForceLongPolling&&t.experimentalForceLongPolling}var Bp=(qp.prototype.settings=function(t){if(ti("Firestore.settings",arguments,1),ri("Firestore.settings","object",1,t),Gr(t,"persistence"))throw new Wr($r.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var e=new Fp(t);if(this._firestoreClient&&!this._settings.isEqual(e))throw new Wr($r.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");void 0!==(this._settings=e).credentials&&(this._credentials=function(t){if(!t)return new Wf;switch(t.type){case"gapi":var e=t.client;return Br(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new Jf(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Wr($r.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},qp.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},qp.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},qp.prototype.enablePersistence=function(t){if(this._firestoreClient)throw new Wr($r.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var e=!1;return t&&(void 0!==t.experimentalTabSynchronization&&Pr("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),e=Hr(void 0!==t.synchronizeTabs?t.synchronizeTabs:t.experimentalTabSynchronization,!1)),this.configureClient(new Pf(this._settings.cacheSizeBytes,e))},qp.prototype.clearPersistence=function(){var t=this,e=ic.buildStoragePrefix(this.makeDatabaseInfo()),n=new zi;return this._queue.enqueueAndForgetEvenAfterShutdown(function(){return u(t,void 0,void 0,function(){var t;return c(this,function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientTerminated)throw new Wr($r.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,ic.clearPersistence(e)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return t=r.sent(),n.reject(t),[3,3];case 3:return[2]}})})}),n.promise},qp.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(qp.prototype,"_isTerminated",{get:function(){return this.ensureClientConfigured(),this._firestoreClient.clientTerminated},enumerable:!0,configurable:!0}),qp.prototype.waitForPendingWrites=function(){return this.ensureClientConfigured(),this._firestoreClient.waitForPendingWrites()},qp.prototype.onSnapshotsInSync=function(t){if(this.ensureClientConfigured(),Zf(t))return this.onSnapshotsInSyncInternal(t);ri("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return this.onSnapshotsInSyncInternal(e)},qp.prototype.onSnapshotsInSyncInternal=function(t){var e=this,n=new qf({next:function(){t.next&&t.next()},error:function(t){throw Vr("Uncaught Error in onSnapshotsInSync")}});return this._firestoreClient.addSnapshotsInSyncListener(n),function(){n.mute(),e._firestoreClient.removeSnapshotsInSyncListener(n)}},qp.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new function(){}),this._firestoreClient},qp.prototype.makeDatabaseInfo=function(){return new function(t,e,n,r,i){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i}(this._databaseId,this._persistenceKey,this._settings.host,this._settings.ssl,this._settings.forceLongPolling)},qp.prototype.configureClient=function(t){Br(!!this._settings.host,"FirestoreSettings.host is not set"),Br(!this._firestoreClient,"configureClient() called multiple times");var e=this.makeDatabaseInfo();return this._firestoreClient=new Vf(qr.getPlatform(),e,this._credentials,this._queue),this._firestoreClient.start(t)},qp.prototype.createDataConverter=function(t){return new Np(function(e){if(e instanceof Wp){var n=t,r=e.firestore._databaseId;if(!r.isEqual(n))throw new Wr($r.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new Dp(t,e._key)}return e})},qp.databaseIdFromApp=function(t){var e=t.options;if(!Gr(e,"projectId"))throw new Wr($r.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=e.projectId;if(!n||"string"!=typeof n)throw new Wr($r.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Di(n)},Object.defineProperty(qp.prototype,"app",{get:function(){if(!this._firebaseApp)throw new Wr($r.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._firebaseApp},enumerable:!0,configurable:!0}),qp.prototype.collection=function(t){return ti("Firestore.collection",arguments,1),ri("Firestore.collection","non-empty string",1,t),this.ensureClientConfigured(),new od(Pi.fromString(t),this)},qp.prototype.doc=function(t){return ti("Firestore.doc",arguments,1),ri("Firestore.doc","non-empty string",1,t),this.ensureClientConfigured(),Wp.forPath(Pi.fromString(t),this)},qp.prototype.collectionGroup=function(t){if(ti("Firestore.collectionGroup",arguments,1),ri("Firestore.collectionGroup","non-empty string",1,t),0<=t.indexOf("/"))throw new Wr($r.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new td(new Sc(Pi.EMPTY_PATH,t),this)},qp.prototype.runTransaction=function(t){var e=this;return ti("Firestore.runTransaction",arguments,1),ri("Firestore.runTransaction","function",1,t),this.ensureClientConfigured().transaction(function(n){return t(new Up(e,n))})},qp.prototype.batch=function(){return this.ensureClientConfigured(),new Kp(this)},Object.defineProperty(qp,"logLevel",{get:function(){switch(xr()){case Er.DEBUG:return"debug";case Er.ERROR:return"error";case Er.SILENT:return"silent";default:return Vr("Unknown log level: "+xr())}},enumerable:!0,configurable:!0}),qp.setLogLevel=function(t){switch(ti("Firestore.setLogLevel",arguments,1),ri("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":Mr(Er.DEBUG);break;case"error":Mr(Er.ERROR);break;case"silent":Mr(Er.SILENT);break;default:throw new Wr($r.INVALID_ARGUMENT,"Invalid log level: "+t)}},qp.prototype._areTimestampsInSnapshotsEnabled=function(){return this._settings.timestampsInSnapshots},qp);function qp(t,e){var n=this;if(this._firebaseApp=null,this._queue=new Hi,this.INTERNAL={delete:function(){return u(n,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.terminate()];case 1:return t.sent(),[2]}})})}},"object"==typeof t.options){var r=t;this._firebaseApp=r,this._databaseId=qp.databaseIdFromApp(r),this._persistenceKey=r.name,this._credentials=new Qf(e)}else{var i=t;if(!i.projectId)throw new Wr($r.INVALID_ARGUMENT,"Must provide projectId");this._databaseId=new Di(i.projectId,i.database),this._persistenceKey="[DEFAULT]",this._credentials=new Wf}this._settings=new Fp({}),this._dataConverter=this.createDataConverter(this._databaseId)}var Up=(jp.prototype.get=function(t){var e=this;ti("Transaction.get",arguments,1);var n=ld("Transaction.get",t,this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return Vr("Mismatch in docs returned from document lookup.");var r=t[0];if(r instanceof Fs)return new Hp(e._firestore,n._key,null,!1,!1,n._converter);if(r instanceof Ms)return new Hp(e._firestore,n._key,r,!1,!1,n._converter);throw Vr("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)})},jp.prototype.set=function(t,e,n){ni("Transaction.set",arguments,2,3);var r=ld("Transaction.set",t,this._firestore);n=sd("Transaction.set",n);var i=hd(r._converter,e,"Transaction.set"),o=i[0],a=i[1],s=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(a,o,n.mergeFields):this._firestore._dataConverter.parseSetData(a,o);return this._transaction.set(r._key,s),this},jp.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return i="string"==typeof e||e instanceof jf?(ei("Transaction.update",arguments,3),r=ld("Transaction.update",t,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",e,n,o)):(ti("Transaction.update",arguments,2),r=ld("Transaction.update",t,this._firestore),this._firestore._dataConverter.parseUpdateData("Transaction.update",e)),this._transaction.update(r._key,i),this},jp.prototype.delete=function(t){ti("Transaction.delete",arguments,1);var e=ld("Transaction.delete",t,this._firestore);return this._transaction.delete(e._key),this},jp);function jp(t,e){this._firestore=t,this._transaction=e}var Kp=($p.prototype.set=function(t,e,n){ni("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=ld("WriteBatch.set",t,this._firestore);n=sd("WriteBatch.set",n);var i=hd(r._converter,e,"WriteBatch.set"),o=i[0],a=i[1],s=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(a,o,n.mergeFields):this._firestore._dataConverter.parseSetData(a,o);return this._mutations=this._mutations.concat(s.toMutations(r._key,Ta.NONE)),this},$p.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.verifyNotCommitted(),i="string"==typeof e||e instanceof jf?(ei("WriteBatch.update",arguments,3),r=ld("WriteBatch.update",t,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",e,n,o)):(ti("WriteBatch.update",arguments,2),r=ld("WriteBatch.update",t,this._firestore),this._firestore._dataConverter.parseUpdateData("WriteBatch.update",e)),this._mutations=this._mutations.concat(i.toMutations(r._key,Ta.exists(!0))),this},$p.prototype.delete=function(t){ti("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var e=ld("WriteBatch.delete",t,this._firestore);return this._mutations=this._mutations.concat(new Ba(e._key,Ta.NONE)),this},$p.prototype.commit=function(){return u(this,void 0,void 0,function(){return c(this,function(t){return this.verifyNotCommitted(),this._committed=!0,0<this._mutations.length?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]})})},$p.prototype.verifyNotCommitted=function(){if(this._committed)throw new Wr($r.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},$p);function $p(t){this._firestore=t,this._mutations=[],this._committed=!1}var Wp=(zp.forPath=function(t,e,n){if(t.length%2!=0)throw new Wr($r.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new zp(new ji(t),e,n)},Object.defineProperty(zp.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(zp.prototype,"parent",{get:function(){return new od(this._key.path.popLast(),this.firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(zp.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),zp.prototype.collection=function(t){if(ti("DocumentReference.collection",arguments,1),ri("DocumentReference.collection","non-empty string",1,t),!t)throw new Wr($r.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=Pi.fromString(t);return new od(this._key.path.child(e),this.firestore)},zp.prototype.isEqual=function(t){if(!(t instanceof zp))throw pi("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this._key.isEqual(t._key)&&this._converter===t._converter},zp.prototype.set=function(t,e){ni("DocumentReference.set",arguments,1,2),e=sd("DocumentReference.set",e);var n=hd(this._converter,t,"DocumentReference.set"),r=n[0],i=n[1],o=e.merge||e.mergeFields?this.firestore._dataConverter.parseMergeData(i,r,e.mergeFields):this.firestore._dataConverter.parseSetData(i,r);return this._firestoreClient.write(o.toMutations(this._key,Ta.NONE))},zp.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof t||t instanceof jf?(ei("DocumentReference.update",arguments,2),this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",t,e,r)):(ti("DocumentReference.update",arguments,1),this.firestore._dataConverter.parseUpdateData("DocumentReference.update",t)),this._firestoreClient.write(n.toMutations(this._key,Ta.exists(!0)))},zp.prototype.delete=function(){return ti("DocumentReference.delete",arguments,0),this._firestoreClient.write([new Ba(this._key,Ta.NONE)])},zp.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];ni("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||Zf(t[i])||(fi("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),ai("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return n=Zf(t[i])?t[i]:(ri("DocumentReference.onSnapshot","function",i,t[i]),ii("DocumentReference.onSnapshot","function",i+1,t[i+1]),ii("DocumentReference.onSnapshot","function",i+2,t[i+2]),{next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(o,n)},zp.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new qf({next:function(t){if(e.next){Br(t.docs.size<=1,"Too many documents returned on a document query");var r=t.docs.get(n._key);e.next(new Hp(n.firestore,n._key,r,t.fromCache,t.hasPendingWrites,n._converter))}},error:r}),o=this._firestoreClient.listen(Sc.atPath(this._key.path),i,t);return function(){i.mute(),n._firestoreClient.unlisten(o)}},zp.prototype.get=function(t){var e=this;return ni("DocumentReference.get",arguments,0,1),cd("DocumentReference.get",t),new Promise(function(n,r){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentFromLocalCache(e._key).then(function(t){n(new Hp(e.firestore,e._key,t,!0,t instanceof Ms&&t.hasLocalMutations,e._converter))},r):e.getViaSnapshotListener(n,r,t)})},zp.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?e(new Wr($r.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?e(new Wr($r.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(i)},error:e})},zp.prototype.withConverter=function(t){return new zp(this._key,this.firestore,t)},zp);function zp(t,e,n){this._key=t,this.firestore=e,this._converter=n,this._firestoreClient=this.firestore.ensureClientConfigured()}var Qp=(Gp.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},Gp);function Gp(t,e){this.hasPendingWrites=t,this.fromCache=e}var Hp=(Yp.prototype.data=function(t){if(ni("DocumentSnapshot.data",arguments,0,1),t=ud("DocumentSnapshot.data",t),this._document){if(this._converter){var e=new Xp(this._firestore,this._key,this._document,this._fromCache,this._hasPendingWrites);return this._converter.fromFirestore(e,t)}return this.toJSObject(this._document.data(),Ua.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))}},Yp.prototype.get=function(t,e){if(ni("DocumentSnapshot.get",arguments,1,2),e=ud("DocumentSnapshot.get",e),this._document){var n=this._document.data().field(xp("DocumentSnapshot.get",t));if(null!==n)return this.toJSValue(n,Ua.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(Yp.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(Yp.prototype,"ref",{get:function(){return new Wp(this._key,this._firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(Yp.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(Yp.prototype,"metadata",{get:function(){return new Qp(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),Yp.prototype.isEqual=function(t){if(!(t instanceof Yp))throw pi("isEqual","DocumentSnapshot",1,t);return this._firestore===t._firestore&&this._fromCache===t._fromCache&&this._key.isEqual(t._key)&&(null===this._document?null===t._document:this._document.isEqual(t._document))&&this._converter===t._converter},Yp.prototype.toJSObject=function(t,e){var n=this,r={};return t.forEach(function(t,i){r[t]=n.toJSValue(i,e)}),r},Yp.prototype.toJSValue=function(t,e){if(t instanceof _s)return this.toJSObject(t,e);if(t instanceof Ns)return this.toJSArray(t,e);if(t instanceof ws){var n=t.value(e),r=this._firestore.ensureClientConfigured().databaseId();return t.databaseId.isEqual(r)||Pr("Document "+this._key.path+" contains a document reference within a different database ("+t.databaseId.projectId+"/"+t.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new Wp(n,this._firestore,this._converter)}return t.value(e)},Yp.prototype.toJSArray=function(t,e){var n=this;return t.internalValue.map(function(t){return n.toJSValue(t,e)})},Yp);function Yp(t,e,n,r,i,o){this._firestore=t,this._key=e,this._document=n,this._fromCache=r,this._hasPendingWrites=i,this._converter=o}var Jp,Xp=(i(Zp,Jp=Hp),Zp.prototype.data=function(t){var e=Jp.prototype.data.call(this,t);return Br(void 0!==e,"Document in a QueryDocumentSnapshot should exist"),e},Zp);function Zp(){return null!==Jp&&Jp.apply(this,arguments)||this}var td=(ed.prototype.where=function(t,e,n){var r;ti("Query.where",arguments,3),hi("Query.where",3,n),function(t,e,n,r){if(!e.some(function(t){return t===r}))throw new Wr($r.INVALID_ARGUMENT,"Invalid value "+li(r)+" provided to function Query.where() for its "+mi(2)+" argument. Acceptable values: "+e.join(", "))}(0,["<","<=","==",">=",">","array-contains","in","array-contains-any"],0,e);var i=xp("Query.where",t),o=Cc.fromString(e);if(i.isKeyField()){if(o===Cc.ARRAY_CONTAINS||o===Cc.ARRAY_CONTAINS_ANY)throw new Wr($r.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o.toString()+"' queries on FieldPath.documentId().");if(o===Cc.IN){this.validateDisjunctiveFilterElements(n,o);for(var a=[],s=0,u=n;s<u.length;s++){var c=u[s];a.push(this.parseDocumentIdValue(c))}r=new Ns(a)}else r=this.parseDocumentIdValue(n)}else o!==Cc.IN&&o!==Cc.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(n,o),r=this.firestore._dataConverter.parseQueryValue("Query.where",n,o===Cc.IN);var l=Ac.create(i,o,r);return this.validateNewFilter(l),new ed(this._query.addFilter(l),this.firestore,this._converter)},ed.prototype.orderBy=function(t,e){var n;if(ni("Query.orderBy",arguments,1,2),ii("Query.orderBy","non-empty string",2,e),void 0===e||"asc"===e)n=$c.ASCENDING;else{if("desc"!==e)throw new Wr($r.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+e+"', expected 'asc' or 'desc'.");n=$c.DESCENDING}if(null!==this._query.startAt)throw new Wr($r.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new Wr($r.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var r=xp("Query.orderBy",t),i=new Gc(r,n);return this.validateNewOrderBy(i),new ed(this._query.addOrderBy(i),this.firestore,this._converter)},ed.prototype.limit=function(t){return ti("Query.limit",arguments,1),ri("Query.limit","number",1,t),di("Query.limit",1,t),new ed(this._query.withLimitToFirst(t),this.firestore,this._converter)},ed.prototype.limitToLast=function(t){return ti("Query.limitToLast",arguments,1),ri("Query.limitToLast","number",1,t),di("Query.limitToLast",1,t),new ed(this._query.withLimitToLast(t),this.firestore,this._converter)},ed.prototype.startAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];ei("Query.startAt",arguments,1);var r=this.boundFromDocOrFields("Query.startAt",t,e,!0);return new ed(this._query.withStartAt(r),this.firestore,this._converter)},ed.prototype.startAfter=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];ei("Query.startAfter",arguments,1);var r=this.boundFromDocOrFields("Query.startAfter",t,e,!1);return new ed(this._query.withStartAt(r),this.firestore,this._converter)},ed.prototype.endBefore=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];ei("Query.endBefore",arguments,1);var r=this.boundFromDocOrFields("Query.endBefore",t,e,!0);return new ed(this._query.withEndAt(r),this.firestore,this._converter)},ed.prototype.endAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];ei("Query.endAt",arguments,1);var r=this.boundFromDocOrFields("Query.endAt",t,e,!1);return new ed(this._query.withEndAt(r),this.firestore,this._converter)},ed.prototype.isEqual=function(t){if(!(t instanceof ed))throw pi("isEqual","Query",1,t);return this.firestore===t.firestore&&this._query.isEqual(t._query)},ed.prototype.withConverter=function(t){return new ed(this._query,this.firestore,t)},ed.prototype.boundFromDocOrFields=function(t,e,n,r){if(hi(t,1,e),e instanceof Hp){if(0<n.length)throw new Wr($r.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var i=e;if(!i.exists)throw new Wr($r.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.boundFromDocument(t,i._document,r)}var o=[e].concat(n);return this.boundFromFields(t,o,r)},ed.prototype.boundFromDocument=function(t,e,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new ws(this.firestore._databaseId,e.key));else{var s=e.field(a.field);if(s instanceof ds)throw new Wr($r.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===s){var u=a.field.canonicalString();throw new Wr($r.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new zc(r,n)},ed.prototype.boundFromFields=function(t,e,n){var r=this._query.explicitOrderBy;if(e.length>r.length)throw new Wr($r.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var a=e[o];if(r[o].field.isKeyField()){if("string"!=typeof a)throw new Wr($r.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof a);if(!this._query.isCollectionGroupQuery()&&-1!==a.indexOf("/"))throw new Wr($r.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this._query.path.child(Pi.fromString(a));if(!ji.isDocumentKey(s))throw new Wr($r.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");var u=new ji(s);i.push(new ws(this.firestore._databaseId,u))}else{var c=this.firestore._dataConverter.parseQueryValue(t,a);i.push(c)}}return new zc(i,n)},ed.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];ni("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||Zf(t[i])||(fi("Query.onSnapshot",r=t[i],["includeMetadataChanges"]),ai("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),n=Zf(t[i])?t[i]:(ri("Query.onSnapshot","function",i,t[i]),ii("Query.onSnapshot","function",i+1,t[i+1]),ii("Query.onSnapshot","function",i+2,t[i+2]),{next:t[i],error:t[i+1],complete:t[i+2]}),this.validateHasExplicitOrderByForLimitToLast(this._query),this.onSnapshotInternal(r,n)},ed.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new qf({next:function(t){e.next&&e.next(new nd(n.firestore,n._query,t,n._converter))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,t);return function(){i.mute(),o.unlisten(a)}},ed.prototype.validateHasExplicitOrderByForLimitToLast=function(t){if(t.hasLimitToLast()&&0===t.explicitOrderBy.length)throw new Wr($r.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},ed.prototype.get=function(t){var e=this;return ni("Query.get",arguments,0,1),cd("Query.get",t),this.validateHasExplicitOrderByForLimitToLast(this._query),new Promise(function(n,r){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentsFromLocalCache(e._query).then(function(t){n(new nd(e.firestore,e._query,t,e._converter))},r):e.getViaSnapshotListener(n,r,t)})},ed.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?e(new Wr($r.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(i)},error:e})},ed.prototype.parseDocumentIdValue=function(t){if("string"==typeof t){if(""===t)throw new Wr($r.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==t.indexOf("/"))throw new Wr($r.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this._query.path.child(Pi.fromString(t));if(!ji.isDocumentKey(e))throw new Wr($r.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return new ws(this.firestore._databaseId,new ji(e))}if(t instanceof Wp){var n=t;return new ws(this.firestore._databaseId,n._key)}throw new Wr($r.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+li(t)+".")},ed.prototype.validateDisjunctiveFilterElements=function(t,e){if(!Array.isArray(t)||0===t.length)throw new Wr($r.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new Wr($r.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(0<=t.indexOf(null))throw new Wr($r.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(0<t.filter(function(t){return Number.isNaN(t)}).length)throw new Wr($r.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},ed.prototype.validateNewFilter=function(t){if(t instanceof Ac){var e=[Cc.ARRAY_CONTAINS,Cc.ARRAY_CONTAINS_ANY],n=[Cc.IN,Cc.ARRAY_CONTAINS_ANY],r=0<=e.indexOf(t.op),i=0<=n.indexOf(t.op);if(t.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(t.field))throw new Wr($r.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+t.field.toString()+"'");var a=this._query.getFirstOrderByField();null!==a&&this.validateOrderByAndInequalityMatch(t.field,a)}else if(i||r){var s=null;if(i&&(s=this._query.findFilterOperator(n)),null===s&&r&&(s=this._query.findFilterOperator(e)),null!=s)throw s===t.op?new Wr($r.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new Wr($r.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+s.toString()+"' filters.")}}},ed.prototype.validateNewOrderBy=function(t){if(null===this._query.getFirstOrderByField()){var e=this._query.getInequalityFilterField();null!==e&&this.validateOrderByAndInequalityMatch(e,t.field)}},ed.prototype.validateOrderByAndInequalityMatch=function(t,e){if(!e.isEqual(t))throw new Wr($r.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},ed);function ed(t,e,n){this._query=t,this.firestore=e,this._converter=n}var nd=(Object.defineProperty(rd.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!0,configurable:!0}),Object.defineProperty(rd.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(rd.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),rd.prototype.forEach=function(t,e){var n=this;ni("QuerySnapshot.forEach",arguments,1,2),ri("QuerySnapshot.forEach","function",1,t),this._snapshot.docs.forEach(function(r){t.call(e,n.convertToDocumentImpl(r))})},Object.defineProperty(rd.prototype,"query",{get:function(){return new td(this._originalQuery,this._firestore,this._converter)},enumerable:!0,configurable:!0}),rd.prototype.docChanges=function(t){t&&(fi("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),ai("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this._snapshot.excludesMetadataChanges)throw new Wr($r.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e,n,r){if(n.oldDocs.isEmpty()){var i,o=0;return n.docChanges.map(function(e){var a=new Xp(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key),r);return Br(e.type===Xl.Added,"Invalid event type for first snapshot"),Br(!i||n.query.docComparator(i,e.doc)<0,"Got added events in wrong order"),i=e.doc,{type:"added",doc:a,oldIndex:-1,newIndex:o++}})}var a=n.oldDocs;return n.docChanges.filter(function(t){return e||t.type!==Xl.Metadata}).map(function(e){var i=new Xp(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key),r),o=-1,s=-1;return e.type!==Xl.Added&&(Br(0<=(o=a.indexOf(e.doc.key)),"Index for document not found"),a=a.delete(e.doc.key)),e.type!==Xl.Removed&&(s=(a=a.add(e.doc)).indexOf(e.doc.key)),{type:function(t){switch(t){case Xl.Added:return"added";case Xl.Modified:case Xl.Metadata:return"modified";case Xl.Removed:return"removed";default:return Vr("Unknown change type: "+t)}}(e.type),doc:i,oldIndex:o,newIndex:s}})}(this._firestore,e,this._snapshot,this._converter),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},rd.prototype.isEqual=function(t){if(!(t instanceof rd))throw pi("isEqual","QuerySnapshot",1,t);return this._firestore===t._firestore&&this._originalQuery.isEqual(t._originalQuery)&&this._snapshot.isEqual(t._snapshot)&&this._converter===t._converter},rd.prototype.convertToDocumentImpl=function(t){return new Xp(this._firestore,t.key,t,this.metadata.fromCache,this._snapshot.mutatedKeys.has(t.key),this._converter)},rd);function rd(t,e,n,r){this._firestore=t,this._originalQuery=e,this._snapshot=n,this._converter=r,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new Qp(n.hasPendingWrites,n.fromCache)}l(["length","forEach","map"],"undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach(function(t){try{Object.defineProperty(nd.prototype.docChanges,t,{get:function(){return function(){throw new Wr($r.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(t){}});var id,od=(i(ad,id=td),Object.defineProperty(ad.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(ad.prototype,"parent",{get:function(){var t=this._query.path.popLast();return t.isEmpty()?null:new Wp(new ji(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(ad.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),ad.prototype.doc=function(t){if(ni("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=vi.newId()),ri("CollectionReference.doc","non-empty string",1,t),""===t)throw new Wr($r.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=Pi.fromString(t);return Wp.forPath(this._query.path.child(e),this.firestore,this._converter)},ad.prototype.add=function(t){ti("CollectionReference.add",arguments,1),ri("CollectionReference.add","object",1,t);var e=this.doc();return e.set(t).then(function(){return e})},ad.prototype.withConverter=function(t){return new ad(this._path,this.firestore,t)},ad);function ad(t,e,n){var r=id.call(this,Sc.atPath(t),e,n)||this;if((r._path=t).length%2!=1)throw new Wr($r.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.canonicalString()+" has "+t.length);return r}function sd(t,e){if(void 0===e)return{merge:!1};if(fi(t,e,["merge","mergeFields"]),ai(t,"boolean","merge",e.merge),function(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new Wr($r.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+li(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new Wr($r.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be "+n+", but the value at index "+o+" was: "+li(r[o]))}(t,e,n,r,i)}(t,"mergeFields","a string or a FieldPath",e.mergeFields,function(t){return"string"==typeof t||t instanceof jf}),void 0!==e.mergeFields&&void 0!==e.merge)throw new Wr($r.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function ud(t,e){return void 0===e?{}:(fi(t,e,["serverTimestamps"]),si(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function cd(t,e){ii(t,"object",1,e),e&&(fi(t,e,["source"]),si(t,0,"source",e.source,["default","server","cache"]))}function ld(t,e,n){if(e instanceof Wp){if(e.firestore!==n)throw new Wr($r.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw pi(t,"DocumentReference",1,e)}function hd(t,e,n){var r;return t?(r=t.toFirestore(e),n="toFirestore() in "+n):r=e,[r,n]}var fd=Qr(Bp,"Use firebase.firestore() instead."),pd=Qr(Up,"Use firebase.firestore().runTransaction() instead."),dd=Qr(Kp,"Use firebase.firestore().batch() instead."),md=Qr(Wp,"Use firebase.firestore().doc() instead."),yd=Qr(Hp),vd=Qr(Xp),gd=Qr(td),bd=Qr(nd),wd=Qr(od,"Use firebase.firestore().collection() instead."),Td={Firestore:fd,GeoPoint:_h,Timestamp:oo,Blob:_i,Transaction:pd,WriteBatch:dd,DocumentReference:md,DocumentSnapshot:yd,Query:gd,QueryDocumentSnapshot:vd,QuerySnapshot:bd,CollectionReference:wd,FieldPath:jf,FieldValue:vp,setLogLevel:Bp.setLogLevel,CACHE_SIZE_UNLIMITED:Pp};var Sd=(Ed.prototype.addCallback=function(t){},Ed.prototype.shutdown=function(){},Ed);function Ed(){}var Cd="ConnectivityMonitor",Id=(_d.prototype.addCallback=function(t){this.callbacks.push(t)},_d.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},_d.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},_d.prototype.onNetworkAvailable=function(){Lr(Cd,"Network connectivity changed: AVAILABLE");for(var t=0,e=this.callbacks;t<e.length;t++)(0,e[t])(0)},_d.prototype.onNetworkUnavailable=function(){Lr(Cd,"Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.callbacks;t<e.length;t++)(0,e[t])(1)},_d.isAvailable=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},_d);function _d(){var t=this;this.networkAvailableListener=function(){return t.onNetworkAvailable()},this.networkUnavailableListener=function(){return t.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}var Ad=(Dd.prototype.onOpen=function(t){Br(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=t},Dd.prototype.onClose=function(t){Br(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=t},Dd.prototype.onMessage=function(t){Br(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=t},Dd.prototype.close=function(){this.closeFn()},Dd.prototype.send=function(t){this.sendFn(t)},Dd.prototype.callOnOpen=function(){Br(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},Dd.prototype.callOnClose=function(t){Br(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(t)},Dd.prototype.callOnMessage=function(t){Br(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(t)},Dd);function Dd(t){this.sendFn=t.sendFn,this.closeFn=t.closeFn}var Nd="Connection",kd={BatchGetDocuments:"batchGet",Commit:"commit"},Od="gl-js/ fire/"+Or,Rd=(xd.prototype.modifyHeadersForRequest=function(t,e){if(e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n]);t["X-Goog-Api-Client"]=Od},xd.prototype.invokeRPC=function(t,e,n){var r=this,i=this.makeUrl(t);return new Promise(function(o,a){var u=new kr;u.listenOnce(Dr.COMPLETE,function(){try{switch(u.getLastErrorCode()){case Ar.NO_ERROR:var e=u.getResponseJson();Lr(Nd,"XHR received:",JSON.stringify(e)),o(e);break;case Ar.TIMEOUT:Lr(Nd,'RPC "'+t+'" timed out'),a(new Wr($r.DEADLINE_EXCEEDED,"Request time out"));break;case Ar.HTTP_ERROR:var n=u.getStatus();if(Lr(Nd,'RPC "'+t+'" failed with status:',n,"response text:",u.getResponseText()),0<n){var r=u.getResponseJson().error;if(r&&r.status&&r.message){var i=function(t){var e=r.status.toLowerCase().replace("_","-");return 0<=Object.values($r).indexOf(e)?e:$r.UNKNOWN}();a(new Wr(i,r.message))}else a(new Wr($r.UNKNOWN,"Server responded with status "+u.getStatus()))}else Lr(Nd,'RPC "'+t+'" failed'),a(new Wr($r.UNAVAILABLE,"Connection failed."));break;default:Vr('RPC "'+t+'" failed with unanticipated webchannel error '+u.getLastErrorCode()+": "+u.getLastError()+", giving up.")}}finally{Lr(Nd,'RPC "'+t+'" completed.')}});var c=s({},e);delete c.database;var l=JSON.stringify(c);Lr(Nd,"XHR sending: ",i+" "+l);var h={"Content-Type":"text/plain"};r.modifyHeadersForRequest(h,n),u.send(i,"POST",l,h,15)})},xd.prototype.invokeStreamingRPC=function(t,e,n){return this.invokeRPC(t,e,n)},xd.prototype.openStream=function(t,e){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=_r(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(i.initMessageHeaders,e),"object"==typeof navigator&&"ReactNative"===navigator.product||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");function a(t,e){s.listen(t,function(t){try{e(t)}catch(t){setTimeout(function(){throw t},0)}})}Lr(Nd,"Creating WebChannel: "+o+" "+i);var s=r.createWebChannel(o,i),u=!1,c=!1,l=new Ad({sendFn:function(t){c?Lr(Nd,"Not sending because WebChannel is closed:",t):(u||(Lr(Nd,"Opening WebChannel transport."),s.open(),u=!0),Lr(Nd,"WebChannel sending:",t),s.send(t))},closeFn:function(){return s.close()}});return a(Nr.EventType.OPEN,function(){c||Lr(Nd,"WebChannel transport opened.")}),a(Nr.EventType.CLOSE,function(){c||(c=!0,Lr(Nd,"WebChannel transport closed"),l.callOnClose())}),a(Nr.EventType.ERROR,function(t){c||(c=!0,Lr(Nd,"WebChannel transport errored:",t),l.callOnClose(new Wr($r.UNAVAILABLE,"The operation could not be completed")))}),a(Nr.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Br(!!n,"Got a webchannel message without data.");var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Lr(Nd,"WebChannel received error:",i);var o=i.status,a=function(t){var e=zl[o];if(void 0!==e)return Jl(e)}(),u=i.message;void 0===a&&(a=$r.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),c=!0,l.callOnClose(new Wr(a,u)),s.close()}else Lr(Nd,"WebChannel received:",n),l.callOnMessage(n)}}),setTimeout(function(){l.callOnOpen()},0),l},xd.prototype.makeUrl=function(t){var e=kd[t];return Br(void 0!==e,"Unknown REST mapping for: "+t),this.baseUrl+"/v1/projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents:"+e},xd);function xd(t){this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.baseUrl=e+"://"+t.host,this.forceLongPolling=t.forceLongPolling}var Md,Ld=(Object.defineProperty(Pd.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(Pd.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),Pd.prototype.loadConnection=function(t){return Promise.resolve(new Rd(t))},Pd.prototype.newConnectivityMonitor=function(){return Id.isAvailable()?new Id:new Sd},Pd.prototype.newSerializer=function(t){return new zh(t,{useProto3Json:!0})},Pd.prototype.formatJSON=function(t){return JSON.stringify(t)},Pd.prototype.atob=function(t){return atob(t)},Pd.prototype.btoa=function(t){return btoa(t)},Pd);function Pd(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}qr.setPlatform(new Ld),function(t){t.INTERNAL.registerComponent(new E("firestore",function(t){var e=t.getProvider("app").getImmediate();return new Bp(e,t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(function(t){Br(t&&"object"==typeof t,"shallowCopy() expects object parameter.");var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}(Td)))}(Md=n),Md.registerVersion("@firebase/firestore","1.9.1")}).apply(this,arguments)}catch(t){throw console.error(t),new Error("Cannot instantiate firebase-firestore - be sure to load firebase-app.js first.")}})(n("O4tu"))}).call(e,n("DuR2"),n("W2nU"))},O4tu:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,o=n("TToO"),a=n("Pxmi"),s=n("l0SK"),u=n("fjI4"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r),l=new a.ErrorFactory("app","Firebase",c),h="@firebase/app",f="0.5.0",p="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),m=new u.Logger("@firebase/app"),y=function(){function t(t,e,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=a.deepCopy(t),this.container=new s.ComponentContainer(e.name),this._addComponent(new s.Component("app",function(){return u},"PUBLIC"));try{for(var c=o.__values(this.firebase_.INTERNAL.components.values()),l=c.next();!l.done;l=c.next()){var h=l.value;this._addComponent(h)}}catch(t){r={error:t}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=p),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=p),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){m.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();y.prototype.name&&y.prototype.options||y.prototype.delete||console.log("dc");var v="7.6.0";
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var g=
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){if(void 0===i&&(i={}),"object"!=typeof i||null===i){var o=i;i={name:o}}var s=i;void 0===s.name&&(s.name=p);var u=s.name;if("string"!=typeof u||!u)throw l.create("bad-app-name",{appName:String(u)});if(a.contains(e,u))throw l.create("duplicate-app",{appName:u});var c=new t(n,s,r);return e[u]=c,c},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&a&&c.push("and"),a&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void m.warn(c.join(" "))}u(new s.Component(i+"-version",function(){return{library:i,version:e}},"VERSION"))},apps:null,SDK_VERSION:v,INTERNAL:{registerComponent:u,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||p,!a.contains(e,t))throw l.create("no-app",{appName:t});return e[t]}function u(s){var u,c,h=s.name;if(n.has(h))return m.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===s.type?r[h]:null;if(n.set(h,s),"PUBLIC"===s.type){var f=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[h])throw l.create("invalid-app-argument",{appName:h});return t[h]()};void 0!==s.serviceProps&&a.deepExtend(f,s.serviceProps),r[h]=f,t.prototype[h]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,h).apply(this,s.multipleInstances?t:[])}}try{for(var p=o.__values(Object.keys(e)),d=p.next();!d.done;d=p.next()){var y=d.value;e[y]._addComponent(s)}}catch(t){u={error:t}}finally{try{d&&!d.done&&(c=p.return)&&c.call(p)}finally{if(u)throw u.error}}return"PUBLIC"===s.type?r[h]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(y);return e.INTERNAL=o.__assign(o.__assign({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){a.deepExtend(e,t)},createSubscribe:a.createSubscribe,ErrorFactory:a.ErrorFactory,deepExtend:a.deepExtend}),e}(),b=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e,n=t.getComponent();return"VERSION"===(null===(e=n)||void 0===e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if(a.isBrowser()&&void 0!==self.firebase){m.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var w=self.firebase.SDK_VERSION;w&&w.indexOf("LITE")>=0&&m.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var T=g.initializeApp;g.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a.isNode()&&m.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),T.apply(void 0,t)};var S=g;!function(t,e){t.INTERNAL.registerComponent(new s.Component("platform-logger",function(t){return new b(t)},"PRIVATE")),t.registerVersion(h,f,e),t.registerVersion("fire-js","")}(S),e.default=S,e.firebase=S},Pxmi:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=n("TToO"),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw a(e)},a=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,p=63&c;u||(p=64,a||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},c=function(t){try{return u.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=l(t[n],e[n]));return t}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var h=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var p="FirebaseError",d=function(t){function e(n,r){var i=t.call(this,r)||this;return i.code=n,i.name=p,Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,m.prototype.create),i}return r.__extends(e,t),e}(Error),m=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?function(t,e){return t.replace(y,function(t,n){var r=e[n];return null!=r?r.toString():"<"+n+"?>"})}(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new d(i,s),c=0,l=Object.keys(r);c<l.length;c++){var h=l[c];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},t}();var y=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v(t){return JSON.parse(t)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var g=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=v(c(o[0])||""),n=v(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}};
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var b=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();var w=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=T),void 0===r.error&&(r.error=T),void 0===r.complete&&(r.complete=T);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function T(){}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}e.CONSTANTS=i,e.Deferred=h,e.ErrorFactory=m,e.FirebaseError=d,e.Sha1=b,e.assert=o,e.assertionError=a,e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){t.apply(void 0,n)}).catch(function(t){e&&e(t)})}},e.base64=u,e.base64Decode=c,e.base64Encode=function(t){var e=s(t);return u.encodeByteArray(e,!0)},e.contains=
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var n=new w(t,e);return n.subscribe.bind(n)},e.decode=g,e.deepCopy=
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){return l(void 0,t)},e.deepExtend=l,e.errorPrefix=S,e.getUA=f,e.isAdmin=function(t){var e=g(t).claims;return"object"==typeof e&&!0===e.admin},e.isBrowser=function(){return"object"==typeof self&&self.self===self},e.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())},e.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(t){return!1}},e.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isValidFormat=function(t){var e=g(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e=g(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},e.issuedAtTime=function(t){var e=g(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=v,e.map=function(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,e.querystring=function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach(function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}}),e},e.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;o(++r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},e.stringify=function(t){return JSON.stringify(t)},e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(S(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(S(t,e,r)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(S(t,e,r)+"must be a valid firebase namespace.")}}).call(e,n("DuR2"))},TToO:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.__extends=function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n.d(e,"__assign",function(){return i}),e.__rest=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},e.__decorate=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},e.__param=function(t,e){return function(n,r){e(n,r,t)}},e.__metadata=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},e.__awaiter=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},e.__generator=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},e.__exportStar=function(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])},e.__values=o,e.__read=a,e.__spread=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t},e.__spreadArrays=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},e.__await=s,e.__asyncGenerator=function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||u(t,e)})})}function u(t,e){try{(n=i[t](e)).value instanceof s?Promise.resolve(n.value.v).then(c,l):h(o[0][2],n)}catch(t){h(o[0][3],t)}var n}function c(t){u("next",t)}function l(t){u("throw",t)}function h(t,e){t(e),o.shift(),o.length&&u(o[0][0],o[0][1])}},e.__asyncDelegator=function(t){var e,n;return e={},r("next"),r("throw",function(t){throw t}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:s(t[r](e)),done:"return"===r}:i?i(e):e}:i}},e.__asyncValues=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=o(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise(function(r,i){e=t[n](e),function(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)}(r,i,e.done,e.value)})}}},e.__makeTemplateObject=function(t,e){Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e;return t},e.__importStar=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},e.__importDefault=function(t){return t&&t.__esModule?t:{default:t}};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var i=function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function o(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function a(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function s(t){return this instanceof s?(this.v=t,this):new s(t)}},"VU/8":function(t,e){t.exports=function(t,e,n,r,i,o){var a,s=t=t||{},u=typeof t.default;"object"!==u&&"function"!==u||(a=t,s=t.default);var c,l="function"==typeof s?s.options:s;if(e&&(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0),n&&(l.functional=!0),i&&(l._scopeId=i),o?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},l._ssrRegister=c):r&&(c=r),c){var h=l.functional,f=h?l.render:l.beforeCreate;h?(l._injectStyles=c,l.render=function(t,e){return c.call(e),f(t,e)}):l.beforeCreate=f?[].concat(f,c):[c]}return{esModule:a,exports:s,options:l}}},W2nU:function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],l=!1,h=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&p())}function p(){if(!l){var t=s(f);l=!0;for(var e=c.length;e;){for(u=c,c=[];++h<e;)u&&u[h].run();h=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function m(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||l||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},fjI4:function(t,e,n){"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"LogLevel",function(){return i}),n.d(e,"Logger",function(){return u}),n.d(e,"setLogLevel",function(){return c});var i,o=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(i||(i={}));var a=i.INFO,s=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(!(e<t.logLevel)){var a=(new Date).toISOString();switch(e){case i.DEBUG:case i.VERBOSE:console.log.apply(console,r(["["+a+"]  "+t.name+":"],n));break;case i.INFO:console.info.apply(console,r(["["+a+"]  "+t.name+":"],n));break;case i.WARN:console.warn.apply(console,r(["["+a+"]  "+t.name+":"],n));break;case i.ERROR:console.error.apply(console,r(["["+a+"]  "+t.name+":"],n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}},u=function(){function t(t){this.name=t,this._logLevel=a,this._logHandler=s,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in i))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,r([this,i.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,r([this,i.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,r([this,i.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,r([this,i.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,r([this,i.ERROR],t))},t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function c(t){o.forEach(function(e){e.logLevel=t})}},l0SK:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("TToO"),i=n("Pxmi"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),a="[DEFAULT]",s=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=a);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.Deferred;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=r.__assign({identifier:a,optional:!1},t),n=e.identifier,i=e.optional,o=this.normalizeInstanceIdentifier(n);try{var s=this.getOrInitializeService(o);if(!s){if(i)return null;throw Error("Service "+this.name+" is not available")}return s}catch(t){if(i)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService(a)}catch(t){}try{for(var i=r.__values(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=r.__read(o.value,2),u=s[0],c=s[1],l=this.normalizeInstanceIdentifier(u);try{var h=this.getOrInitializeService(l);c.resolve(h)}catch(t){}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=a),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,function(){var t;return r.__generator(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===a?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:a:t},t}();var u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();e.Component=o,e.ComponentContainer=u,e.Provider=s},yviF:function(t,e,n){"use strict";var r,i=(r=n("O4tu"))&&"object"==typeof r&&"default"in r?r.default:r;
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
i.registerVersion("firebase","7.6.1","app"),t.exports=i}});
//# sourceMappingURL=vendor.a576db0bea349f5f06fb.js.map